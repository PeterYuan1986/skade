<html>
<head>
    <script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script>
    <script type="text/javascript">
        <!--
        window.name = 'search';
        //-->
    </script>


    <script type="text/javascript">
        <!--
        function checkEnter(evt) {
            var evt = (evt) ? evt : ((event) ? event : null);
            var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
            if ((evt.keyCode == 13) && (node.type == "text")) {
                return false;
            }
        }

        document.onkeypress = checkEnter;
        //-->
    </script>


    <link type="text/css" rel="stylesheet" href="/pages/yui/yui_2.5.1/build/fonts/fonts-min.css">
    <link type="text/css" rel="stylesheet" href="/pages/yui/yui_2.5.1/build/button/assets/skins/sam/button.css">
    <link type="text/css" rel="stylesheet" href="/pages/yui/yui_2.7.0/build/assets/skins/sam/container.css">
    <link type="text/css" rel="stylesheet" href="/pages/yui/yui_2.5.1/build/tabview/assets/tabview-core.css">
    <link type="text/css" rel="stylesheet" href="/pages/yui/yui_2.5.1/build/treeview/assets/skins/sam/treeview.css">
    <link type="text/css" rel="stylesheet" href="/pages/yui/yui_2.5.1/build/datatable/assets/datatable-core.css">
    <link type="text/css" rel="stylesheet" href="/pages/yui/yui_2.7.0/build/calendar/assets/skins/sam/calendar.css">


    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
        }

        #advCalDialog1 .bd form {
            clear: left;
        }

        #advCalDialog1 .bd {
            padding: 0;
        }

        #advCalDialog1 .hd {
            text-align: left;
        }

        #advCalDialog1 .ft .button-group {
            text-align: center;
        }

        #advCalDialog1_c.yui-overlay-hidden table {
            *display: none;
        }

        #advCalendar1 {
            border: none;
            padding: 1.7em;
        }

        #advCalDialog2 .bd form {
            clear: left;
        }

        #advCalDialog2 .bd {
            padding: 0;
        }

        #advCalDialog2 .hd {
            text-align: left;
        }

        #advCalDialog2 .ft .button-group {
            text-align: center;
        }

        #advCalDialog2_c.yui-overlay-hidden table {
            *display: none;
        }

        #advCalendar2 {
            border: none;
            padding: 1.7em;
        }

        #advCalDialog3 .bd form {
            clear: left;
        }

        #advCalDialog3 .bd {
            padding: 0;
        }

        #advCalDialog3 .hd {
            text-align: left;
        }

        #advCalDialog3 .ft .button-group {
            text-align: center;
        }

        #advCalDialog3_c.yui-overlay-hidden table {
            *display: none;
        }

        #advCalendar3 {
            border: none;
            padding: 1.7em;
        }

        #advCalDialog4 .bd form {
            clear: left;
        }

        #advCalDialog4 .bd {
            padding: 0;
        }

        #advCalDialog4 .hd {
            text-align: left;
        }

        #advCalDialog4 .ft .button-group {
            text-align: center;
        }

        #advCalDialog4_c.yui-overlay-hidden table {
            *display: none;
        }

        #advCalendar4 {
            border: none;
            padding: 1.7em;
        }

        .advDatefield input,
        .advDatefield button {
            vertical-align: middle;
        }

        .advDatefield button img {
            padding: 0;
            margin: 0;
            vertical-align: middle;
        }

        #regroupDialog_c {
            top: 0;
        }
    </style>


    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/yahoo/yahoo.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/event/event.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/connection/connection.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/utilities/utilities.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/tabview/tabview.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/element/element-beta.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.7.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/dom/dom.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/button/button.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/container/container.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/treeview/treeview-min.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/datasource/datasource-beta-min.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/build/datatable/datatable-beta-min.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.6.0/build/dragdrop/dragdrop-min.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.6.0/build/slider/slider-min.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.7.0/build/calendar/calendar-min.js"></script>

    <script type="text/javascript" src="/pages/yui/yui_2.5.1/ida/ida.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/ida/connection.js"></script>
    <script type="text/javascript" src="/pages/yui/yui_2.5.1/ida/dialog.js"></script>


    <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
    <script>
        <!--
        NumericTextBox = function () {
            this.processRange = function (event, arguments) {
                var menuId = arguments.getTermName();
                var sectionId = arguments.getTermDiv();
                var units = arguments.getUnits();
                var value1 = arguments.getValue1();
                var value2 = arguments.getValue2();
                var rangeMenu = document.getElementById(menuId);
                if (rangeMenu != null) {
                    var rangeOption = rangeMenu[rangeMenu.selectedIndex].value;
                    var section = document.getElementById(sectionId);
                    if (section) {
                        while (section.firstChild) {
                            section.removeChild(section.firstChild);
                        }
                    }
                    if (rangeOption == 'EQUALS') {
                        var input1 = _getTextField(menuId + '_val1', menuId + '_val1', '5', value1, _checkNumericInput, menuId + '_val1');
                        section.appendChild(input1);
                        var unitMenu = document.createElement('unitMenu');
                        unitMenu.innerHTML = '&nbsp; ' + units;
                        section.appendChild(unitMenu);
                    } else if (rangeOption == 'BETWEEN') {
                        var input1 = _getTextField(menuId + '_val1', menuId + '_val1', '5', value1, _checkNumericInput, menuId + '_val1');
                        section.appendChild(input1);
                        var andText = document.createElement('andText');
                        andText.innerHTML = ' and ';
                        section.appendChild(andText);
                        var input2 = _getTextField(menuId + '_val2', menuId + '_val2', '5', value2, _checkNumericInput, menuId + '_val2');
                        section.appendChild(input2);
                        var unitMenu = document.createElement('unitMenu');
                        unitMenu.innerHTML = ' ' + units;
                        section.appendChild(unitMenu);
                    }
                }
            };

            function _getTextField(name, id, size, value, funct, arg) {
                var textField = document.createElement('input');
                textField.setAttribute('name', name);
                textField.setAttribute('id', id);
                textField.setAttribute('size', size);
                textField.setAttribute('value', value);
                textField.setAttribute('type', 'text');
                YAHOO.util.Event.addListener(textField, 'keyup', funct, arg);
                YAHOO.util.Event.addListener(textField, 'keypress', funct, arg);
                YAHOO.util.Event.addListener(textField, 'blur', funct, arg);
                return textField;
            }

            function _isNumeric(lchar) {
                var cCode = lchar.charCodeAt(0);
                if ((cCode < 46) || (cCode > 57) || (cCode == 47))
                    return false;
                else
                    return true;
            }

            function _checkNumericInput(event, id) {
                var userInput = document.getElementById(id);
                var strLength = userInput.value.length;
                var decimalCount = 0;
                if (event.type == 'keyup' || event.type == 'keypress') {
                    for (i = 0; i < strLength; i++) {
                        if (userInput.value.charAt(i) == '.') {
                            decimalCount++;
                        }
                    }
                    var lchar = userInput.value.charAt(strLength - 1);
                    if ((!_isNumeric(lchar)) || (decimalCount > 1)) {
                        var number = userInput.value.substring(0, strLength - 1);
                        userInput.value = number;
                    }
                } else {
                    var finalIndex = 0;
                    for (j = 0; j < strLength; j++) {
                        if (userInput.value.charAt(j) == '.') {
                            decimalCount++;
                        }
                        if (!_isNumeric(userInput.value.charAt(j)) || decimalCount > 1) {
                            finalIndex = j;
                            break;
                        }
                    }
                    var number = userInput.value.substring(0, j);
                    if (number == '.') {
                        number = '';
                    }
                    userInput.value = number;
                }
                return true;
            }
        };
        //-->
    </script>

    <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
    <script>
        <!--
        AccessDecoder = function (xml) {
            this.getCurrentLevel = function () {
                return xml.getAttribute("level");
            };
            this.getAccessList = function () {
                var accessList = new Array();
                for (i = 0; i < xml.childNodes.length; i++) {
                    if (xml.childNodes[i].tagName == undefined) {
                        continue;
                    }
                    var level = xml.childNodes[i].getAttribute("level");
                    var desc = xml.childNodes[i].getAttribute("description");
                    var access = new Access(level, desc);
                    accessList.push(access);
                }
                return accessList;
            };
        };
        Access = function (level, description) {
            var _level = level;
            var _description = description;
            this.getLevel = function () {
                return _level;
            };
            this.getDescription = function () {
                return _description;
            };
        };
        //-->
    </script>

    <!--
COPYRIGHT NOTICE
Copyright (c) 2010  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
    <script>
        <!--
        DialogInitializer = function () {
            this.init = function () {
                var callback = new IDA.connect.Callback(_refreshTab, _errorRefresh);
                var dialogBuilder = new CollectionDialogBuilder();
                dialogBuilder.getShareDialog(callback, 'share');
                var buttonIds = new Array();
                buttonIds.push('addCollectId');
                buttonIds.push('rgpCollectId');
                buttonIds.push('advResultAddCollectId');
                buttonIds.push('add-to-collection-button');
                var regroupDialogBuilder = new RegroupDialogBuilder();
                regroupDialogBuilder.getDialog(buttonIds);
            };

            function _refreshTab(o) {
                var selectHandler = new SelectHandler();
                selectHandler.init();
            };

            function _errorRefresh(o) {
            };
        };
        CollectionDialogBuilder = function () {
            this.getShareDialog = function (callback, listenerId, handler) {
                var shareCollection = function () {
                    this.submit();
                };
                var cancelShare = function () {
                    this.cancel();
                    document.share.reset();
                };
                var dialogsId = document.getElementById('dialogsId');
                var shareDiv = _createShareDialog('shareDialog', 'shareDialogTitle');
                dialogsId.appendChild(shareDiv);
                var buttons = new Array();
                buttons.push(new IDA.dialog.Button('Share', shareCollection));
                buttons.push(new IDA.dialog.Button('Cancel', cancelShare));
                var property = new IDA.dialog.Property();
                property.setWidth('480px');
                property.setButtons(buttons);
                var dialog = new YAHOO.widget.Dialog('shareDialog', property);
                dialog.callback = callback;
                YAHOO.util.Event.addListener(listenerId, 'click', _popUpDialog, dialog);
                YAHOO.util.Event.addListener(listenerId, 'click', _updateProjectLevelMenu);
                dialog.render();
                return dialog;
            };

            function _createShareDialog(rootName, titleName) {
                var rootDiv = document.createElement('div');
                rootDiv.setAttribute('id', rootName);
                rootDiv.setAttribute('style', 'font-size:12;');
                rootDiv.innerHTML =
                    '<div id=\"' + titleName + '\" class=\"hd\"></div>' +
                    '<div class=\"bd\">' +
                    '<form name=\"share\" action=\"/pages/ajax/search/collectShare\" method=\"GET\">' +
                    '<input type=\"hidden\" name=\"access\" value=\"share\"/>' +
                    '<table>' +
                    '<tr>' +
                    '<td>' +
                    'Choose the permissions that others need to access your collection.' +
                    '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>&nbsp;</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td><div class=\"currentCollection\"></div></td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>' +
                    'Minimum Level: &nbsp; <select name=\"accessLevel\" id=\"accessLevel\"></select>' +
                    '</td>' +
                    '</tr>' +
                    '</table>' +
                    '</form>' +
                    '</div>';
                return rootDiv;
            };

            function _updateProjectLevelMenu(event) {
                var handleSuccess = function (o) {
                    if (o.responseText != undefined && o.responseText != '') {
                        var accessDecoder = new AccessDecoder(o.responseXML.documentElement);
                        var currentLevel = accessDecoder.getCurrentLevel();
                        var accessList = accessDecoder.getAccessList();
                        var accessMenu = document.getElementById('accessLevel');
                        _removeAllChildren(accessMenu);
                        for (i = 0; i < accessList.length; i++) {
                            var level = accessList[i].getLevel();
                            var desc = accessList[i].getDescription();
                            var option = document.createElement('option');
                            option.value = level;
                            option.appendChild(document.createTextNode(desc));
                            if (currentLevel == level) {
                                option.selected = true;
                            }
                            accessMenu.appendChild(option);
                        }
                    }
                };
                var handleError = function (o) {
                };
                var url = "/pages/ajax/search/collectShareDialog";
                var callback = new IDA.connect.Callback(handleSuccess, handleError);
                var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
            };

            function _removeAllChildren(element) {
                if (element == null || element == undefined) {
                    return;
                }
                while (element.hasChildNodes()) {
                    element.removeChild(element.childNodes.item(0));
                }
            };

            function _popUpDialog(event, dialog) {
                dialog.show();
            };
        };
        //-->
    </script>

    <!--
COPYRIGHT NOTICE
Copyright (c) 2021  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
    <script>
        <!--
        RegroupDialogBuilder = function () {
            var _parentForm;
            var _actionParam;
            this.getDialog = function (buttonId) {
                var dialogsId = document.getElementById('dialogsId');
                var regroupDiv = _createRegroupDialog('regroupDialog', 'regroupDialogTitle');
                dialogsId.appendChild(regroupDiv);
                var buttons = new Array();
                buttons.push(new IDA.dialog.Button('OK', _submitParentForm));
                buttons.push(new IDA.dialog.Button('Cancel', _cancel));
                var property = new IDA.dialog.Property();
                property.setWidth('480px');
                property.setButtons(buttons);
                var dialog = new YAHOO.widget.Dialog('regroupDialog', property);
                YAHOO.util.Event.addListener(buttonId, 'click', _popUpDialog, dialog);
                YAHOO.util.Event.addListener(buttonId, 'click', _updateCollectionNameMenu);
                return dialog;
            };

            function _createRegroupDialog(rootName, titleName) {
                var rootDiv = document.createElement('div');
                rootDiv.setAttribute('id', rootName);
                rootDiv.setAttribute('style', 'font-size:12;');
                rootDiv.innerHTML =
                    '<div id="' + titleName + '" class="hd"></div>' +
                    '<div class="bd">' +
                    '<form name="regroup">' +
                    '<table>' +
                    '<tr>' +
                    '<td>&nbsp;</td>' +
                    '<td align="left" nowrap>' +
                    '<b>Select an existing collection:</b>' +
                    '</td>' +
                    '<td align="left">' +
                    '<select name="existingName" id="candidateNames" onchange="var disabler = new RegroupDisabler(); disabler.disableText(this);"></select>' +
                    '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>&nbsp;</td>' +
                    '<td align="center">' +
                    '<b>OR</b>' +
                    '</td>' +
                    '<td>&nbsp;</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>&nbsp;</td>' +
                    '<td nowrap>' +
                    '<b>Enter a name for the collection:</b>' +
                    '</td>' +
                    '<td align="left">' +
                    '<input type="text" id="nameText" name="newName" size="20" maxlength="25" onKeyUp="var disabler = new RegroupDisabler(); disabler.disableMenu(this);" onblur="var disabler = new RegroupDisabler(); disabler.disableMenu(this);">' +
                    '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>&nbsp;</td>' +
                    '<td>&nbsp;</td>' +
                    '<td align="left">' +
                    '<span id="collectionNameError" style="color:#FF0000"></span>' +
                    '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>&nbsp;</td>' +
                    '<td nowrap >' +
                    '<b>Optional collection description:</b>' +
                    '</td>' +
                    '<td align="left">' +
                    '<input type="text" id="descText" name="newDescription"' +
                    'size="20" ' +
                    'maxlength="160"\>' +
                    '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>&nbsp;</td>' +
                    '<td>&nbsp;</td>' +
                    '<td align="left">' +
                    '<span id="collectionDescError" style="color:#FF0000"></span>' +
                    '</td>' +
                    '</tr>' +
                    '</table>' +
                    '</form>' +
                    '</div>';
                return rootDiv;
            };

            function _submitParentForm() {
                var menu = document.regroup.existingName;
                var nameField = document.regroup.newName;
                var descField = document.regroup.newDescription;
                var msg = "";
                var index = menu.selectedIndex;
                var existCollectName = menu.options[index].value;
                var newCollectName = nameField.value;
                var newCollectDesc = descField.value;
                if (existCollectName == '' && newCollectName == '') {
                    return;
                }
                _parentForm.userAction.value = _actionParam;
                if (existCollectName != '') {
                    _parentForm.existingName.value = existCollectName;
                    _parentForm.existingName.disabled = false;
                    _parentForm.newName.disabled = true;
                    _parentForm.newDescription.disabled = true;
                } else {
                    var exceeded = false;
                    if (newCollectName.length > 25) {
                        msg = "Collection name cannot exceed " + 25 + " characters";
                        $('#collectionNameError').html(msg);
                        _parentForm.newName.disabled = false;
                        exceeded = true;
                    } else {
                        $('#collectionNameError').html('');
                    }
                    if (newCollectDesc.length > 160) {
                        msg = "Collection description cannot exceed " + 160 + " characters";
                        $('#collectionDescError').html(msg);
                        _parentForm.newName.disabled = false;
                        exceeded = true;
                    } else {
                        $('#collectionDescError').html('');
                    }
                    if (exceeded) {
                        return;
                    }
                    msg = "";
                    _parentForm.newName.value = newCollectName;
                    _parentForm.newName.disabled = false;
                    _parentForm.newDescription.value = newCollectDesc;
                    _parentForm.newDescription.disabled = false;
                    _parentForm.existingName.disabled = true;
                }
                if ($("body").hasClass("ida-viewer")) {
                    $.ajax({
                        type: "GET",
                        url: _parentForm.action,
                        data: $(_parentForm).serialize(),
                        success: function (data) {
                            var collectionName = newCollectName ? newCollectName : menu.options[index].innerHTML;
                            var modalDialog = $(".confirm-modal");
                            if (modalDialog.length === 0) {
                                modalDialog = $("<div></div>").addClass("confirm-modal");
                                modalDialog.append("<span></span>");
                                $("body").append(modalDialog);
                            }
                            modalDialog.removeClass("hide");
                            modalDialog.find("span").text("Image added to collection " + collectionName);
                            modalDialog.fadeIn();
                            setTimeout(function () {
                                modalDialog.addClass("hide");
                            }, 1500);
                            setTimeout(function () {
                                document.title = "IDA Image Viewer : " + collectionName;
                            }, 1800);
                        }
                    });
                } else {
                    _parentForm.submit();
                }
                this.hide();
            };

            function _cancel() {
                this.cancel();
                document.regroup.reset();
                document.regroup.existingName.disabled = false;
                document.regroup.newName.disabled = false;
                document.regroup.newName.style.background = "white";
                document.regroup.newDescription.disabled = false;
                document.regroup.newDescription.style.background = "white";
                $('#collectionNameError').html('');
                $('#collectionDescError').html('');
            };

            function _popUpDialog(event, dialog) {
                var eventSourceButton = YAHOO.util.Event.getTarget(event);
                var buttonId = eventSourceButton.id;
                var titleDiv = document.getElementById('regroupDialogTitle');
                if (buttonId == 'addCollectId') {
                    _parentForm = document.resultTable;
                    _actionParam = 'add';
                    titleDiv.innerHTML = 'Add To Collection';
                } else if (buttonId == 'rgpCollectId') {
                    _parentForm = document.collection;
                    _actionParam = 'regroup';
                    titleDiv.innerHTML = 'Regroup Collection';
                } else if (buttonId == 'advResultAddCollectId') {
                    _parentForm = document.advResultTable;
                    _actionParam = 'add';
                    titleDiv.innerHTML = 'Add To Collection';
                } else if (buttonId == 'add-to-collection-button') {
                    _parentForm = document.advResultTable;
                    _actionParam = 'add';
                    titleDiv.innerHTML = 'Add To Collection';
                }
                dialog.render();
                dialog.show();
            };

            function _updateCollectionNameMenu(event) {
                var handleSuccess = function (o) {
                    if (o.responseText != undefined && o.responseText != '') {
                        var regroupDecoder = new RegroupDecoder(o.responseXML.documentElement);
                        var collectList = regroupDecoder.getCollectionList();
                        var collectMenu = document.getElementById('candidateNames');
                        _removeAllChildren(collectMenu);
                        var defaultOption = document.createElement('option');
                        collectMenu.appendChild(defaultOption);
                        for (i = 0; i < collectList.length; i++) {
                            var collectId = collectList[i].getId();
                            var collectName = collectList[i].getName();
                            var collectDesc = collectList[i].getDescription();
                            var option = document.createElement('option');
                            option.value = collectId;
                            option.desc = collectDesc;
                            option.appendChild(document.createTextNode(collectName));
                            collectMenu.appendChild(option);
                        }
                    }
                };
                var handleError = function (o) {
                };
                var url = "/pages/ajax/search/collectRegroupDialog";
                var callback = new IDA.connect.Callback(handleSuccess, handleError);
                var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
            };

            function _removeAllChildren(element) {
                if (element == null || element == undefined) {
                    return;
                }
                while (element.hasChildNodes()) {
                    element.removeChild(element.childNodes.item(0));
                }
            };
        };
        RegroupDisabler = function () {
            this.disableMenu = function (nameField) {
                var menu = document.regroup.existingName;
                var descField = document.regroup.newDescription;
                if (nameField.value.length != 0) {
                    menu.disabled = true;
                    var foundMatch = false;
                    for (var i = 1; i < menu.options.length; i++) {
                        if (menu.options[i].text == nameField.value) {
                            menu.options[i].selected = true;
                            foundMatch = true;
                            descField.disabled = true;
                            descField.style.background = "#E6E6E6";
                            descField.value = menu.options[i].desc;
                        } else {
                            menu.options[i].selected = false;
                        }
                    }
                    if (!foundMatch) {
                        menu.options[0].selected = true;
                        descField.disabled = false;
                        descField.style.background = "white";
                    }
                } else {
                    menu.disabled = false;
                    menu.options[0].selected = true;
                    descField.disabled = false;
                    descField.style.background = "white";
                }
            };
            this.disableText = function (menu) {
                var nameField = document.regroup.newName;
                var descField = document.regroup.newDescription;
                if (menu.selectedIndex != 0) {
                    nameField.disabled = true;
                    nameField.style.background = "#E6E6E6";
                    descField.disabled = true;
                    descField.style.background = "#E6E6E6";
                    descField.value = '';
                } else {
                    nameField.disabled = false;
                    nameField.style.background = "white";
                    descField.disabled = false;
                    descField.style.background = "white";
                }
            };
        };
        RegroupDecoder = function (xml) {
            this.getCollectionList = function () {
                var collectList = new Array();
                for (i = 0; i < xml.childNodes.length; i++) {
                    if (xml.childNodes[i].tagName == undefined) {
                        continue;
                    }
                    var id = xml.childNodes[i].getAttribute("id");
                    var name = xml.childNodes[i].getAttribute("name");
                    var desc = xml.childNodes[i].getAttribute("description");
                    var collect = new Collect(id, name, desc);
                    collectList.push(collect);
                }
                return collectList;
            };
        };
        Collect = function (id, name, description) {
            this.getId = function () {
                return id;
            };
            this.getName = function () {
                return name;
            };
            this.getDescription = function () {
                return description;
            };
        };
        //-->
    </script>

    <!--
COPYRIGHT NOTICE
Copyright (c) 2020  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
    <script>
        <!--
        SearchTabManager = function () {
            var _mainTabView;
            var _selectedSearchTab = false;
            var _selectedAdvResultTab = false;
            var _selectedCollectTab = false;
            this.initTabs = function () {
                _mainTabView = new YAHOO.widget.TabView('mainIdaSearchPage');
                _mainTabView.subscribe('activeTabChange', _mainTabChanged);
            }
            this.initializeSearchTab = function () {
                _initSearchTab();
            }
            this.initializeAdvSearchTab = function () {
                _initAdvSearchTab();
            }
            this.initializeAdvResultTab = function () {
                _initAdvResultTab();
            }
            this.initializeCollectionTab = function () {
                _initCollectTab();
            }

            function _mainTabChanged(event) {
                var tabString = event.newValue.toString();
                if (!_selectedSearchTab && tabString == 'Tab searchTabId') {
                    _initSearchTab();
                }
                if (tabString == 'Tab advSearchTabId') {
                    _initAdvSearchTab();
                }
                if (!_selectedAdvResultTab && tabString == 'Tab advResultTabId') {
                    _initAdvResultTab();
                }
                if (!_selectedCollectTab && tabString == 'Tab collectTabId') {
                    _initCollectTab();
                }
            };

            function _initSearchTab() {
                initSearchTab();
                _selectedSearchTab = true;
                _setTabParam("simpleSearch");
            };

            function _initAdvSearchTab() {
                initAdvSearchTab();
                _setTabParam("advSearch");
            };

            function _initAdvResultTab() {
                initAdvResultTab();
                _selectedAdvResultTab = true;
                _setTabParam("advResult");
            };

            function _initCollectTab() {
                initCollectTab();
                _selectedCollectTab = true;
                _setTabParam("collection");
            };

            function _setTabParam(tabParamValue) {
                var url = window.location.href;
                try {
                    var newValue = 'tab=' + tabParamValue + '&';
                    url = url.replace(/tab=.*?&/, newValue);
                    window.history.pushState({}, window.document.title, url);
                } catch (e) {
                    console.log(e)
                }
            };
        };
        //-->
    </script>


    <title>IDA Search</title>
    <link rel="stylesheet" href="/explore/css/header/idaHeader.css?rid=42">
    <link rel="stylesheet" href="/explore/css/header/themes/default.css?rid=42">
    <link rel="stylesheet" href="/explore/css/header/themes/adni.css?rid=42">
    <script src="/explore/js/libs/require.js" type="text/javascript" data-lib-name="require.js"></script>
    <meta http-equiv="Cache-Control" content="no-store">
    <meta http-equiv="pragma" content="no-cache">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description"
          content="The Image and Data Archive at the Laboratory of Neuro Imaging (IDA) provides a safe repository for medical imaging data.  LONI seeks to improve the understanding of the brain in health and disease through the development of algorithms and approaches for the comprehensive and quantitative mapping of its structure and function.">
    <meta name="keywords"
          content="LONI, IDA, Image Data Archive, Laboratory of Neuro Imaging, medical image data, DICOM, MINC, Analyze, NIfTI, neuroimaging analyses, brain atlases">
    <meta name="author" content="Crawford">
    <meta name="copyright" content="Copyright 1997-2023 Laboratory of Neuro Imaging, All Rights Reserved">
    <meta name="robots" content="all">
    <meta name="revisit-after" content="5 days">
    <meta name="rating" content="safe for kids">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta property="og:title" content="IDA - Image and Data Archive">
    <meta property="og:image" content="https://ida.loni.usc.edu/explore/images/header/ida_og_image.png">
    <meta property="og:image:width" content="1140">
    <meta property="og:image:height" content="600">
    <meta property="og:image:type" content="image/png">
    <script src="/explore/js/libs/jquery-3.5.1.min.js" type="text/javascript"
            data-lib-name="jquery-3.5.1.min.js"></script>
    <script src="/explore/js/libs/jqueryUtils.js" type="text/javascript" data-lib-name="jqueryUtils.js"></script>
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_"
            data-requiremodule="common/initializer" src="/explore/js/common/initializer.js?_rnd=3754"></script>
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_"
            data-requiremodule="common/browserInfo" src="/explore/js/common/browserInfo.js?_rnd=3754"></script>
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="text"
            src="/explore/js/libs/text-2.0.15.js?_rnd=3754"></script>
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_"
            data-requiremodule="header/idaHeader" src="/explore/js/header/idaHeader.js?_rnd=3754"></script>
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="header/login"
            src="/explore/js/header/login.js?_rnd=3754"></script>
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_"
            data-requiremodule="header/studySelector" src="/explore/js/header/studySelector.js?_rnd=3754"></script>
    <link rel="icon" href="/explore/images/header/favicon_light_theme.png">
</head>


<body class="yui-skin-sam is-firefox">
<div id="sliderTooltip" class="table_header yui-module yui-overlay"
     style="visibility: hidden; padding: 10px; border: 4px solid; z-index: 2; left: 482.717px; top: 511.9px;">

    <div class="bd">Page #1</div>
</div>
<iframe id="_yuiResizeMonitor"
        style="position: absolute; visibility: visible; width: 10em; height: 10em; top: -134px; left: -134px; border-width: 0px;"></iframe>
<div class="ida-header-container
	    	">


    <link rel="stylesheet" href="/explore/css/header/allThemes.css">


    <div class="ida-menu-container   ">

        <div class="ida-menu-container-outer">

            <!-- The gradient background. -->
            <div class="ida-menu-container-inner ida-menu-project-background">

                <div class="ida-menu-logo-container">

                    <div class="ida-menu-logo">
                        <span class="ida-menu-link" data-href="/login.jsp?project=ADNI"></span>
                    </div>
                </div>


                <div class="ida-menu-options center">


                    <div class="ida-menu-option ida-menu-project-container">
                        <div class="ida-study-selector-container">

                            <div class="ida-study-selector-label-container">
                                <div class="ida-study-selector-label">Select Study</div>
                                <div class="ida-study-selector-label-arrow"></div>
                                <div class="ida-study-selector-line left"></div>
                                <div class="ida-study-selector-line right"></div>
                                <div class="ida-study-selector-selected">ADNI</div>
                            </div>

                            <div class="ida-study-selector-dropdown-container" style="max-width: 314px;">
                                <div class="ida-study-selector-dropdown">
                                    <div class="ida-study-selector-dropdown-label">
                                        Your Studies
                                        <div class="ida-study-selector-close ida-close-flat-btn"></div>
                                    </div>

                                    <div class="ida-study-selector-list-container ida-scrollbar-v1">
                                        <div class="ida-study-selector-list">

                                            <a class="ida-study-selector-study" data-value="ABIDE"
                                               href="https://ida.loni.usc.edu/home/projectPage.jsp?project=ABIDE">
                                                <div class="ida-study-selector-logo faded-background-color-ABIDE"
                                                     style="background-image: url('/explore/images/logos/featured/ABIDE_Logo.png');"></div>
                                                <div class="ida-study-selector-code">ABIDE</div>
                                            </a>

                                            <a class="ida-study-selector-study active" data-value="ADNI"
                                               href="https://ida.loni.usc.edu/home/projectPage.jsp?project=ADNI">
                                                <div class="ida-study-selector-logo faded-background-color-ADNI"
                                                     style="background-image: url('/explore/images/logos/featured/ADNI_Logo.png');"></div>
                                                <div class="ida-study-selector-code">ADNI</div>
                                            </a>

                                            <a class="ida-study-selector-study" data-value="BRIN"
                                               href="https://ida.loni.usc.edu/home/projectPage.jsp?project=BRIN">
                                                <div class="ida-study-selector-logo faded-background-color-BRIN"
                                                     style="background-image: url('/explore/images/logos/featured/BRIN_Logo.png');"></div>
                                                <div class="ida-study-selector-code">BRIN</div>
                                            </a>

                                            <a class="ida-study-selector-study" data-value="CRYO"
                                               href="https://ida.loni.usc.edu/home/projectPage.jsp?project=CRYO">
                                                <div class="ida-study-selector-logo faded-background-color-CRYO"
                                                     style="background-image: url('/explore/images/logos/featured/CRYO_Logo.png');"></div>
                                                <div class="ida-study-selector-code">CRYO</div>
                                            </a>

                                            <a class="ida-study-selector-study" data-value="HCP"
                                               href="https://ida.loni.usc.edu/home/projectPage.jsp?project=HCP">
                                                <div class="ida-study-selector-logo faded-background-color-HCP"
                                                     style="background-image: url('/explore/images/logos/featured/HCP_Logo.png');"></div>
                                                <div class="ida-study-selector-code">HCP</div>
                                            </a>

                                            <a class="ida-study-selector-study" data-value="PAD"
                                               href="https://ida.loni.usc.edu/home/projectPage.jsp?project=PAD">
                                                <div class="ida-study-selector-logo faded-background-color-PAD"
                                                     style="background-image: url('/explore/images/logos/featured/PAD_Logo.png');"></div>
                                                <div class="ida-study-selector-code">PAD</div>
                                            </a>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="ida-menu-main-options">


                        <div class="ida-menu-hamburger">
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>


                        <div class="ida-menu-main-options-sub">
                            <div class="ida-menu-main-options-sub-inner">


                                <div class="ida-menu-option home">
                                    <div class="ida-menu-option-label">
                                        <span class="ida-menu-link" data-href="/login.jsp?project=ADNI">IDA Home</span>
                                    </div>
                                </div>


                                <div class="ida-menu-option support">
                                    <div class="ida-menu-option-label">


                                        <span class="ida-menu-link"
                                              data-href="https://ida.loni.usc.edu/services/Menu/Support.jsp">Support</span>
                                    </div>
                                </div>


                                <div class="ida-menu-option project-home">


                                    <div class="ida-menu-option-label">
                                        <span class="ida-menu-link"
                                              data-href="https://ida.loni.usc.edu/home/projectPage.jsp?project=ADNI">ADNI@LONI</span>
                                    </div>
                                </div>


                                <div class="ida-menu-option sub-menu download">
                                    <div class="ida-menu-option-label">Download</div>

                                    <div class="ida-menu-sub">
                                        <div class="ida-menu-sub-inner ida-project-tint-background">


                                            <div class="ida-menu-sub-option ida-project-faded-background-hover">
                                                <span class="ida-menu-link"
                                                      data-href="https://ida.loni.usc.edu/pages/access/studyData.jsp?project=ADNI">Study Data</span>
                                            </div>


                                            <div class="ida-menu-sub-option ida-project-faded-background-hover">
                                                <span class="ida-menu-link"
                                                      data-href="https://ida.loni.usc.edu/pages/access/search.jsp?tab=collection&amp;project=ADNI&amp;page=DOWNLOADS&amp;subPage=IMAGE_COLLECTIONS">Image Collections</span>
                                            </div>


                                            <div class="ida-menu-sub-option ida-project-faded-background-hover">
                                                <span class="ida-menu-link"
                                                      data-href="https://ida.loni.usc.edu/pages/access/geneticData.jsp?project=ADNI&amp;page=DOWNLOADS&amp;subPage=GENETIC_DATA">Genetic Data</span>
                                            </div>


                                        </div>
                                    </div>
                                </div>


                                <div class="ida-menu-option sub-menu search">
                                    <div class="ida-menu-option-label">Search</div>

                                    <div class="ida-menu-sub">
                                        <div class="ida-menu-sub-inner ida-project-tint-background">


                                            <div class="ida-menu-sub-option ida-project-faded-background-hover">
                                                <span class="ida-menu-link"
                                                      data-href="https://ida.loni.usc.edu/pages/access/search.jsp?project=ADNI&amp;tab=simpleSearch&amp;page=SEARCH&amp;subPage=SIMPLE_QUERY">Simple Image Search</span>
                                            </div>


                                            <div class="ida-menu-sub-option ida-project-faded-background-hover">
                                                <span class="ida-menu-link"
                                                      data-href="https://ida.loni.usc.edu/ladvq_search.xjsp?project=ADNI&amp;page=SEARCH&amp;subPage=ADV_QUERY">Advanced Image Search</span>
                                            </div>


                                            <div class="ida-menu-sub-option ida-project-faded-background-hover">
                                                <span class="ida-menu-link"
                                                      data-href="https://ida.loni.usc.edu/pages/access/search.jsp?project=ADNI&amp;tab=advSearch&amp;page=SEARCH&amp;subPage=NEW_ADV_QUERY">Advanced Image Search (beta)</span>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>


                </div>


                <div class="ida-menu-options right">


                    <div class="ida-menu-option home">
                        <div class="ida-menu-option-label">
                            <span class="ida-menu-link" data-href="/login.jsp?project=ADNI">IDA Home</span>
                        </div>
                    </div>


                    <div class="ida-menu-option support">
                        <div class="ida-menu-option-label">


                            <span class="ida-menu-link" data-href="/explore/jsp/support/support.jsp"
                                  data-target="_blank">Support</span>
                        </div>
                    </div>


                    <div class="ida-menu-option sub-menu user">
                        <div class="ida-menu-option-label" title="hyuan@wakehealth.edu">
                            <div class="ida-user-menu-icon"></div>
                            <span class="ida-user-email"><div class="ida-user-username">hyuan</div><div
                                    class="ida-user-domain">@wakehealth.edu</div></span>
                        </div>

                        <div class="ida-menu-sub">
                            <div class="ida-menu-sub-inner">


                                <div class="ida-menu-sub-option ida-project-faded-background-hover ida-home">
                                    <span class="ida-menu-link" data-href="/">IDA Home</span>
                                </div>


                                <div class="ida-menu-sub-option ida-project-faded-background-hover support">


                                    <span class="ida-menu-link"
                                          data-href="https://ida.loni.usc.edu/services/Menu/Support.jsp"
                                          data-target="_blank">Support</span>
                                </div>


                                <div class="ida-menu-sub-option ida-project-faded-background-hover">


                                    <span class="ida-menu-link"
                                          data-href="https://ida.loni.usc.edu//services/UserManagement.jsp?project=ADNI&amp;userEmail=hyuan%40wakehealth.edu">My Account</span>
                                </div>


                                <div class="ida-menu-sub-option ida-project-faded-background-hover">


                                    <span class="ida-menu-link"
                                          data-href="https://ida.loni.usc.edu/explore/jsp/header/logout.jsp">Sign Out</span>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>


</div>


<script src="/explore/js/common/idaLoader.js?rid=42"></script>
<script type="text/javascript">
    IDALoader.globalParams.project = 'ADNI';
    IDALoader.globalParams.projectDescription = 'Alzheimer&#039;s Disease Neuroimaging Initiative';
    IDALoader.globalParams.projectUrl = 'http://adni.loni.usc.edu/';
    IDALoader.globalParams.policyCookieName = 'idaCookiePolicy';
    IDALoader.globalParams.legacy = "true";

    IDALoader.init(function () {
        requirejs(["header/idaHeader"], function () {


        });
    });
</script>


<link rel="stylesheet" href="/services/CSS/ida.css">
<link rel="stylesheet" href="/services/jquery/smoothness/jquery-ui-1.8.14.custom.css">


<style type="text/css">
    .ida-header-container a, .ida-footer a {
        font-family: 'Source Sans Pro', 'sans-serif'
    }

    .ida-menu-option-label a, .ida-menu-sub-option a {
        font-size: inherit
    }

    .ida-menu-option-label a:hover, .ida-menu-sub-option a:hover {
        font-size: inherit;
        text-decoration: none;
        color: inherit;
    }

    .ida-container.legacy-page * {
        box-sizing: content-box;
    }

    .ida-container.legacy-page .ida-sub-header * {
        box-sizing: border-box;
    }

    .ida-footer *, .ida-footer {
        box-sizing: border-box ! important;
    }

</style>


<link rel="stylesheet" href="/explore/css/common/ida.css">


<link href="/services/CSS/adni.css" rel="stylesheet" type="text/css">
<link href="/services/CSS/home/ADNI-custom.css" rel="stylesheet" type="text/css">


<script type="text/javascript" src="/services/jquery/jquery-1.12.0.min.js"></script>
<script type="text/javascript" src="/services/jquery/jquery-ui-1.9.2.min.js"></script>
<script type="text/javascript" src="/services/jquery/jquery-migrate-1.2.1.min.js"></script>


<div class="ida-meta-container">


    <link rel="apple-touch-icon" href="/explore/images/header/ida_touch_icon.png">
    <link rel="apple-touch-startup-image" href="/explore/images/header/ida_touch_icon.png">
    <link rel="shortcut icon" href="/explore/images/header/ida_touch_icon.png">


    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-11758345-3']);
        _gaq.push(['_setDomainName', 'loni.usc.edu']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl'
                    : 'http://www')
                + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>


    <script type="text/javascript">
        $("head").append($(".ida-meta-container meta"));
    </script>
</div>


<div class="ida-container logged-in legacy-page">


    <div class="ida-sub-header">
        <div class="ida-sub-header-info">
            <div class="ida-sub-header-title-container">
                <div class="ida-sub-header-title">IDA Search</div>
            </div>
            <div class="ida-sub-header-content-container">
                <div class="ida-sub-header-content-container-inner">
                    <div class="ida-sub-header-content">
                        <div class="ida-sub-header-steps">
                            <div class="ida-sub-header-step ida-project-pseudo-color-before">Apply search filters.</div>
                            <div class="ida-sub-header-step ida-project-pseudo-color-before">Select items from search
                                results and add to a collection.
                            </div>
                            <div class="ida-sub-header-step ida-project-pseudo-color-before">Download collected items.
                            </div>
                        </div>
                    </div>
                    <div class="ida-btn ok-btn">OK</div>
                </div>
            </div>
        </div>

        <div class="ida-sub-header-logo-container ida-project-faded-border">
            <div class="ida-sub-header-project-logo"
                 style="background-image: url(&quot;/explore/images/logos/ADNI_Logo.png&quot;);"></div>
            <a target="_blank" rel="noopener" href="http://adni.loni.usc.edu/"></a>
            <span class="project-desc">Alzheimer's Disease Neuroimaging Initiative</span></div>
    </div>

    <script type="text/javascript">
        /** Called to initialize the search page */
        function init() {
            // Initialize the tabs
            var tabManager = new SearchTabManager();
            tabManager.initTabs();

            // Initialize the open tab


            tabManager.initializeCollectionTab();


            // Initialize the dialogs
            var dialogInitializer = new DialogInitializer();
            dialogInitializer.init();

            // Preload the progress dialog image
            var img = new Image();
            img.src = "/pages/images/Progress_Bar.gif";
        }

        YAHOO.util.Event.onDOMReady(init);
    </script>


    <div style="border: 0px; padding: 0px; margin: 0px; width: 100%" align="center">
        <table width="100%" cellspacing="10" cellpadding="0" border="0">


            <tbody>
            <tr valign="top">
                <td width="100%">
                    <table width="100%" cellspacing="0" cellpadding="0" border="0">


                        <tbody>
                        <tr>
                            <td colspan="3">

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2011  Scott C. Neu and Arthur W. Toga

See README.license for license notices.
-->


                                <table id="darkBgColor" width="100%" cellspacing="0" cellpadding="0">
                                    <tbody>
                                    <tr>
                                        <td align="right">&nbsp;</td>
                                    </tr>
                                    </tbody>
                                </table>

                            </td>
                        </tr>


                        <tr>
                            <td colspan="2" align="right">
                                <!--
COPYRIGHT NOTICE
Copyright (c) 2014  Scott C. Neu and Arthur W. Toga

See README.license for license notices.
-->


                                <table id="lightBgColor" width="100%" cellspacing="0" cellpadding="0">
                                    <tbody>
                                    <tr>
                                        <td nowrap=""><b>LEGEND</b>: &nbsp;

                                            <span class="breadCrumb">
        <a href="https://ida.loni.usc.edu/project_info.jsp" target="Projects">
          <b>Projects</b>
        </a>
        &nbsp; | &nbsp;

        <a href="https://ida.loni.usc.edu/research_group_info.jsp" target="Research_Groups">
          <b>Research Groups</b>
        </a>
        &nbsp; | &nbsp;

        <a href="https://ida.loni.usc.edu/modality_info.jsp" target="Modalities">
          <b>Modalities</b>
        </a>
        &nbsp; | &nbsp;

        <a href="https://ida.loni.usc.edu/help_info.jsp" target="Help">
          <b>Help</b>
        </a>



      </span>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                            </td>
                        </tr>

                        </tbody>
                    </table>
                </td>
            </tr>


            <tr>
                <td>
                    <div id="mainIdaSearchPage" class="yui-navset yui-navset-top">
                        <ul class="yui-nav">


                            <li id="searchTabId" class="selected" title="active"><a href="#tab1"><em><font size="3">Search</font></em></a>
                            </li>
                            <li id="advSearchTabId" class="" title=""><a href="#tab4"><em><font size="3">Advanced Search
                                (beta)</font></em></a></li>
                            <li id="collectTabId" class="" title=""><a href="#tab3"><em><font size="3">Data
                                Collections</font></em></a></li>
                        </ul>
                        <div class="yui-content">

                            <!--
COPYRIGHT NOTICE
Copyright (c) 2011  Scott C. Neu and Arthur W. Toga

See README.license for license notices.
-->


                            <div id="tab1" style="display: block;" align="center">


                                <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    MenuDecoder = function (xml) {
                                        this.getMenuItems = function () {
                                            var menuItems = new Array();
                                            for (i = 0; i < xml.childNodes.length; i++) {
                                                if (xml.childNodes[i].tagName == undefined) {
                                                    continue;
                                                }
                                                var itemName = xml.childNodes[i].getAttribute("name");
                                                var itemSelected = xml.childNodes[i].getAttribute("selected");
                                                var menuItem = new Item(itemName, itemSelected);
                                                menuItems.push(menuItem);
                                            }
                                            return menuItems;
                                        };
                                    };
                                    Item = function (itemName, itemSelected) {
                                        var _itemName = itemName;
                                        var _itemSelected = itemSelected;
                                        this.getItemName = function () {
                                            return _itemName;
                                        };
                                        this.getItemSelected = function () {
                                            return _itemSelected;
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    TableCreator = function () {
                                        var _table = document.createElement('table');
                                        var _tbody = document.createElement('tbody');
                                        this.createHtmlTable = function (border, cellpadding, cellspacing) {
                                            var head = document.createElement('thead');
                                            var foot = document.createElement('tfoot');
                                            _table.appendChild(head);
                                            _table.appendChild(_tbody);
                                            _table.appendChild(foot);
                                            _table.setAttribute('border', border);
                                            _table.setAttribute('cellpadding', cellpadding);
                                            _table.setAttribute('cellspacing', cellspacing);
                                            return _table;
                                        };
                                        this.getBodyElement = function () {
                                            return _tbody;
                                        }
                                    };
                                    ImageInfo = function () {
                                        this.populateImageInfo = function (protocolTerms, idTag) {
                                            var numTextBox = new NumericTextBox();
                                            var tableTag = document.getElementById(idTag);
                                            if (tableTag) {
                                                while (tableTag.firstChild) {
                                                    tableTag.removeChild(tableTag.firstChild);
                                                }
                                            }
                                            var tr;
                                            var td;
                                            for (p = 0; p < protocolTerms.length; p++) {
                                                var termDiv = 'numValues_' + protocolTerms[p].getId();
                                                tr = _getTR();
                                                td = _getTD('7%', '', '');
                                                tr.appendChild(td);
                                                td = _getTD('28%', 'right', '<b>' + protocolTerms[p].getName() + ':</b>');
                                                tr.appendChild(td);
                                                if (protocolTerms[p] instanceof NumberTerm) {
                                                    var termName = 'numberTerm_' + protocolTerms[p].getId();
                                                    var units = protocolTerms[p].getUnits();
                                                    var rangeCount = protocolTerms[p].getNumberOfItems();
                                                    var val1 = "";
                                                    var val2 = "";
                                                    if (rangeCount > 1) {
                                                        val1 = protocolTerms[p].getItem(0);
                                                        val2 = protocolTerms[p].getItem(1);
                                                    } else if (rangeCount == 1) {
                                                        val1 = protocolTerms[p].getItem(0);
                                                        val2 = "";
                                                    }
                                                    td = _getTD('65%', 'left', '', '5');
                                                    var tableCreator = new TableCreator();
                                                    var inTable = tableCreator.createHtmlTable('0', '1', '0');
                                                    var prArgs = new ProcessRangeParams(termName, termDiv, units, val1, val2);
                                                    var inSelect = _getSelect(termName, termName, numTextBox.processRange, prArgs);
                                                    var option1 = _getOption('EQUALS', 'Equals', false);
                                                    if (rangeCount < 2)
                                                        var option2 = _getOption('BETWEEN', 'Between', false);
                                                    else
                                                        var option2 = _getOption('BETWEEN', 'Between', true);
                                                    inSelect.appendChild(option1);
                                                    inSelect.appendChild(option2);
                                                    var inTR = _getTR();
                                                    var inTD = _getTD('5%', 'left', '');
                                                    inTD.appendChild(inSelect);
                                                    inTR.appendChild(inTD);
                                                    tableCreator.getBodyElement().appendChild(inTR);
                                                    inTD = _getTD('95%', 'left', '');
                                                    var numDivTag = _getDivTag(termDiv);
                                                    inTD.appendChild(numDivTag);
                                                    inTR.appendChild(inTD);
                                                    tableCreator.getBodyElement().appendChild(inTR);
                                                    td.appendChild(inTable);
                                                    tr.appendChild(td);
                                                } else if (protocolTerms[p] instanceof StringTerm) {
                                                    var termName = 'stringTerm_' + protocolTerms[p].getId();
                                                    td = _getTD('65%', 'left', '');
                                                    var inSelect = _getSelect(termName, termName, '', '');
                                                    for (m = 0; m < protocolTerms[p].getNumberOfItems(); m++) {
                                                        var menuVal = protocolTerms[p].getItem(m).getValue();
                                                        var valSelected = protocolTerms[p].getItem(m).getSelected();
                                                        if (valSelected)
                                                            var menuOpt = _getOption(menuVal, menuVal, true);
                                                        else
                                                            var menuOpt = _getOption(menuVal, menuVal, false);
                                                        inSelect.appendChild(menuOpt);
                                                    }
                                                    td.appendChild(inSelect);
                                                    tr.appendChild(td);
                                                }
                                                tableTag.appendChild(tr);
                                            }
                                            for (k = 0; k < protocolTerms.length; k++) {
                                                if (protocolTerms[k] instanceof NumberTerm) {
                                                    var numId = protocolTerms[k].getId();
                                                    var termNameRange = 'numberTerm_' + numId;
                                                    var termDivRange = 'numValues_' + numId;
                                                    var unitRange = protocolTerms[k].getUnits();
                                                    var itemCount = protocolTerms[k].getNumberOfItems();
                                                    var val1Range = "";
                                                    var val2Range = "";
                                                    if (itemCount > 1) {
                                                        val1Range = protocolTerms[k].getItem(0);
                                                        val2Range = protocolTerms[k].getItem(1);
                                                    } else if (itemCount == 1) {
                                                        val1Range = protocolTerms[k].getItem(0);
                                                        val2Range = "";
                                                    }
                                                    var prArgs2 = new ProcessRangeParams(termNameRange, termDivRange, unitRange, val1Range, val2Range);
                                                    numTextBox.processRange('change', prArgs2);
                                                }
                                            }
                                        };

                                        function _getSelect(name, id, funct, args) {
                                            var selectStmt = document.createElement('select');
                                            selectStmt.setAttribute('name', name);
                                            selectStmt.setAttribute('id', id);
                                            YAHOO.util.Event.addListener(selectStmt, 'change', funct, args);
                                            return selectStmt;
                                        }

                                        function _getOption(value, text, selectedVal) {
                                            var optionStmt = document.createElement('option');
                                            optionStmt.setAttribute('value', value);
                                            optionStmt.innerHTML = text;
                                            if (selectedVal) {
                                                optionStmt.setAttribute('selected', 'selected');
                                            }
                                            return optionStmt;
                                        }

                                        function _getTR() {
                                            var tr = document.createElement('tr');
                                            return tr;
                                        }

                                        function _getTD(width, align, text, colspan) {
                                            var td = document.createElement('td');
                                            td.setAttribute('style.width', width);
                                            td.setAttribute('align', align);
                                            td.innerHTML = text;
                                            if (colspan != null) td.setAttribute('colspan', colspan);
                                            return td;
                                        }

                                        function _getDivTag(id) {
                                            var divTag = document.createElement('div');
                                            divTag.setAttribute('id', id);
                                            return divTag;
                                        }
                                    };
                                    ProcessRangeParams = function (termName, termDiv, units, value1, value2) {
                                        var _termName = termName;
                                        var _termDiv = termDiv;
                                        var _units = units;
                                        var _value1 = value1;
                                        var _value2 = value2;
                                        this.getTermName = function () {
                                            return _termName;
                                        };
                                        this.getTermDiv = function () {
                                            return _termDiv;
                                        };
                                        this.getUnits = function () {
                                            return _units;
                                        };
                                        this.getValue1 = function () {
                                            return _value1;
                                        };
                                        this.getValue2 = function () {
                                            return _value2;
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    ImageInfoDecoder = function (xmlDoc) {
                                        this.parseXml = function () {
                                            var ptArray = new Array();
                                            var numOfChild = xmlDoc.childNodes.length;
                                            for (i = 0; i < numOfChild; i++) {
                                                if (xmlDoc.childNodes[i].tagName != undefined) {
                                                    var ptType = xmlDoc.childNodes[i].tagName;
                                                    var ptName = xmlDoc.childNodes[i].getAttribute("name");
                                                    var ptId = xmlDoc.childNodes[i].getAttribute("id");
                                                    if (ptType == "numberTerm") {
                                                        var ptUnit = xmlDoc.childNodes[i].getAttribute("unit");
                                                        var value1 = xmlDoc.childNodes[i].getAttribute("value1");
                                                        var value2 = xmlDoc.childNodes[i].getAttribute("value2");
                                                        var parsedDoc = new NumberTerm(ptName, ptId, ptUnit);
                                                        if (value1 == null) {
                                                            parsedDoc.addItem("");
                                                        } else if (value2 == null) {
                                                            parsedDoc.addItem(value1);
                                                        } else {
                                                            parsedDoc.addItem(value1);
                                                            parsedDoc.addItem(value2);
                                                        }
                                                        ptArray.push(parsedDoc);
                                                    } else if (ptType == "stringTerm") {
                                                        var parsedDoc = new StringTerm(ptName, ptId);
                                                        var menuItems = xmlDoc.childNodes[i].getElementsByTagName("menuItem");
                                                        for (m = 0; m < menuItems.length; m++) {
                                                            var oneItem = menuItems[m].getAttribute("value");
                                                            var userSelect = menuItems[m].getAttribute("selected");
                                                            if (userSelect == null) userSelect = false;
                                                            var menuItemBundle = new MenuItemBundle(oneItem, userSelect);
                                                            parsedDoc.addItem(menuItemBundle);
                                                        }
                                                        ptArray.push(parsedDoc);
                                                    }
                                                }
                                            }
                                            return ptArray;
                                        }
                                    };
                                    MenuItemBundle = function (value, selected) {
                                        var _value = value;
                                        var _selected = selected;
                                        this.getValue = function () {
                                            return _value;
                                        };
                                        this.getSelected = function () {
                                            return _selected;
                                        };
                                    };
                                    ProtocolTerm = function (name, id) {
                                        var _name = name;
                                        var _id = id;
                                        this.getName = function () {
                                            return _name;
                                        };
                                        this.getId = function () {
                                            return _id;
                                        };
                                    };
                                    NumberTerm = function (name, id, units) {
                                        ProtocolTerm.call(this, name, id);
                                        var _units = units;
                                        var _valueRange = new Array();
                                        this.getUnits = function () {
                                            return _units;
                                        };
                                        this.addItem = function (item) {
                                            _valueRange.push(item);
                                        };
                                        this.getNumberOfItems = function () {
                                            return _valueRange.length;
                                        };
                                        this.getItem = function (index) {
                                            return _valueRange[index];
                                        };
                                    };
                                    NumberTerm.prototype = new ProtocolTerm;
                                    NumberTerm.prototype.constructor = NumberTerm;
                                    StringTerm = function (name, id) {
                                        ProtocolTerm.call(this, name, id);
                                        var _menuItems = new Array();
                                        this.addItem = function (item) {
                                            _menuItems.push(item);
                                        };
                                        this.getNumberOfItems = function () {
                                            return _menuItems.length;
                                        };
                                        this.getItem = function (index) {
                                            return _menuItems[index];
                                        };
                                    };
                                    StringTerm.prototype = new ProtocolTerm;
                                    StringTerm.prototype.constructor = StringTerm;
                                    //-->
                                </script>


                                <script>
                                    <!--

                                    /** Initialize the search tab. */
                                    function initSearchTab() {
                                        // Process Image Info Protocol Terms
                                        processProtocolTerms(document.forms.IdaApp.modality);

                                        // Process Age Text Fields
                                        var prInit = new ProcessRangeParams('age', 'ageValues', 'years', '', '');
                                        numericTextBox.processRange('change', prInit);

                                        // Order-By section
                                        getOrderByMenu(document.forms.IdaApp.orderResult);
                                    }

                                    /** This variable is to control the "Search Result:Order By" drop down menus. */
                                    var searchCriteriaMenu;

                                    /** To use processRange method in NumericTextBox class. */
                                    var numericTextBox = new NumericTextBox();

                                    /** YUI success method for processing result search criteria. */
                                    var orderBySuccess = function (o) {
                                        if (o.responseText != undefined && o.responseText != "") {

                                            // Clear the previous menu
                                            searchCriteriaMenu.disabled = false;
                                            searchCriteriaMenu.length = 0;

                                            // Parse the XML response
                                            var orderByMenu = new MenuDecoder(o.responseXML.documentElement);

                                            // Get the menu items
                                            var menuList = orderByMenu.getMenuItems();

                                            for (i = 0; i < menuList.length; i++) {
                                                var menuItem = menuList[i].getItemName();
                                                var selectedItem = menuList[i].getItemSelected();

                                                // Get the display name for the menu item
                                                var displayName = "";

                                                if (menuItem == 'AGE') {
                                                    displayName = 'Age';
                                                }

                                                if (menuItem == 'RESEARCH_GROUP') {
                                                    displayName = 'Research Group';
                                                }

                                                if (menuItem == 'SEX') {
                                                    displayName = 'Sex';
                                                }

                                                if (menuItem == 'SPECIES') {
                                                    displayName = 'Species';
                                                }


                                                // Populate the array for the drop down menu
                                                searchCriteriaMenu.options[i] = new Option(displayName, menuItem);
                                                if (selectedItem != null && selectedItem != "")
                                                    searchCriteriaMenu.options[i].selected = true;
                                            }
                                            // Clear and disable the second menu if first menu item not selected
                                            if (document.forms.IdaApp.orderBy_val1.selectedIndex == 0) {
                                                document.forms.IdaApp.orderBy_val2.length = 0;
                                                document.forms.IdaApp.orderBy_val2.disabled = true;
                                            }
                                        }
                                    }

                                    /** YUI failure method for processing result search criteria. */
                                    var orderByFailure = function (o) {
                                        searchCriteriaMenu.disabled = true;
                                    }

                                    /** YUI success method for processing Protocol Terms given modality. */
                                    var imageInfoSuccess = function (o) {
                                        // Instantiate ImageInfoDecoder object
                                        var imageInfoDecoder = new ImageInfoDecoder(o.responseXML.documentElement);

                                        // Parse the xml, get an array of Protocol Term in return
                                        var protocolTerms = imageInfoDecoder.parseXml();

                                        // Create and populate Image Information Section
                                        var imageInfo = new ImageInfo();
                                        imageInfo.populateImageInfo(protocolTerms, 'ptSection');
                                    }

                                    /** YUI failure method for protocol terms. */
                                    var imageInfoFailure = function (o) {
                                        var ptMenu = document.getElementById("ptSection");
                                        ptMenu.disabled = true;
                                    }

                                    /** Method to change Protocol Terms display as modality is selected. */
                                    function processProtocolTerms(modalityMenu) {
                                        // Get the value for the modality index
                                        var modality = modalityMenu[modalityMenu.selectedIndex].value;

                                        // Use AJAX to populate the Image Info section
                                        var url = "/pages/ajax/search/queryImage?modality=" + modality;
                                        var callback = new IDA.connect.Callback(imageInfoSuccess, imageInfoFailure);
                                        var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                    }

                                    /** Method to process second drop down menu of "Order By". */
                                    function processOrderBy(firstMenu, secondMenu, menuIdToFill) {
                                        searchCriteriaMenu = menuIdToFill;

                                        //Get the text value for the index
                                        var menuItem1 = firstMenu[firstMenu.selectedIndex].value;

                                        // If the user does not select anything, disable the second menu
                                        if (menuItem1.length == 0) {
                                            secondMenu.length = 0;
                                            secondMenu.disabled = true;
                                        }

                                        // If user selected an item from the first menu
                                        else {
                                            // Check if there is any value for second menu
                                            if (secondMenu.selectedIndex > 0) {
                                                // Get value of second item
                                                var menuItem2 = secondMenu[secondMenu.selectedIndex].value;
                                                url = "/pages/ajax/search/queryOrderBy?mode=update&orderBy1=" + menuItem1 + "&orderBy2=" + menuItem2;
                                            } else url = "/pages/ajax/search/queryOrderBy?mode=update&orderBy1=" + menuItem1;

                                            // Submit the ajax request
                                            var callback = new IDA.connect.Callback(orderBySuccess, orderByFailure);
                                            var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        }
                                    }

                                    /** Method to clear the values in the states upon reset. */
                                    function clearValues() {
                                        var url = "/pages/ajax/search/queryOrderBy?mode=reset";

                                        // Submit the ajax request
                                        var callback = new IDA.connect.Callback(orderBySuccess, orderByFailure);
                                        var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                    }

                                    /** Method to populate the orderBy menu upon FIRST load. */
                                    function getOrderByMenu(menuIdToFill) {
                                        searchCriteriaMenu = menuIdToFill;
                                        var url = "/pages/ajax/search/queryOrderBy";

                                        // Submit the ajax request
                                        var callback = new IDA.connect.Callback(orderBySuccess, orderByFailure);
                                        var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                    }

                                    /** Method to reset the user selection when RESET button is clicked. */
                                    function resetUserInput() {
                                        // Clear the values in the form fields
                                        var f = document.IdaApp;
                                        var elements = f.elements;
                                        var length = elements.length;

                                        for (i = 0; i < length; i++) {
                                            var e = elements[i];
                                            var type = e.type;
                                            if (type == 'select-one') e.selectedIndex = 0;
                                            else if (type == 'text') e.value = '';
                                        }

                                        // Clear the values in the state
                                        clearValues();

                                        // Process Image Info Protocol Terms
                                        processProtocolTerms(document.forms.IdaApp.modality);

                                        // Process Age Text Fields
                                        var prReset = new ProcessRangeParams('age', 'ageValues', 'years', '', '');
                                        numericTextBox.processRange('change', prReset);

                                        // Order-By section
                                        getOrderByMenu(document.forms.IdaApp.orderResult);
                                    }

                                    //-->
                                </script>


                                <form name="IdaApp" method="POST" action="search.jsp">
                                    <table width="920" cellspacing="0" cellpadding="0" border="0">
                                        <tbody>
                                        <tr valign="top">

                                            <td>
                                                <font size="2">
                                                    <b>Enter your selection criteria using the form below.</b> <i>Simple
                                                    search returns only raw (unprocessed) images. To search for
                                                    processed images, use the Advanced Search option.</i>
                                                </font>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <table class="ida-search-contentBgColor" width="100%" cellspacing="1"
                                                       cellpadding="3" border="0">

                                                    <tbody>
                                                    <tr>
                                                        <td id="darkBgColor" width="50%" align="left">
                                                            <b>SUBJECT INFORMATION</b>
                                                        </td>
                                                        <td id="darkBgColor" colspan="2" align="left">
                                                            <b>IMAGE INFORMATION</b>
                                                        </td>
                                                    </tr>
                                                    <tr>


                                                        <td style="width:50%; align:center" valign="top">
                                                            <table style="width:100%" cellspacing="0" cellpadding="1"
                                                                   border="0">


                                                                <tbody>
                                                                <tr valign="bottom">
                                                                    <td valign="middle" nowrap="" align="right"><b>Subject
                                                                        ID:<b></b></b></td>
                                                                    <td>
                                                                        <table cellspacing="0" cellpadding="0"
                                                                               border="0">
                                                                            <tbody>
                                                                            <tr>
                                                                                <td>

                                                                                    <input type="text" name="subjectId"
                                                                                           maxlength="10" value="">
                                                                                </td>
                                                                                <td>Leave blank unless searching for a
                                                                                    specific subject.
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                    <td>
                                                                    </td>
                                                                </tr>


                                                                <tr>
                                                                    <td nowrap="" align="right"><b>Research
                                                                        Group:<b></b></b></td>
                                                                    <td>
                                                                        <select name="researchGroup">
                                                                            <option value="">All</option>

                                                                            <option value="35">AD</option>

                                                                            <option value="31">CN</option>

                                                                            <option value="33">EMCI</option>

                                                                            <option value="34">LMCI</option>

                                                                            <option value="32">MCI</option>

                                                                            <option value="2">Patient</option>

                                                                            <option value="3">Phantom</option>

                                                                            <option value="36">SMC</option>

                                                                            <option value="4">Volunteer</option>

                                                                        </select>
                                                                    </td>
                                                                </tr>


                                                                <tr>
                                                                    <td align="right"><b>Sex:<b></b></b></td>
                                                                    <td>

                                                                        <select name="sex">

                                                                            <option value="OTHER">Both</option>

                                                                            <option value="FEMALE">Female</option>

                                                                            <option value="MALE">Male</option>

                                                                        </select>
                                                                    </td>
                                                                </tr>


                                                                <tr>
                                                                    <td align="right"><b>Age:<b></b></b></td>
                                                                    <td>
                                                                        <table cellspacing="0" cellpadding="0"
                                                                               border="0">
                                                                            <tbody>
                                                                            <tr>
                                                                                <td>


                                                                                    <select name="age" id="age"
                                                                                            onchange="var prMenu = new ProcessRangeParams('age','ageValues','years','',''); var numTextBox = new NumericTextBox(); numTextBox.processRange('change',prMenu);">
                                                                                        <option value="EQUALS">Equals
                                                                                        </option>
                                                                                        <option value="BETWEEN">
                                                                                            Between
                                                                                        </option>
                                                                                    </select>&nbsp;
                                                                                </td>
                                                                                <td>
                                                                                    <div id="ageValues"><input
                                                                                            name="age_val1"
                                                                                            id="age_val1" size="5"
                                                                                            value="" type="text">
                                                                                        <unitmenu>&nbsp; years
                                                                                        </unitmenu>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>

                                                                </tbody>
                                                            </table>
                                                        </td>


                                                        <td style="align:center" valign="top">
                                                            <table style="width:100%" cellspacing="0" cellpadding="1"
                                                                   border="0">


                                                                <tbody>
                                                                <tr>
                                                                    <td style="width:7%"></td>
                                                                    <td style="width:28%" align="right"><b>Modality:</b>
                                                                    </td>
                                                                    <td style="width:65%" align="left">

                                                                        <select name="modality"
                                                                                onchange="processProtocolTerms(this);">

                                                                            <option value="1">MRI</option>

                                                                            <option value="2">fMRI</option>

                                                                            <option value="4">PET</option>

                                                                            <option value="10">DTI</option>

                                                                        </select>
                                                                    </td>
                                                                </tr>


                                                                <tr>
                                                                    <td style="width:7%"></td>
                                                                    <td style="width:28%" align="right"><b>Series
                                                                        Description:</b></td>
                                                                    <td style="width:65%" align="left">

                                                                        <input type="text" name="seriesDesc" value=""
                                                                               maxlength="64">
                                                                    </td>
                                                                </tr>


                                                                <tr>
                                                                    <td colspan="3" align="center">

                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                                <tbody id="ptSection">
                                                                <tr>
                                                                    <td style.width="7%" align=""></td>
                                                                    <td style.width="28%" align="right">
                                                                        <b>Weighting:</b></td>
                                                                    <td style.width="65%" align="left"><select
                                                                            name="stringTerm_4" id="stringTerm_4">
                                                                        <option value=""></option>
                                                                        <option value="PD">PD</option>
                                                                        <option value="T1">T1</option>
                                                                        <option value="T2">T2</option>
                                                                    </select></td>
                                                                </tr>
                                                                <tr>
                                                                    <td style.width="7%" align=""></td>
                                                                    <td style.width="28%" align="right"><b>Slice
                                                                        Thickness:</b></td>
                                                                    <td style.width="65%" colspan="5" align="left">
                                                                        <table cellspacing="0" cellpadding="1"
                                                                               border="0">
                                                                            <thead></thead>
                                                                            <tbody>
                                                                            <tr>
                                                                                <td style.width="5%" align="left">
                                                                                    <select name="numberTerm_6"
                                                                                            id="numberTerm_6">
                                                                                        <option value="EQUALS">Equals
                                                                                        </option>
                                                                                        <option value="BETWEEN">
                                                                                            Between
                                                                                        </option>
                                                                                    </select></td>
                                                                                <td style.width="95%" align="left">
                                                                                    <div id="numValues_6"><input
                                                                                            name="numberTerm_6_val1"
                                                                                            id="numberTerm_6_val1"
                                                                                            size="5" value=""
                                                                                            type="text">
                                                                                        <unitmenu>&nbsp; mm</unitmenu>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                            <tfoot></tfoot>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style.width="7%" align=""></td>
                                                                    <td style.width="28%" align="right"><b>Acquisition
                                                                        Plane:</b></td>
                                                                    <td style.width="65%" align="left"><select
                                                                            name="stringTerm_13" id="stringTerm_13">
                                                                        <option value=""></option>
                                                                        <option value="AXIAL">AXIAL</option>
                                                                        <option value="CORONAL">CORONAL</option>
                                                                        <option value="Plumb">Plumb</option>
                                                                        <option value="SAGITTAL">SAGITTAL</option>
                                                                    </select></td>
                                                                </tr>
                                                                </tbody>


                                                            </table>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td id="darkBgColor" colspan="2" align="left">
                                                            <b>SEARCH RESULTS</b>
                                                        </td>
                                                    </tr>
                                                    <tr>


                                                        <td align="center">
                                                            <table>
                                                                <tbody>
                                                                <tr>
                                                                    <td>


                                                                        Order By:
                                                                        <select name="orderBy_val1"
                                                                                onchange="processOrderBy(this,orderBy_val2,document.getElementById('orderResult'));">
                                                                            <option value="" selected=""></option>

                                                                            <option value="AGE">Age</option>

                                                                            <option value="RESEARCH_GROUP">Research
                                                                                Group
                                                                            </option>

                                                                            <option value="SEX">Sex</option>

                                                                            <option value="SPECIES">Species</option>

                                                                        </select>
                                                                        and then by:


                                                                        <select name="orderBy_val2" id="orderResult"
                                                                                onchange="processOrderBy(orderBy_val1,this,document.getElementById('orderResult'));"
                                                                                disabled="">
                                                                        </select>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td align="center">
                                                            <table>


                                                                <tbody>
                                                                <tr>
                                                                    <td align="right">Image Count:</td>
                                                                    <td>

                                                                        <select name="imageCount">

                                                                            <option value="FEWEST">500</option>

                                                                            <option value="FEWER">750</option>

                                                                            <option value="FEW">1000</option>

                                                                            <option value="SOME">2000</option>

                                                                            <option value="MORE">5000</option>

                                                                            <option value="ALL">ALL</option>

                                                                        </select>
                                                                    </td>
                                                                </tr>

                                                                </tbody>
                                                            </table>
                                                        </td>

                                                    </tr>
                                                    <tr>
                                                        <td id="darkBgColor" width="50%" align="center">


                                                            <input type="submit" value="RESET" id="reloading"
                                                                   class="button"
                                                                   onmouseover="this.className='buttonHover'"
                                                                   onmouseout="this.className='button'"
                                                                   onclick="resetUserInput(); return false;">
                                                        </td>
                                                        <td id="darkBgColor" width="50%" align="center">


                                                            <input type="submit" value="SEARCH" id="searchQuery"
                                                                   onmouseover="this.className='buttonHover'"
                                                                   onmouseout="this.className='button'" class="button">
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </td>
                                        </tr>

                                        </tbody>
                                    </table>
                                </form>
                            </div>


                            <!--
COPYRIGHT NOTICE
Copyright (c) 2018  Scott C. Neu and Arthur W. Toga

See README.license for license notices.
-->


                            <div id="tab4" style="display: none;" align="center">


                                <!--
COPYRIGHT NOTICE
Copyright (c) 2011  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    AdvCookieManager = function () {
                                        this.setDefaults = function () {
                                            if (_get('ADV_QUERY')) {
                                                return;
                                            }
                                            this.setProjectSection(true);
                                            this.setSubjectSection(true);
                                            this.setProjectSpecificSection(false);
                                            this.setAssessmentSection(false);
                                            this.setStudyVisitSection(true);
                                            this.setModalitySection(true);
                                            this.setProtocolSection(false);
                                            this.setQualitySection(false);
                                            this.setStatusSection(false);
                                            this.setProcessingSection(false);
                                            this.setImgTypeOriginalSection(true);
                                            this.setImgTypePreProcessSection(false);
                                            this.setImgTypePostProcessSection(false);
                                            _set('ADV_QUERY', true);
                                        };
                                        this.setProjectSection = function (isChecked) {
                                            _set('PROJECT_SECTION', isChecked);
                                        };
                                        this.setSubjectSection = function (isChecked) {
                                            _set('SUBJECT_SECTION', isChecked);
                                        };
                                        this.setProjectSpecificSection = function (isChecked) {
                                            _set('PROJECT_SPECIFIC_SECTION', isChecked);
                                        };
                                        this.setAssessmentSection = function (isChecked) {
                                            _set('ASSESSMENT_SECTION', isChecked);
                                        };
                                        this.setStudyVisitSection = function (isChecked) {
                                            _set('STUDY_VISIT_SECTION', isChecked);
                                        };
                                        this.setModalitySection = function (isChecked) {
                                            _set('MODALITY_SECTION', isChecked);
                                        };
                                        this.setProtocolSection = function (isChecked) {
                                            _set('PROTOCOL_SECTION', isChecked);
                                        };
                                        this.setQualitySection = function (isChecked) {
                                            _set('QUALITY_SECTION', isChecked);
                                        };
                                        this.setStatusSection = function (isChecked) {
                                            _set('STATUS_SECTION', isChecked);
                                        };
                                        this.setProcessingSection = function (isChecked) {
                                            _set('PROCESSING_SECTION', isChecked);
                                        };
                                        this.setImgTypeOriginalSection = function (isChecked) {
                                            _set('IMG_TYPE_ORIG_SECTION', isChecked);
                                        };
                                        this.setImgTypePreProcessSection = function (isChecked) {
                                            _set('IMG_TYPE_PRE_PROCESS_SECTION', isChecked);
                                        };
                                        this.setImgTypePostProcessSection = function (isChecked) {
                                            _set('IMG_TYPE_POST_PROCESS_SECTION', isChecked);
                                        };
                                        this.hasProjectSection = function () {
                                            return true;
                                        };
                                        this.hasSubjectSection = function () {
                                            return _get('SUBJECT_SECTION');
                                        };
                                        this.hasProjectSpecificSection = function () {
                                            return _get('PROJECT_SPECIFIC_SECTION');
                                        };
                                        this.hasAssessmentSection = function () {
                                            return _get('ASSESSMENT_SECTION');
                                        };
                                        this.hasStudyVisitSection = function () {
                                            return _get('STUDY_VISIT_SECTION');
                                        };
                                        this.hasModalitySection = function () {
                                            return _get('MODALITY_SECTION');
                                        };
                                        this.hasProtocolSection = function () {
                                            return _get('PROTOCOL_SECTION');
                                        };
                                        this.hasQualitySection = function () {
                                            return _get('QUALITY_SECTION');
                                        };
                                        this.hasStatusSection = function () {
                                            return _get('STATUS_SECTION');
                                        };
                                        this.hasProcessingSection = function () {
                                            return _get('PROCESSING_SECTION');
                                        };
                                        this.hasImgTypeOriginalSection = function () {
                                            return _get('IMG_TYPE_ORIG_SECTION');
                                        };
                                        this.hasImgTypePreProcessSection = function () {
                                            return _get('IMG_TYPE_PRE_PROCESS_SECTION');
                                        };
                                        this.hasImgTypePostProcessSection = function () {
                                            return _get('IMG_TYPE_POST_PROCESS_SECTION');
                                        };

                                        function _set(key, value) {
                                            document.cookie = key + "=" + escape(value) + ";expires=" + _getForever();
                                        };

                                        function _get(key) {
                                            var value = 'false';
                                            var content = document.cookie;
                                            var splitted = content.split(';');
                                            for (var i = 0; i < splitted.length; i++) {
                                                var map = splitted[i].split('=');
                                                if (_trim(map[0]) == key) {
                                                    value = unescape(_trim(map[1]));
                                                }
                                            }
                                            return (value == 'true');
                                        };

                                        function _getForever() {
                                            var now = new Date();
                                            var futureYear = now.getYear() + 1900 + 100;
                                            now.setYear(futureYear)
                                            return now.toUTCString();
                                        };

                                        function _trim(str) {
                                            if (str == null || str == undefined) return '';
                                            return str.replace(/^\s+|\s+$/g, '');
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2014  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    AdvOptionDecoder = function (xml) {
                                        this.getProjects = function () {
                                            var projects = new Array();
                                            var pElems = xml.getElementsByTagName("projects");
                                            if (pElems.length == 0) {
                                                return projects;
                                            }
                                            var elems = pElems[0].getElementsByTagName("project");
                                            for (var i = 0; i < elems.length; i++) {
                                                var code = elems[i].getAttribute("code");
                                                var isSelected = (elems[i].getAttribute("selected") == 'true');
                                                projects.push(new AdvProject(code, isSelected));
                                            }
                                            return projects;
                                        };
                                        this.getProjectPhases = function () {
                                            var phases = new Array();
                                            var phasesElems = xml.getElementsByTagName("projectPhases");
                                            if (phasesElems.length == 0) {
                                                return phases;
                                            }
                                            var elems = phasesElems[0].getElementsByTagName("project");
                                            for (var i = 0; i < elems.length; i++) {
                                                var project = elems[i].getAttribute("code");
                                                var phase = new AdvItemSet(project);
                                                phases.push(phase);
                                                var phaseElems = elems[i].getElementsByTagName("projectPhase");
                                                for (var j = 0; j < phaseElems.length; j++) {
                                                    var item = _decodeSelectableItem(phaseElems[j]);
                                                    phase.addItem(item);
                                                }
                                            }
                                            return phases;
                                        };
                                        this.getSubjectIds = function () {
                                            var subjElems = xml.getElementsByTagName("subjects");
                                            if (subjElems.length == 0) {
                                                return "";
                                            }
                                            var ids = subjElems[0].getAttribute("ids");
                                            if (ids == null) {
                                                ids = "";
                                            }
                                            return ids;
                                        };
                                        this.getSubjectAges = function () {
                                            var ages = new Array();
                                            var ageElems = xml.getElementsByTagName("age");
                                            if (ageElems.length == 0) {
                                                return ages;
                                            }
                                            var optElems = ageElems[0].getElementsByTagName("option");
                                            for (var i = 0; i < optElems.length; i++) {
                                                var option = _decodeOption(optElems[i]);
                                                ages.push(option.getValue());
                                            }
                                            return ages;
                                        };
                                        this.getSubjectSex = function () {
                                            var subjElems = xml.getElementsByTagName("subjects");
                                            if (subjElems.length == 0) {
                                                return "";
                                            }
                                            return subjElems[0].getAttribute("sex")
                                        };
                                        this.getSubjectWeights = function () {
                                            var weights = new Array();
                                            var wghtElems = xml.getElementsByTagName("weight");
                                            if (wghtElems.length == 0) {
                                                return weights;
                                            }
                                            var optElems = wghtElems[0].getElementsByTagName("option");
                                            for (var i = 0; i < optElems.length; i++) {
                                                var option = _decodeOption(optElems[i]);
                                                weights.push(option.getValue());
                                            }
                                            return weights;
                                        };
                                        this.getResearchGroups = function () {
                                            var groups = new Array();
                                            var rssElems = xml.getElementsByTagName("researchGroup");
                                            for (var i = 0; i < rssElems.length; i++) {
                                                var item = _decodeSelectableItem(rssElems[i]);
                                                var group = new AdvProjectSet(item.getId(), item.getName(),
                                                    item.isSelected());
                                                groups.push(group);
                                                var projElems = rssElems[i].getElementsByTagName("project");
                                                for (var j = 0; j < projElems.length; j++) {
                                                    var project = projElems[j].getAttribute("code");
                                                    group.addProject(project);
                                                }
                                            }
                                            return groups;
                                        };
                                        this.getSpecies = function () {
                                            var groups = new Array();
                                            var spsElems = xml.getElementsByTagName("speciesGroup");
                                            for (var i = 0; i < spsElems.length; i++) {
                                                var item = _decodeSelectableItem(spsElems[i]);
                                                var group = new AdvProjectSet(item.getId(), item.getName(),
                                                    item.isSelected());
                                                groups.push(group);
                                                var projElems = spsElems[i].getElementsByTagName("project");
                                                for (var j = 0; j < projElems.length; j++) {
                                                    var project = projElems[j].getAttribute("code");
                                                    group.addProject(project);
                                                }
                                            }
                                            return groups;
                                        };
                                        this.getProjectSpecifics = function () {
                                            var groups = new Array();
                                            var pssElems = xml.getElementsByTagName("projectSpecifics");
                                            if (pssElems.length == 0) {
                                                return groups;
                                            }
                                            var prjElems = pssElems[0].getElementsByTagName("project");
                                            for (var i = 0; i < prjElems.length; i++) {
                                                var project = prjElems[i].getAttribute("code");
                                                var group = new AdvItemSet(project);
                                                groups.push(group);
                                                var psElems = prjElems[i].getElementsByTagName("projectSpecific");
                                                for (var j = 0; j < psElems.length; j++) {
                                                    var item = _decodeOptionItem(psElems[j]);
                                                    var key = psElems[j].getAttribute("key");
                                                    var psTerm = new AdvProjectSpecificTerm(item.getId(), item.getName(),
                                                        key);
                                                    group.addItem(psTerm);
                                                    var optElems = psElems[j].getElementsByTagName("option");
                                                    for (var k = 0; k < optElems.length; k++) {
                                                        var option = _decodeSelectableOption(optElems[k]);
                                                        psTerm.addOption(option);
                                                    }
                                                }
                                            }
                                            return groups;
                                        };
                                        this.getAssessments = function () {
                                            var groups = new Array();
                                            var amtsElems = xml.getElementsByTagName("assessments");
                                            if (amtsElems.length == 0) {
                                                return groups;
                                            }
                                            var elems = amtsElems[0].getElementsByTagName("assessmentGroup");
                                            for (var i = 0; i < elems.length; i++) {
                                                var set = new AdvAssessmentGroup();
                                                groups.push(set);
                                                var assesElem = elems[i];
                                                var projElems = assesElem.getElementsByTagName("project");
                                                for (var j = 0; j < projElems.length; j++) {
                                                    var project = projElems[j].getAttribute("code");
                                                    set.addProject(project);
                                                }
                                                for (var j = 0; j < elems[i].childNodes.length; j++) {
                                                    var amtElem = elems[i].childNodes[j];
                                                    if (amtElem.tagName == "stringAssessment") {
                                                        var item = _decodeOptionItem(amtElem);
                                                        var key = amtElem.getAttribute("key");
                                                        var amt = new AdvStringAssessment(item.getId(), item.getName(), key);
                                                        set.addAssessment(amt);
                                                        var optElems = amtElem.getElementsByTagName("option");
                                                        for (var k = 0; k < optElems.length; k++) {
                                                            var option = _decodeOption(optElems[k]);
                                                            amt.addOption(option);
                                                        }
                                                    }
                                                    if (amtElem.tagName == "numericAssessment") {
                                                        var item = _decodeOptionItem(amtElem);
                                                        var key = amtElem.getAttribute("key");
                                                        var amt = new AdvNumberAssessment(item.getId(), item.getName(), key);
                                                        set.addAssessment(amt);
                                                        var optElems = amtElem.getElementsByTagName("option");
                                                        for (var k = 0; k < optElems.length; k++) {
                                                            var option = _decodeOption(optElems[k]);
                                                            amt.addOption(option);
                                                        }
                                                    }
                                                }
                                            }
                                            return groups;
                                        };
                                        this.getStudyDates = function () {
                                            var dates = new Array();
                                            var studyElems = xml.getElementsByTagName("study");
                                            if (studyElems.length == 0) {
                                                return dates;
                                            }
                                            var dateElems = studyElems[0].getElementsByTagName("studyDate");
                                            if (dateElems.length == 0) {
                                                return dates;
                                            }
                                            var optElems = dateElems[0].getElementsByTagName("option");
                                            for (var i = 0; i < optElems.length; i++) {
                                                var option = _decodeOption(optElems[i]);
                                                dates.push(option.getValue());
                                            }
                                            return dates;
                                        };
                                        this.getArchiveDates = function () {
                                            var dates = new Array();
                                            var studyElems = xml.getElementsByTagName("study");
                                            if (studyElems.length == 0) {
                                                return dates;
                                            }
                                            var dateElems = studyElems[0].getElementsByTagName("archiveDate");
                                            if (dateElems.length == 0) {
                                                return dates;
                                            }
                                            var optElems = dateElems[0].getElementsByTagName("option");
                                            for (var i = 0; i < optElems.length; i++) {
                                                var option = _decodeOption(optElems[i]);
                                                dates.push(option.getValue());
                                            }
                                            return dates;
                                        };
                                        this.getVisits = function () {
                                            var visits = new Array();
                                            var visitsElems = xml.getElementsByTagName("visits");
                                            if (visitsElems.length == 0) {
                                                return visits;
                                            }
                                            var elems = visitsElems[0].getElementsByTagName("project");
                                            for (var i = 0; i < elems.length; i++) {
                                                var project = elems[i].getAttribute("code");
                                                var isOr = (elems[i].getAttribute("or") == 'true');
                                                var visit = new AdvVisitSet(project, isOr);
                                                visits.push(visit);
                                                var visitElems = elems[i].getElementsByTagName("visit");
                                                for (var j = 0; j < visitElems.length; j++) {
                                                    var item = _decodeSelectableItem(visitElems[j]);
                                                    visit.addItem(item);
                                                }
                                            }
                                            return visits;
                                        };
                                        this.getImageDescription = function () {
                                            var modsElem = xml.getElementsByTagName("modalities");
                                            if (modsElem.length == 0) {
                                                return "";
                                            }
                                            var ids = modsElem[0].getAttribute("imageDescription");
                                            if (ids == null) {
                                                ids = "";
                                            }
                                            return ids;
                                        };
                                        this.getImageDataIds = function () {
                                            var modsElem = xml.getElementsByTagName("modalities");
                                            if (modsElem.length == 0) {
                                                return "";
                                            }
                                            var ids = modsElem[0].getAttribute("imageDataIds");
                                            if (ids == null) {
                                                ids = "";
                                            }
                                            return ids;
                                        };
                                        this.isModalityOr = function () {
                                            var modsElem = xml.getElementsByTagName("modalities");
                                            if (modsElem.length == 0) {
                                                return true;
                                            }
                                            return (modsElem[0].getAttribute("or") == 'true');
                                        };
                                        this.getModalities = function () {
                                            var modalities = new Array();
                                            var modsElem = xml.getElementsByTagName("modalities");
                                            if (modsElem.length == 0) {
                                                return modalities;
                                            }
                                            var elems = modsElem[0].getElementsByTagName("modality");
                                            for (var i = 0; i < elems.length; i++) {
                                                var modalityElem = elems[i];
                                                var item = _decodeSelectableItem(modalityElem);
                                                var modality = new AdvProjectSet(item.getId(), item.getName(),
                                                    item.isSelected());
                                                modalities.push(modality);
                                                var projElems = modalityElem.getElementsByTagName("project");
                                                for (var j = 0; j < projElems.length; j++) {
                                                    var project = projElems[j].getAttribute("code");
                                                    modality.addProject(project);
                                                }
                                            }
                                            return modalities;
                                        };
                                        this.getImagingProtocols = function () {
                                            var protocols = new Array();
                                            var protosElem = xml.getElementsByTagName("protocols");
                                            if (protosElem.length == 0) {
                                                return protocols;
                                            }
                                            var elems = protosElem[0].getElementsByTagName("modality");
                                            for (var i = 0; i < elems.length; i++) {
                                                var modalityElem = elems[i];
                                                var modalityId = modalityElem.getAttribute("id");
                                                var modalityName = modalityElem.getAttribute("name");
                                                var seriesDesc = modalityElem.getAttribute("value");
                                                var protocol = new AdvProtocol(modalityId, modalityName, seriesDesc);
                                                protocols.push(protocol);
                                                for (var j = 0; j < modalityElem.childNodes.length; j++) {
                                                    var termElem = modalityElem.childNodes[j];
                                                    if (termElem.tagName == "stringProtocol") {
                                                        var item = _decodeOptionItem(termElem);
                                                        var key = termElem.getAttribute("key");
                                                        var term = new AdvStringTerm(item.getId(), item.getName(), key);
                                                        protocol.addTerm(term);
                                                        var optElems = termElem.getElementsByTagName("option");
                                                        for (var k = 0; k < optElems.length; k++) {
                                                            var option = _decodeSelectableOption(optElems[k]);
                                                            term.addOption(option);
                                                        }
                                                    }
                                                    if (termElem.tagName == "numericProtocol") {
                                                        var item = _decodeOptionItem(termElem);
                                                        var key = termElem.getAttribute("key");
                                                        var units = modalityElem.childNodes[j].getAttribute("units");
                                                        var term = new AdvNumberTerm(item.getId(), item.getName(), key, units);
                                                        protocol.addTerm(term);
                                                        var optElems = termElem.getElementsByTagName("option");
                                                        for (var k = 0; k < optElems.length; k++) {
                                                            var option = _decodeOption(optElems[k]);
                                                            term.addOption(option);
                                                        }
                                                    }
                                                }
                                            }
                                            return protocols;
                                        };
                                        this.getImageQualityGroups = function () {
                                            var groups = new Array();
                                            var qualsElems = xml.getElementsByTagName("qualities");
                                            if (qualsElems.length == 0) {
                                                return groups;
                                            }
                                            var elems = qualsElems[0].getElementsByTagName("project");
                                            for (var i = 0; i < elems.length; i++) {
                                                var project = elems[i].getAttribute("code");
                                                var group = new AdvItemSet(project);
                                                groups.push(group);
                                                var qualElems = _getSelectableItems(elems[i], "quality");
                                                for (var j = 0; j < qualElems.length; j++) {
                                                    group.addItem(qualElems[j]);
                                                }
                                            }
                                            return groups;
                                        };
                                        this.getImageStatuses = function () {
                                            return _getSelectableItems(xml, "status");
                                        };
                                        this.getImageProcessingDescription = function () {
                                            var elems = xml.getElementsByTagName("processing");
                                            if (elems.length > 0) {
                                                return elems[0].getAttribute("value");
                                            }
                                            return "";
                                        };
                                        this.getFileTypes = function () {
                                            return _getSelectableItems(xml, "fileType");
                                        };
                                        this.getStructures = function () {
                                            return _getSelectableItems(xml, "structure");
                                        };
                                        this.getTissueTypes = function () {
                                            return _getSelectableItems(xml, "tissue");
                                        };
                                        this.getLateralities = function () {
                                            return _getSelectableItems(xml, "laterality");
                                        };
                                        this.getRegistrations = function () {
                                            return _getSelectableItems(xml, "registration");
                                        };
                                        this.getOrderBys = function () {
                                            var orderBys = new Array();
                                            var obElems = xml.getElementsByTagName("orderBy");
                                            for (var i = 0; i < obElems.length; i++) {
                                                var set = new AdvOptionSet();
                                                orderBys.push(set);
                                                var optElems = obElems[i].getElementsByTagName("option");
                                                for (var k = 0; k < optElems.length; k++) {
                                                    var option = _decodeSelectableOption(optElems[k]);
                                                    set.addOption(option);
                                                }
                                            }
                                            return orderBys;
                                        };

                                        function _getSelectableItems(root, name) {
                                            var items = new Array();
                                            var elems = root.getElementsByTagName(name);
                                            for (var i = 0; i < elems.length; i++) {
                                                var item = _decodeSelectableItem(elems[i]);
                                                items.push(item);
                                            }
                                            return items;
                                        };

                                        function _decodeSelectableItem(elem) {
                                            var item = _decodeItem(elem);
                                            var isSelected = (elem.getAttribute("selected") == 'true');
                                            return new AdvSelectableItem(item.getId(), item.getName(), isSelected);
                                        };

                                        function _decodeOptionItem(elem) {
                                            var item = _decodeItem(elem);
                                            return new AdvOptionItem(item.getId(), item.getName());
                                        };

                                        function _decodeItem(elem) {
                                            var id = elem.getAttribute("id");
                                            var name = elem.getAttribute("name");
                                            return new AdvItem(id, name);
                                        };

                                        function _decodeSelectableOption(elem) {
                                            var option = _decodeOption(elem);
                                            var isSelected = (elem.getAttribute("selected") == 'true');
                                            return new AdvSelectableOption(option.getValue(), isSelected);
                                        };

                                        function _decodeOption(elem) {
                                            var value = elem.getAttribute("value");
                                            return new AdvOption(value);
                                        };
                                    };
                                    AdvProject = function (code, isSelected) {
                                        this.getCode = function () {
                                            return code;
                                        };
                                        this.isSelected = function () {
                                            return isSelected;
                                        };
                                    };
                                    AdvProtocol = function (modalityId, modalityName, seriesDesc) {
                                        var _terms = new Array();
                                        this.getModalityId = function () {
                                            return modalityId;
                                        };
                                        this.getModalityName = function () {
                                            return modalityName;
                                        };
                                        this.getSeriesDesc = function () {
                                            return seriesDesc;
                                        };
                                        this.addTerm = function (term) {
                                            _terms.push(term);
                                        };
                                        this.getTerms = function () {
                                            return _terms;
                                        };
                                    };
                                    AdvItemSet = function (project) {
                                        var _items = new Array();
                                        this.getProject = function () {
                                            return project;
                                        };
                                        this.addItem = function (item) {
                                            _items.push(item);
                                        };
                                        this.getItems = function () {
                                            return _items;
                                        };
                                    };
                                    AdvVisitSet = function (project, isOr) {
                                        AdvItemSet.call(this, project);
                                        this.isOr = function () {
                                            return isOr;
                                        };
                                    };
                                    AdvVisitSet.prototype = new AdvItemSet;
                                    AdvVisitSet.prototype.constructor = AdvVisitSet;
                                    AdvItem = function (id, name) {
                                        this.getId = function () {
                                            return id;
                                        };
                                        this.getName = function () {
                                            return name;
                                        };
                                    };
                                    AdvOptionItem = function (id, name) {
                                        AdvItem.call(this, id, name);
                                        var _options = new Array();
                                        this.addOption = function (option) {
                                            _options.push(option);
                                        };
                                        this.getOptions = function () {
                                            return _options;
                                        };
                                    };
                                    AdvOptionItem.prototype = new AdvItem;
                                    AdvOptionItem.prototype.constructor = AdvOptionItem;
                                    AdvProjectSpecificTerm = function (id, name, key) {
                                        AdvOptionItem.call(this, id, name);
                                        this.getKey = function () {
                                            return key;
                                        };
                                    };
                                    AdvProjectSpecificTerm.prototype = new AdvOptionItem;
                                    AdvProjectSpecificTerm.prototype.constructor = AdvProjectSpecificTerm;
                                    AdvStringTerm = function (id, name, key) {
                                        AdvOptionItem.call(this, id, name);
                                        this.getKey = function () {
                                            return key;
                                        };
                                    };
                                    AdvStringTerm.prototype = new AdvOptionItem;
                                    AdvStringTerm.prototype.constructor = AdvStringTerm;
                                    AdvNumberTerm = function (id, name, key, units) {
                                        AdvOptionItem.call(this, id, name);
                                        this.getKey = function () {
                                            return key;
                                        };
                                        this.getUnits = function () {
                                            return units;
                                        };
                                    };
                                    AdvNumberTerm.prototype = new AdvOptionItem;
                                    AdvNumberTerm.prototype.constructor = AdvNumberTerm;
                                    AdvAssessmentGroup = function () {
                                        var _assessments = new Array();
                                        var _projects = new Array();
                                        this.addProject = function (project) {
                                            _projects.push(project);
                                        };
                                        this.getProjects = function () {
                                            return _projects;
                                        };
                                        this.addAssessment = function (assessment) {
                                            _assessments.push(assessment);
                                        };
                                        this.getAssessments = function () {
                                            return _assessments;
                                        };
                                    };
                                    AdvStringAssessment = function (id, name, key) {
                                        AdvOptionItem.call(this, id, name);
                                        this.getKey = function () {
                                            return key;
                                        };
                                    };
                                    AdvStringAssessment.prototype = new AdvOptionItem;
                                    AdvStringAssessment.prototype.constructor = AdvStringAssessment;
                                    AdvNumberAssessment = function (id, name, key) {
                                        AdvOptionItem.call(this, id, name);
                                        this.getKey = function () {
                                            return key;
                                        };
                                    };
                                    AdvNumberAssessment.prototype = new AdvOptionItem;
                                    AdvNumberAssessment.prototype.constructor = AdvNumberAssessment;
                                    AdvSelectableItem = function (id, name, isSelected) {
                                        AdvItem.call(this, id, name);
                                        this.isSelected = function () {
                                            return isSelected;
                                        };
                                    };
                                    AdvSelectableItem.prototype = new AdvItem;
                                    AdvSelectableItem.prototype.constructor = AdvSelectableItem;
                                    AdvProjectSet = function (id, name, isSelected) {
                                        AdvSelectableItem.call(this, id, name, isSelected);
                                        var _projects = new Array();
                                        this.addProject = function (project) {
                                            _projects.push(project);
                                        };
                                        this.getProjects = function () {
                                            return _projects;
                                        };
                                    };
                                    AdvProjectSet.prototype = new AdvSelectableItem;
                                    AdvProjectSet.prototype.constructor = AdvProjectSet;
                                    AdvOptionSet = function () {
                                        var _options = new Array();
                                        this.addOption = function (option) {
                                            _options.push(option);
                                        };
                                        this.getOptions = function () {
                                            return _options;
                                        };
                                    };
                                    AdvOption = function (value) {
                                        this.getValue = function () {
                                            return value;
                                        };
                                    };
                                    AdvSelectableOption = function (value, isSelected) {
                                        AdvOption.call(this, value);
                                        this.isSelected = function () {
                                            return isSelected;
                                        };
                                    };
                                    AdvSelectableOption.prototype = new AdvOption;
                                    AdvSelectableOption.prototype.constructor = AdvSelectableOption;
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2015  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    AdvProjectBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('projectElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'projectPhase_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_PROJECT_PHASE') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (projects, projectPhases) {
                                            var content = document.getElementById('projectHolder');
                                            document.getElementById('projectElems').style.display = 'block';
                                            var projectNames = new Array();
                                            for (var i = 0; i < projects.length; i++) {
                                                projectNames.push(projects[i].getCode());
                                            }
                                            var columnSizer = new AdvColumnSizer(projectNames);
                                            var numOfCols = columnSizer.getNumberOfColumns(content.offsetWidth, true);
                                            var remainder = projects.length % numOfCols;
                                            var numOfRows = (projects.length - remainder) / numOfCols;
                                            if (remainder > 0) {
                                                numOfRows++;
                                            }
                                            var innerHTMLString = '<table width="100%" cellpadding="0" ' +
                                                'cellspacing="0" border="0">';
                                            var index = 0;
                                            for (var i = 0; i < numOfRows; i++) {
                                                innerHTMLString += '<tr>';
                                                for (var j = 0; j < numOfCols; j++) {
                                                    innerHTMLString += '<td nowrap>';
                                                    if (index < projects.length) {
                                                        innerHTMLString += '<input type="checkbox" ' +
                                                            'style="vertical-align:middle" ' +
                                                            'name="project_checkBox" ' +
                                                            'value="' + projects[index].getCode() + '" ' +
                                                            'onclick="var hlr=new AdvSearchOptionHandler();' +
                                                            'hlr.projectsHaveChanged();"';
                                                        if (projects[index].isSelected()) {
                                                            innerHTMLString += ' checked';
                                                        }
                                                        innerHTMLString += '/><label style="vertical-align:middle">' +
                                                            projects[index].getCode() + '</label></td>';
                                                        index++;
                                                    } else {
                                                        innerHTMLString += '&nbsp;';
                                                    }
                                                }
                                                innerHTMLString += '</tr>';
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                            content = document.getElementById('phaseHolder');
                                            if (projectPhases.length == 0) {
                                                content.innerHTML = '';
                                                return;
                                            }
                                            var pixelWidthCol1 = document.getElementById('projectCol1').offsetWidth;
                                            var pixelWidthCol2 = document.getElementById('projectCol2').offsetWidth;
                                            var pixelWidthCol3 = document.getElementById('projectHolder').offsetWidth;
                                            var pixelWidthCol4 = document.getElementById('projectCol4').offsetWidth;
                                            var pixelWidthCol5 = document.getElementById('projectCol5').offsetWidth;
                                            var numOfCols = 0;
                                            for (var i = 0; i < projectPhases.length; i++) {
                                                var items = projectPhases[i].getItems();
                                                var labels = new Array();
                                                for (var j = 0; j < items.length; j++) {
                                                    labels.push(items[j].getName());
                                                }
                                                var columnSizer = new AdvColumnSizer(labels);
                                                var num = columnSizer.getNumberOfColumns(pixelWidthCol3, true);
                                                if (num > numOfCols) {
                                                    numOfCols = num;
                                                }
                                            }
                                            var innerHTMLString = '<table width="96%" cellpadding="0" ' +
                                                'cellspacing="0" border="0"' +
                                                ' class="ida-search-contentBgColor">';
                                            innerHTMLString += '<tr valign="top">' +
                                                '<td width="' + pixelWidthCol1 + '"/>' +
                                                '<td width="' + pixelWidthCol2 + '"/>' +
                                                '<td width="' + pixelWidthCol3 + '" colspan="' +
                                                numOfCols + '"/>' +
                                                '<td width="' + pixelWidthCol4 + '"/>' +
                                                '<td width="' + pixelWidthCol5 + '"/>' +
                                                '</tr>';
                                            for (var i = 0; i < projectPhases.length; i++) {
                                                innerHTMLString += _getHtmlElements(projectPhases[i], numOfCols,
                                                    projects.length, i == 0);
                                                if (i < projectPhases.length - 1) {
                                                    var newColspan = numOfCols + 4;
                                                    innerHTMLString += '<tr><td colspan="' + newColspan +
                                                        '" height="2px"/></tr>';
                                                }
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                        };

                                        function _getHtmlElements(phases, numOfCols, numOfProjects, isFirstProject) {
                                            var title = '(' + phases.getProject() + ')';
                                            if (numOfProjects <= 1) {
                                                title = 'Phase';
                                            }
                                            var checkBoxName = "projectPhase_checkBox";
                                            var key = "PHASE";
                                            var isKeySelected = false;
                                            var resetId = 'RESET_PROJECT_PHASE.0';
                                            var items = phases.getItems();
                                            var remainder = items.length % numOfCols;
                                            var numOfRows = (items.length - remainder) / numOfCols;
                                            if (remainder > 0) {
                                                numOfRows++;
                                            }
                                            var innerHtmlStr = '<tr>' +
                                                '<td>&nbsp;</td>' +
                                                '<td class="bodyTextBold">' + title + '</td>';
                                            var index = 0;
                                            for (var i = 0; i < numOfRows; i++) {
                                                if (i > 0) {
                                                    innerHtmlStr += '<tr><td/><td/>';
                                                }
                                                for (var j = 0; j < numOfCols; j++) {
                                                    if (index < items.length) {
                                                        var value = phases.getProject() + '_' + items[index].getId();
                                                        var checkBoxId = checkBoxName + items[index].getId();
                                                        innerHtmlStr += '<td class="ida-advQuery-lightStripe" nowrap>' +
                                                            '<input type="checkbox" ' +
                                                            'style="vertical-align:middle" ' +
                                                            'name="' + checkBoxName + '" ' +
                                                            'id="' + checkBoxId + '" ' +
                                                            'value="' + value + '"';
                                                        var isChecked = false;
                                                        var checkBoxElem = document.getElementById(checkBoxId);
                                                        if (isInit) {
                                                            isChecked = items[index].isSelected();
                                                        } else if (checkBoxElem != null) {
                                                            isChecked = checkBoxElem.checked;
                                                        }
                                                        if (isChecked) {
                                                            innerHtmlStr += ' checked';
                                                        }
                                                        innerHtmlStr += '/><label style="vertical-align:middle">' +
                                                            items[index].getName() + '</label></td>';
                                                        index++;
                                                    } else {
                                                        innerHtmlStr += '<td class="ida-advQuery-lightStripe" />';
                                                    }
                                                }
                                                if (i == 0 && isFirstProject) {
                                                    innerHtmlStr += '<td align="right">' +
                                                        '<input type="checkbox" ' +
                                                        'name="displayInResult" ' +
                                                        'id="' + resetId + '" ' +
                                                        'value="' + key + '" ';
                                                    var isChecked = false;
                                                    var checkBoxElem = document.getElementById(resetId);
                                                    if (isInit) {
                                                        isChecked = isKeySelected;
                                                    } else if (checkBoxElem != null) {
                                                        isChecked = checkBoxElem.checked;
                                                    }
                                                    if (isChecked) {
                                                        innerHtmlStr += ' checked';
                                                    }
                                                    innerHtmlStr += '></td>';
                                                } else {
                                                    innerHtmlStr += '<td/>';
                                                }
                                                innerHtmlStr += '<td>&nbsp;</td></tr>';
                                            }
                                            return innerHtmlStr;
                                        };
                                    };
                                    AdvSubjectBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('subjectElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            document.getElementById('subjectIdText').value = "";
                                            var numericBuilder = new AdvNumericBuilder();
                                            numericBuilder.build('advAge', 'advAgeMenuVal', true, 'advAgeVal',
                                                'advAge_textBox', '', '');
                                            document.getElementById('advSex').selectedIndex = 0;
                                            numericBuilder.build('advWeight', 'advWeightMenuVal', true, 'advWeightVal',
                                                'weight_textBox', '', '');
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'researchGroup_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'species_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_RESEARCH_GROUP' ||
                                                        components[0] == 'RESET_SPECIES' || components[0] == 'RESET_WEIGHT') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (subjectIds, subjectAges, subjectSex, subjectWeights,
                                                               researchGroups, speciesGroups) {
                                            var content = document.getElementById('subjectHolder');
                                            if (isInit) {
                                                document.getElementById('subjectIdText').value = subjectIds;
                                                var age1 = "";
                                                if (subjectAges.length > 0) {
                                                    age1 = subjectAges[0];
                                                }
                                                var age2 = "";
                                                if (subjectAges.length > 1) {
                                                    age2 = subjectAges[1];
                                                }
                                                var isEquals = (subjectAges.length < 2);
                                                var numericBuilder = new AdvNumericBuilder();
                                                numericBuilder.build('advAge', 'advAgeMenuVal', isEquals, 'advAgeVal',
                                                    'advAge_textBox', age1, age2);
                                                var menu = document.getElementById('advSex');
                                                for (var i = 0; i < menu.options.length; i++) {
                                                    if (menu.options[i].value == subjectSex) {
                                                        menu.selectedIndex = i;
                                                    }
                                                }
                                                var weight1 = "";
                                                if (subjectWeights.length > 0) {
                                                    weight1 = subjectWeights[0];
                                                }
                                                var weight2 = "";
                                                if (subjectWeights.length > 1) {
                                                    weight2 = subjectWeights[1];
                                                }
                                                var isEquals = (subjectWeights.length < 2);
                                                numericBuilder.build('advWeight', 'advWeightMenuVal', isEquals,
                                                    'advWeightVal', 'weight_textBox',
                                                    weight1, weight2);
                                            }
                                            if (researchGroups.length == 0 && speciesGroups.length == 0) {
                                                content.innerHTML = '';
                                                return;
                                            }
                                            document.getElementById('subjectElems').style.display = 'block';
                                            var researchLabels = _getLabels(researchGroups);
                                            var speciesLabels = _getLabels(speciesGroups);
                                            var pixelWidthCol1 = document.getElementById('subjectCol1').offsetWidth;
                                            var pixelWidthCol2 = document.getElementById('subjectCol2').offsetWidth;
                                            var pixelWidthCol3 = document.getElementById('subjectCol3').offsetWidth;
                                            var pixelWidthCol4 = document.getElementById('subjectCol4').offsetWidth;
                                            var pixelWidthCol5 = document.getElementById('subjectCol5').offsetWidth;
                                            var columnSizer = new AdvColumnSizer(researchLabels);
                                            var numOfRgCols = columnSizer.getNumberOfColumns(pixelWidthCol3, true);
                                            columnSizer = new AdvColumnSizer(speciesLabels);
                                            var numOfSgCols = columnSizer.getNumberOfColumns(pixelWidthCol3, true);
                                            var numOfCols = 0;
                                            if (researchGroups.length > 0) {
                                                numOfCols = numOfRgCols;
                                            }
                                            if (speciesGroups.length > 0) {
                                                if (numOfCols == 0 || numOfCols > numOfSgCols) {
                                                    numOfCols = numOfSgCols;
                                                }
                                            }
                                            var innerHTMLString = '<table width="96%" cellpadding="0" ' +
                                                'cellspacing="0" border="0"' +
                                                ' class="ida-search-contentBgColor">';
                                            innerHTMLString += '<tr valign="top">' +
                                                '<td width="' + pixelWidthCol1 + '"/>' +
                                                '<td width="' + pixelWidthCol2 + '"/>' +
                                                '<td width="' + pixelWidthCol3 + '" colspan="' +
                                                numOfCols + '"/>' +
                                                '<td width="' + pixelWidthCol4 + '"/>' +
                                                '<td width="' + pixelWidthCol5 + '"/>' +
                                                '</tr>';
                                            if (researchGroups.length > 0) {
                                                innerHTMLString += _getHtmlElements(researchGroups, numOfCols,
                                                    researchLabels, true);
                                                if (speciesGroups.length > 0) {
                                                    var newColspan = numOfCols + 4;
                                                    innerHTMLString += '<tr><td colspan="' + newColspan +
                                                        '" height="2px"/></tr>';
                                                }
                                            }
                                            if (speciesGroups.length > 0) {
                                                innerHTMLString += _getHtmlElements(speciesGroups, numOfCols,
                                                    speciesLabels, false);
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                        };

                                        function _getHtmlElements(groups, numOfCols, labels, isResearchGroup) {
                                            if (isResearchGroup) {
                                                var title = "Research Group";
                                                var checkBoxName = "researchGroup_checkBox";
                                                var key = "SUBJECT.RESEARCH_GROUP";
                                                var isKeySelected = false;
                                                var resetId = 'RESET_RESEARCH_GROUP.0';
                                            } else {
                                                var title = "Species";
                                                var checkBoxName = "species_checkBox";
                                                var key = "SUBJECT.SPECIES";
                                                var isKeySelected = false;
                                                var resetId = 'RESET_SPECIES.0';
                                            }
                                            var remainder = groups.length % numOfCols;
                                            var numOfRows = (groups.length - remainder) / numOfCols;
                                            if (remainder > 0) {
                                                numOfRows++;
                                            }
                                            var innerHtmlStr = '<tr>' +
                                                '<td>&nbsp;</td>' +
                                                '<td class="bodyTextBold">' + title + '</td>';
                                            var index = 0;
                                            for (var i = 0; i < numOfRows; i++) {
                                                if (i > 0) {
                                                    innerHtmlStr += '<tr><td/><td/>';
                                                }
                                                for (var j = 0; j < numOfCols; j++) {
                                                    if (index < groups.length) {
                                                        var checkBoxId = checkBoxName + groups[index].getId();
                                                        innerHtmlStr += '<td class="ida-advQuery-lightStripe" nowrap>' +
                                                            '<input type="checkbox" ' +
                                                            'style="vertical-align:middle" ' +
                                                            'name="' + checkBoxName + '" ' +
                                                            'id="' + checkBoxId + '" ' +
                                                            'value="' + groups[index].getId() + '"';
                                                        var isChecked = false;
                                                        var checkBoxElem = document.getElementById(checkBoxId);
                                                        if (isInit) {
                                                            isChecked = groups[index].isSelected();
                                                        } else if (checkBoxElem != null) {
                                                            isChecked = checkBoxElem.checked;
                                                        }
                                                        if (isChecked) {
                                                            innerHtmlStr += ' checked';
                                                        }
                                                        innerHtmlStr += '/><label style="vertical-align:middle">' +
                                                            labels[index] + '</label></td>';
                                                        index++;
                                                    } else {
                                                        innerHtmlStr += '<td class="ida-advQuery-lightStripe" />';
                                                    }
                                                }
                                                if (i == 0) {
                                                    innerHtmlStr += '<td align="right">' +
                                                        '<input type="checkbox" ' +
                                                        'name="displayInResult" ' +
                                                        'id="' + resetId + '" ' +
                                                        'value="' + key + '" ';
                                                    var isChecked = false;
                                                    var checkBoxElem = document.getElementById(resetId);
                                                    if (isInit) {
                                                        isChecked = isKeySelected;
                                                    } else if (checkBoxElem != null) {
                                                        isChecked = checkBoxElem.checked;
                                                    }
                                                    if (isChecked) {
                                                        innerHtmlStr += ' checked';
                                                    }
                                                    innerHtmlStr += '></td>';
                                                } else {
                                                    innerHtmlStr += '<td/>';
                                                }
                                                innerHtmlStr += '<td>&nbsp;</td></tr>';
                                            }
                                            return innerHtmlStr;
                                        };

                                        function _getLabels(projectSets) {
                                            var labels = new Array();
                                            for (var i = 0; i < projectSets.length; i++) {
                                                var label = projectSets[i].getName();
                                                var delim = ' (';
                                                var projects = projectSets[i].getProjects();
                                                for (var j = 0; j < projects.length; j++) {
                                                    label += delim + projects[j];
                                                    delim = ',';
                                                }
                                                if (projects.length > 0) {
                                                    label += ')';
                                                }
                                                labels.push(label);
                                            }
                                            return labels;
                                        };
                                    };
                                    AdvProjectSpecificBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('projectSpecificElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'projectSpecific_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_PROJECT_SPECIFIC') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (specifics) {
                                            var content = document.getElementById('projectSpecificHolder');
                                            if (specifics.length == 0) {
                                                content.innerHTML = '';
                                                return;
                                            }
                                            document.getElementById('projectSpecificElems').style.display = 'block';
                                            var pixelWidthCol1 = document.getElementById('psCol1').offsetWidth;
                                            var pixelWidthCol2 = document.getElementById('psCol2').offsetWidth;
                                            var pixelWidthCol3 = document.getElementById('psCol3').offsetWidth;
                                            var pixelWidthCol4 = document.getElementById('psCol4').offsetWidth;
                                            var pixelWidthCol5 = document.getElementById('psCol5').offsetWidth;
                                            var pixelWidthCol6 = document.getElementById('psCol6').offsetWidth;
                                            var values = new Array();
                                            for (var i = 0; i < specifics.length; i++) {
                                                var items = specifics[i].getItems();
                                                for (var j = 0; j < items.length; j++) {
                                                    var options = items[j].getOptions();
                                                    for (var k = 0; k < options.length; k++) {
                                                        values.push(options[k].getValue());
                                                    }
                                                }
                                            }
                                            var columnSizer = new AdvColumnSizer(values);
                                            var numOfCols = columnSizer.getNumberOfColumns(pixelWidthCol4, true);
                                            var innerHTMLString = '<table width="96%" cellpadding="0" ' +
                                                'cellspacing="0" border="0" ' +
                                                'class="ida-search-contentBgColor">';
                                            innerHTMLString += '<tr valign="top">' +
                                                '<td width="' + pixelWidthCol1 + '"/>' +
                                                '<td width="' + pixelWidthCol2 + '"/>' +
                                                '<td width="' + pixelWidthCol3 + '"/>' +
                                                '<td width="' + pixelWidthCol4 + '" colspan="' +
                                                numOfCols + '"/>' +
                                                '<td width="' + pixelWidthCol5 + '"/>' +
                                                '<td width="' + pixelWidthCol6 + '"/>' +
                                                '</tr>';
                                            for (var i = 0; i < specifics.length; i++) {
                                                var items = specifics[i].getItems();
                                                var project = specifics[i].getProject();
                                                for (var j = 0; j < items.length; j++) {
                                                    var itemName = items[j].getName();
                                                    var options = items[j].getOptions();
                                                    if (!(i == 0 && j == 0)) {
                                                        var newColspan = numOfCols + 4;
                                                        innerHTMLString += '<tr><td colspan="' + newColspan +
                                                            '" height="2px"/>' + '</tr>';
                                                    }
                                                    innerHTMLString += '<tr valign="top"><td/>';
                                                    if (j == 0 && true) {
                                                        innerHTMLString += '<td class="bodyTextBold" ' +
                                                            'style="vertical-align:middle">(' +
                                                            project + ')</td>';
                                                    } else {
                                                        innerHTMLString += '<td/>';
                                                    }
                                                    innerHTMLString += '<td class="bodyTextBold" ' +
                                                        'style="vertical-align:middle">' + itemName +
                                                        '</td>';
                                                    var remainder = options.length % numOfCols;
                                                    var numOfRows = (options.length - remainder) / numOfCols;
                                                    if (remainder > 0) {
                                                        numOfRows++;
                                                    }
                                                    var s = 0;
                                                    for (var row = 0; row < numOfRows; row++) {
                                                        if (row > 0) {
                                                            innerHTMLString += '<tr><td/><td/><td/>';
                                                        }
                                                        var checkBoxName = "projectSpecific_checkBox";
                                                        for (var col = 0; col < numOfCols; col++) {
                                                            if (s < options.length) {
                                                                var value = project + '_' + itemName + '_' +
                                                                    options[s].getValue();
                                                                var checkBoxId = checkBoxName + value;
                                                                innerHTMLString += '<td class="ida-advQuery-lightStripe" nowrap>' +
                                                                    '<input type="checkbox" ' +
                                                                    'style="vertical-align:middle" ' +
                                                                    'id="' + checkBoxId + '" ' +
                                                                    'name="' + checkBoxName + '" ' +
                                                                    'value="' + value + '"';
                                                                var isChecked = false;
                                                                var checkBoxElem = document.getElementById(checkBoxId);
                                                                if (isInit) {
                                                                    isChecked = options[s].isSelected();
                                                                } else if (checkBoxElem != null) {
                                                                    isChecked = checkBoxElem.checked;
                                                                }
                                                                if (isChecked) {
                                                                    innerHTMLString += ' checked';
                                                                }
                                                                innerHTMLString += '/><label style="vertical-align:middle">' +
                                                                    options[s].getValue() + '</label></td>';
                                                                s++;
                                                            } else {
                                                                innerHTMLString += '<td class="ida-advQuery-lightStripe"/>';
                                                            }
                                                        }
                                                        if (row == 0) {
                                                            var value = project + '_' + itemName;
                                                            var resetId = 'RESET_PROJECT_SPECIFIC.' + value;
                                                            innerHTMLString += '<td align="right">' +
                                                                '<input type="checkbox" ' +
                                                                'id="' + resetId + '" ' +
                                                                'name="displayInResult" ' +
                                                                'value="' + items[j].getKey() + '" ';
                                                            var isChecked = false;
                                                            var checkBoxElem = document.getElementById(resetId);
                                                            if (isInit) {
                                                                var itemKey = items[j].getKey();
                                                            } else if (checkBoxElem != null) {
                                                                isChecked = checkBoxElem.checked;
                                                            }
                                                            if (isChecked) {
                                                                innerHTMLString += ' checked';
                                                            }
                                                            innerHTMLString += '></td>';
                                                        } else {
                                                            innerHTMLString += '<td/>';
                                                        }
                                                        innerHTMLString += '<td>&nbsp;</td>';
                                                    }
                                                    innerHTMLString += '</tr>';
                                                }
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                        };
                                    };
                                    AdvAssessmentBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('assessmentElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            var numericBuilder = new AdvNumericBuilder();
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_ASSESSMENT_STRING') {
                                                        var itemId = components[1];
                                                        var textBoxId = 'assessment_textBox_' + itemId;
                                                        document.getElementById(textBoxId).value = '';
                                                        elems[i].checked = false;
                                                    } else if (components[0] == 'RESET_ASSESSMENT_NUMERIC') {
                                                        var itemId = components[1];
                                                        var prefix = 'assessment_' + itemId;
                                                        var menuDivId = prefix + '_MenuVal';
                                                        var boxDivId = prefix + '_Val';
                                                        elems[i].checked = false;
                                                        numericBuilder.build(prefix + '_', menuDivId, true, boxDivId,
                                                            prefix + '_textBox', '', '');
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (assessments) {
                                            var content = document.getElementById('assessmentHolder');
                                            if (assessments.length == 0) {
                                                content.innerHTML = '';
                                                return;
                                            }
                                            document.getElementById('assessmentElems').style.display = 'block';
                                            var isEquals = new Object();
                                            var box1Values = new Object();
                                            var box2Values = new Object();
                                            var innerHTMLString = '<table width="100%" border="0" cellspacing="0">';
                                            var numericBuilder = new AdvNumericBuilder();
                                            for (var i = 0; i < assessments.length; i++) {
                                                var project = _getLabels(assessments[i].getProjects());
                                                var items = assessments[i].getAssessments();
                                                for (var j = 0; j < items.length; j++) {
                                                    var itemId = items[j].getId();
                                                    var options = items[j].getOptions();
                                                    var key = items[j].getKey();
                                                    innerHTMLString += '<tr valign="middle">';
                                                    if (true) {
                                                        if (j == 0) {
                                                            innerHTMLString += '<td class="bodyTextBold" width="8%">(' +
                                                                project + ')</td>';
                                                        } else {
                                                            innerHTMLString += '<td class="bodyTextBold" width="8%"/>';
                                                        }
                                                    }
                                                    var col2 = "31%";
                                                    if (false) {
                                                        col2 = "41%";
                                                    }
                                                    innerHTMLString += '<td class="bodyTextBold" width="' + col2 + '">' +
                                                        items[j].getName() + '</td>';
                                                    if (items[j] instanceof AdvStringAssessment) {
                                                        var textBoxId = 'assessment_textBox_' + itemId;
                                                        var textBoxElem = document.getElementById(textBoxId);
                                                        var value = "";
                                                        if (isInit) {
                                                            if (options.length > 0) {
                                                                value = options[0].getValue();
                                                            }
                                                        } else if (textBoxElem != null) {
                                                            value = textBoxElem.value;
                                                        }
                                                        innerHTMLString += '<td><input type="text" ' +
                                                            'id="' + textBoxId + '" ' +
                                                            'name="' + textBoxId + '" ' +
                                                            'maxlength="40" ' +
                                                            'value="' + value + '"/></td>';
                                                        var resetId = 'RESET_ASSESSMENT_STRING.' + itemId;
                                                        innerHTMLString += '<td width="5%" align="right">' +
                                                            '<input type="checkbox" ' +
                                                            'id="' + resetId + '" ' +
                                                            'name="displayInResult" ' +
                                                            'value="' + key + '" ';
                                                        var isChecked = false;
                                                        var checkBoxElem = document.getElementById(resetId);
                                                        if (isInit) {
                                                        } else if (checkBoxElem != null) {
                                                            isChecked = checkBoxElem.checked;
                                                        }
                                                        if (isChecked) {
                                                            innerHTMLString += ' checked';
                                                        }
                                                        innerHTMLString += '/></td>';
                                                    } else if (items[j] instanceof AdvNumberAssessment) {
                                                        var prefix = 'assessment_' + itemId + '_';
                                                        var menuDivId = prefix + 'MenuVal';
                                                        var boxDivId = prefix + 'Val';
                                                        isEquals[itemId] = numericBuilder.getIsEquals(prefix);
                                                        box1Values[itemId] = numericBuilder.getTextBox1Value(prefix);
                                                        box2Values[itemId] = numericBuilder.getTextBox2Value(prefix);
                                                        if (isInit) {
                                                            if (options.length == 1) {
                                                                isEquals[itemId] = true;
                                                                box1Values[itemId] = options[0].getValue();
                                                                box2Values[itemId] = '';
                                                            } else if (options.length == 2) {
                                                                isEquals[itemId] = false;
                                                                box1Values[itemId] = options[0].getValue();
                                                                box2Values[itemId] = options[1].getValue();
                                                            }
                                                        }
                                                        innerHTMLString += '<td><table cellpadding="0" cellspacing="0"><tr>' +
                                                            '<td><div id="' + menuDivId + '"></div></td>' +
                                                            '<td><div id="' + boxDivId + '"></div></td>' +
                                                            '</tr></table></td>';
                                                        var resetId = 'RESET_ASSESSMENT_NUMERIC.' + itemId;
                                                        innerHTMLString += '<td width="5%" align="right">' +
                                                            '<input type="checkbox" ' +
                                                            'id="' + resetId + '" ' +
                                                            'name="displayInResult" ' +
                                                            'value="' + key + '" ';
                                                        var isChecked = false;
                                                        var checkBoxElem = document.getElementById(resetId);
                                                        if (isInit) {
                                                        } else if (checkBoxElem != null) {
                                                            isChecked = checkBoxElem.checked;
                                                        }
                                                        if (isChecked) {
                                                            innerHTMLString += ' checked';
                                                        }
                                                        innerHTMLString += '/></td>';
                                                    }
                                                    innerHTMLString += '</tr>';
                                                }
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                            for (var i = 0; i < assessments.length; i++) {
                                                var items = assessments[i].getAssessments();
                                                for (var j = 0; j < items.length; j++) {
                                                    if (items[j] instanceof AdvNumberAssessment) {
                                                        var itemId = items[j].getId();
                                                        var options = items[j].getOptions();
                                                        var prefix = 'assessment_' + itemId;
                                                        var menuDivId = prefix + '_MenuVal';
                                                        var boxDivId = prefix + '_Val';
                                                        numericBuilder.build(prefix + '_', menuDivId, isEquals[itemId],
                                                            boxDivId, prefix + '_textBox',
                                                            box1Values[itemId], box2Values[itemId]);
                                                    }
                                                }
                                            }
                                        };

                                        function _getLabels(projectSets) {
                                            var delim = '';
                                            var label = '';
                                            for (var j = 0; j < projectSets.length; j++) {
                                                label += delim + projectSets[j];
                                                delim = ',';
                                            }
                                            return label;
                                        };
                                    };
                                    AdvStudyVisitBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('visitElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            document.getElementById('advCalText1').value = "";
                                            document.getElementById('advCalText2').value = "";
                                            document.getElementById('studyDateAnd').style.display = 'none';
                                            document.getElementById('studyDateInput').style.display = 'none';
                                            document.getElementById('studyDate').selectedIndex = 0;
                                            document.getElementById('advCalText3').value = "";
                                            document.getElementById('advCalText4').value = "";
                                            document.getElementById('archiveDateAnd').style.display = 'none';
                                            document.getElementById('archiveDateInput').style.display = 'none';
                                            document.getElementById('archiveDate').selectedIndex = 0;
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'visit_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var andOrBuilder = new AdvOrAndBuilder();
                                            var elems = YAHOO.util.Dom.getElementsByClassName('RESET_VISIT');
                                            for (var i = 0; i < elems.length; i++) {
                                                var andOrId = elems[i].id;
                                                andOrBuilder.setTo(andOrId, true);
                                            }
                                            var elems = document.getElementsByTagName('input');
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_VISIT' || components[0] == 'RESET_STUDY') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (studyDates, archiveDates, visits) {
                                            var content = document.getElementById('visitHolder');
                                            if (isInit) {
                                                var date1 = "";
                                                if (studyDates.length > 0) {
                                                    date1 = studyDates[0];
                                                }
                                                var date2 = "";
                                                if (studyDates.length > 1) {
                                                    date2 = studyDates[1];
                                                }
                                                document.getElementById('advCalText1').value = date1;
                                                document.getElementById('advCalText2').value = date2;
                                                if (studyDates.length == 2) {
                                                    document.getElementById('studyDateAnd').style.display = 'inline';
                                                    document.getElementById('studyDateInput').style.display = 'inline';
                                                    document.getElementById('studyDate').selectedIndex = 1;
                                                } else {
                                                    document.getElementById('studyDateAnd').style.display = 'none';
                                                    document.getElementById('studyDateInput').style.display = 'none';
                                                    document.getElementById('studyDate').selectedIndex = 0;
                                                }
                                                date1 = "";
                                                if (archiveDates.length > 0) {
                                                    date1 = archiveDates[0];
                                                }
                                                date2 = "";
                                                if (archiveDates.length > 1) {
                                                    date2 = archiveDates[1];
                                                }
                                                document.getElementById('advCalText3').value = date1;
                                                document.getElementById('advCalText4').value = date2;
                                                if (archiveDates.length == 2) {
                                                    document.getElementById('archiveDateAnd').style.display = 'inline';
                                                    document.getElementById('archiveDateInput').style.display = 'inline';
                                                    document.getElementById('archiveDate').selectedIndex = 1;
                                                } else {
                                                    document.getElementById('archiveDateAnd').style.display = 'none';
                                                    document.getElementById('archiveDateInput').style.display = 'none';
                                                    document.getElementById('archiveDate').selectedIndex = 0;
                                                }
                                            }
                                            document.getElementById('visitElems').style.display = 'block';
                                            var innerHTMLString = '<table width="96%" cellspacing="0" ' +
                                                'cellpadding="0" border="0" ' +
                                                'class="ida-search-contentBgColor">';
                                            var leftCol = document.getElementById("vCol1").offsetWidth;
                                            var labelCol = document.getElementById("vCol2").offsetWidth;
                                            var contentCol = document.getElementById("vCol3").offsetWidth;
                                            var radioCol = document.getElementById("vCol4").offsetWidth;
                                            var chkBoxCol = document.getElementById("vCol5").offsetWidth;
                                            var rightCol = document.getElementById("vCol6").offsetWidth;
                                            var names = new Array();
                                            for (var i = 0; i < visits.length; i++) {
                                                var items = visits[i].getItems();
                                                for (var j = 0; j < items.length; j++) {
                                                    names.push(items[j].getName());
                                                }
                                            }
                                            var columnSizer = new AdvColumnSizer(names);
                                            var numOfCols = columnSizer.getNumberOfColumns(contentCol, true);
                                            var isOrs = new Array();
                                            var andOrBuilder = new AdvOrAndBuilder();
                                            for (var i = 0; i < visits.length; i++) {
                                                var project = visits[i].getProject();
                                                var isOr = visits[i].isOr();
                                                var items = visits[i].getItems();
                                                var newColspan = numOfCols + 1;
                                                innerHTMLString += '<tr><td colspan="' + newColspan +
                                                    '" height="2px"/>' + '</tr>';
                                                innerHTMLString += '<tr>';
                                                innerHTMLString += '<td width="' + leftCol + '"/>';
                                                if (true) {
                                                    innerHTMLString += '<td class="bodyTextBold" width="' +
                                                        labelCol + '">(' + project + ')' + '</td>';
                                                } else {
                                                    innerHTMLString += '<td/>';
                                                }
                                                var remainder = items.length % numOfCols;
                                                var numOfRows = (items.length - remainder) / numOfCols;
                                                if (remainder > 0) {
                                                    numOfRows++;
                                                }
                                                var index = 0;
                                                for (var row = 0; row < numOfRows; row++) {
                                                    if (row != 0) {
                                                        innerHTMLString += '<tr><td/><td/>';
                                                    }
                                                    var checkBoxName = "visit_checkBox";
                                                    for (var col = 0; col < numOfCols; col++) {
                                                        innerHTMLString += '<td class="ida-advQuery-lightStripe" nowrap>';
                                                        if (index < items.length) {
                                                            var value = project + '_' + items[index].getId();
                                                            var checkBoxId = checkBoxName + value;
                                                            innerHTMLString += '<input type="checkbox" ' +
                                                                'style="vertical-align:middle" ' +
                                                                'id="' + checkBoxId + '" ' +
                                                                'name="' + checkBoxName + '" ' +
                                                                'value="' + value + '"';
                                                            var isChecked = false;
                                                            var checkBoxElem = document.getElementById(checkBoxId);
                                                            if (isInit) {
                                                                isChecked = items[index].isSelected();
                                                            } else if (checkBoxElem != null) {
                                                                isChecked = checkBoxElem.checked;
                                                            }
                                                            if (isChecked) {
                                                                innerHTMLString += ' checked';
                                                            }
                                                            innerHTMLString += '/><label style="vertical-align:middle">' +
                                                                items[index].getName() + '</label></td>';
                                                            index++;
                                                        } else {
                                                            innerHTMLString += '</td>';
                                                        }
                                                    }
                                                    if (row == 0) {
                                                        innerHTMLString += '<td width="' + radioCol + '" rowspan="2">';
                                                        var radioId = "advVisitRadio_" + project;
                                                        innerHTMLString += '<div id="' + radioId + '" class="RESET_VISIT">' +
                                                            '</div>';
                                                        isOrs[radioId] = andOrBuilder.isOr(radioId);
                                                        if (isInit) {
                                                            isOrs[radioId] = isOr;
                                                        }
                                                        innerHTMLString += '</td>';
                                                        if (i == 0) {
                                                            var resetId = 'RESET_VISIT.0';
                                                            innerHTMLString += '<td width="' + chkBoxCol + '" align="right">' +
                                                                '<input type="checkbox" ' +
                                                                'name="displayInResult" ' +
                                                                'id="' + resetId + '" ' +
                                                                'value="VISIT"';
                                                            var isChecked = false;
                                                            var checkBoxElem = document.getElementById(resetId);
                                                            if (isInit) {
                                                                isChecked = false;
                                                            } else if (checkBoxElem != null) {
                                                                isChecked = checkBoxElem.checked;
                                                            }
                                                            if (isChecked) {
                                                                innerHTMLString += ' checked';
                                                            }
                                                            innerHTMLString += '></td>';
                                                        } else {
                                                            innerHTMLString += '<td/>';
                                                        }
                                                        innerHTMLString += '<td width="' + rightCol + '"/>';
                                                        innerHTMLString += '</tr>';
                                                    } else {
                                                        innerHTMLString += '<td/><td/><td/>';
                                                    }
                                                }
                                                innerHTMLString += '<tr><td colspan="' + newColspan +
                                                    '" height="2px"/>' + '</tr>';
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                            for (var i = 0; i < visits.length; i++) {
                                                var project = visits[i].getProject();
                                                var radioId = "advVisitRadio_" + project;
                                                var radioName = 'visit_andOr_' + project;
                                                andOrBuilder.build(radioId, radioName, isOrs[radioId]);
                                            }
                                        };
                                    };
                                    AdvModalityBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('imgModElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            document.getElementById('imgDescText').value = "";
                                            document.getElementById('imageIdText').value = "";
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_MODALITY') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (imageDesc, imageDataIds, isModalityOr, modalities) {
                                            var content = document.getElementById('imgModHolder');
                                            if (isInit) {
                                                document.getElementById('imgDescText').value = imageDesc;
                                            }
                                            if (isInit) {
                                                document.getElementById('imageIdText').value = imageDataIds;
                                            }
                                            document.getElementById('imgModElems').style.display = 'block';
                                            var names = new Array();
                                            for (var i = 0; i < modalities.length; i++) {
                                                var name = modalities[i].getName() + '&nbsp;';
                                                var projects = modalities[i].getProjects();
                                                var delimit = '(';
                                                for (var j = 0; j < projects.length; j++) {
                                                    name += delimit + projects[j];
                                                    delimit = ',';
                                                }
                                                if (projects.length > 0) {
                                                    name += ')';
                                                }
                                                names.push(name);
                                            }
                                            var columnSizer = new AdvColumnSizer(names);
                                            var numOfCols = columnSizer.getNumberOfColumns(content.offsetWidth, true);
                                            var remainder = names.length % numOfCols;
                                            var numOfRows = (names.length - remainder) / numOfCols;
                                            if (remainder > 0) {
                                                numOfRows++;
                                            }
                                            var innerHTMLString = '<table width="100%" cellpadding="0" ' +
                                                'cellspacing="0" border="0">';
                                            var newColSpan = numOfCols + 4;
                                            innerHTMLString += '<tr><td colspan="' + newColSpan +
                                                '" height="2px"/>' + '</tr>';
                                            var index = 0;
                                            for (var row = 0; row < numOfRows; row++) {
                                                innerHTMLString += '<tr>';
                                                for (var col = 0; col < numOfCols; col++) {
                                                    if (index < names.length) {
                                                        innerHTMLString += '<td class="ida-advQuery-lightStripe" nowrap>';
                                                        innerHTMLString += '<input type="checkbox" ' +
                                                            'style="vertical-align:middle" ' +
                                                            'name="imgModality_checkBox" ' +
                                                            'value="' + modalities[index].getId() + '" ' +
                                                            'onclick="var hlr=new AdvSearchOptionHandler();' +
                                                            'hlr.modalitiesHaveChanged();"';
                                                        if (modalities[index].isSelected()) {
                                                            innerHTMLString += ' checked';
                                                        }
                                                        innerHTMLString += '/><label style="vertical-align:middle">' +
                                                            names[index] + '</label></td>';
                                                        index++;
                                                    } else {
                                                        innerHTMLString += '<td class="ida-advQuery-lightStripe"/>';
                                                    }
                                                }
                                                innerHTMLString += '</tr>';
                                            }
                                            innerHTMLString += '<tr><td colspan="' + newColSpan +
                                                '" height="2px"/>' + '</tr>';
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                            var andOrBuilder = new AdvOrAndBuilder();
                                            andOrBuilder.setTo('advImgModRadio', isModalityOr);
                                        };
                                    };
                                    AdvProtocolBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('imgProElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            var numericBuilder = new AdvNumericBuilder();
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_PROTOCOL_DESC') {
                                                        var descId = components[1];
                                                        document.getElementById(descId).value = '';
                                                    }
                                                    if (components[0] == 'RESET_PROTOCOL_NUMERIC') {
                                                        var prefix = components[1];
                                                        var menuDivId = prefix + '_MenuVal';
                                                        var boxDivId = prefix + '_Val';
                                                        elems[i].checked = false;
                                                        numericBuilder.build(prefix + '_', menuDivId, true, boxDivId,
                                                            prefix + '_textBox', '', '');
                                                    }
                                                    if (components[0] == 'RESET_PROTOCOL_STRING') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'imgProtocol_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                        };
                                        this.build = function (protocols) {
                                            var content = document.getElementById('imgProHolder');
                                            document.getElementById('imgProElems').style.display = 'block';
                                            var leftCol = document.getElementById("ptCol1").offsetWidth;
                                            var imgModCol = document.getElementById("ptCol2").offsetWidth;
                                            var labelCol = document.getElementById("ptCol3").offsetWidth;
                                            var contentCol = document.getElementById("ptCol4").offsetWidth;
                                            var chkBoxCol = document.getElementById("ptCol5").offsetWidth;
                                            var rightCol = document.getElementById("ptCol6").offsetWidth;
                                            var values = new Array();
                                            for (var i = 0; i < protocols.length; i++) {
                                                var terms = protocols[i].getTerms();
                                                for (var j = 0; j < terms.length; j++) {
                                                    if (terms[j] instanceof AdvStringTerm) {
                                                        var options = terms[j].getOptions();
                                                        for (var k = 0; k < options.length; k++) {
                                                            values.push(options[k].getValue());
                                                        }
                                                    }
                                                }
                                            }
                                            var columnSizer = new AdvColumnSizer(values);
                                            var numOfCols = columnSizer.getNumberOfColumns(contentCol, true);
                                            var innerHTMLString = '<table border="0" width="100%" ' +
                                                'cellpadding="0" cellspacing="0">';
                                            var isEquals = new Object();
                                            var box1Values = new Object();
                                            var box2Values = new Object();
                                            var numericBuilder = new AdvNumericBuilder();
                                            for (var p = 0; p < protocols.length; p++) {
                                                var modNameTd = '<td width="' + leftCol + '"/>' +
                                                    '<td width="' + imgModCol + '" class="bodyTextBold">(' +
                                                    protocols[p].getModalityName() + ')</td>';
                                                var terms = protocols[p].getTerms();
                                                for (var j = 0; j < terms.length; j++) {
                                                    var key = terms[j].getKey();
                                                    var options = terms[j].getOptions();
                                                    if (terms[j] instanceof AdvStringTerm) {
                                                        var newColspan = numOfCols + 4;
                                                        innerHTMLString += '<tr><td colspan="' + newColspan +
                                                            '" height="2px"/>' + '</tr>';
                                                        innerHTMLString += '<tr>' + modNameTd +
                                                            '<td class="bodyTextBold">' +
                                                            terms[j].getName() + '</td>';
                                                        var remainder = options.length % numOfCols;
                                                        var numOfRows = (options.length - remainder) / numOfCols;
                                                        if (remainder > 0) {
                                                            numOfRows++;
                                                        }
                                                        var checkBoxName = 'imgProtocol_checkBox';
                                                        var index = 0;
                                                        for (var row = 0; row < numOfRows; row++) {
                                                            if (row > 0) {
                                                                innerHTMLString += '<tr><td/><td/><td/>';
                                                            }
                                                            for (var col = 0; col < numOfCols; col++) {
                                                                if (index < options.length) {
                                                                    var value = protocols[p].getModalityId() + '.' +
                                                                        terms[j].getId() + '.' + options[index].getValue();
                                                                    var checkBoxId = checkBoxName + value;
                                                                    innerHTMLString += '<td class="ida-advQuery-lightStripe" nowrap>' +
                                                                        '<input type="checkbox" ' +
                                                                        'style="vertical-align:middle" ' +
                                                                        'id="' + checkBoxId + '" ' +
                                                                        'name="' + checkBoxName + '" ' +
                                                                        'value="' + value + '"';
                                                                    var isChecked = false;
                                                                    var checkBoxElem = document.getElementById(checkBoxId);
                                                                    if (isInit) {
                                                                        isChecked = options[index].isSelected();
                                                                    } else if (checkBoxElem != null) {
                                                                        isChecked = checkBoxElem.checked;
                                                                    }
                                                                    if (isChecked) {
                                                                        innerHTMLString += ' checked';
                                                                    }
                                                                    innerHTMLString += '/><label style="vertical-align:middle">' +
                                                                        options[index].getValue() + '</label></td>';
                                                                    index++;
                                                                } else {
                                                                    innerHTMLString += '<td class="ida-advQuery-lightStripe"/>';
                                                                }
                                                            }
                                                            if (row == 0) {
                                                                var resetId = 'RESET_PROTOCOL_STRING.' +
                                                                    protocols[p].getModalityId() + '_' + terms[j].getId();
                                                                innerHTMLString += '<td align="right">' +
                                                                    '<input type="checkbox" ' +
                                                                    'name="displayInResult" ' +
                                                                    'id="' + resetId + '" ' +
                                                                    'value="' + key + '" ';
                                                                var isChecked = false;
                                                                var checkBoxElem = document.getElementById(resetId);
                                                                if (isInit) {
                                                                } else if (checkBoxElem != null) {
                                                                    isChecked = checkBoxElem.checked;
                                                                }
                                                                if (isChecked) {
                                                                    innerHTMLString += ' checked';
                                                                }
                                                                innerHTMLString += '/></td>' +
                                                                    '<td align="center">&nbsp;</td>' +
                                                                    '</tr>';
                                                            }
                                                        }
                                                    } else if (terms[j] instanceof AdvNumberTerm) {
                                                        var units = "";
                                                        if (terms[j].getUnits() != "") {
                                                            units = '(' + terms[j].getUnits() + ')';
                                                        }
                                                        innerHTMLString += '<tr>' + modNameTd +
                                                            '<td class="bodyTextBold">' + terms[j].getName() +
                                                            '&nbsp;' + units + '&nbsp;</td>';
                                                        var prefix = 'imgProtocol_' + protocols[p].getModalityId() +
                                                            '_' + terms[j].getId();
                                                        var menuDivId = prefix + '_MenuVal';
                                                        var boxDivId = prefix + '_Val';
                                                        isEquals[key] = numericBuilder.getIsEquals(prefix + '_');
                                                        box1Values[key] = numericBuilder.getTextBox1Value(prefix + '_');
                                                        box2Values[key] = numericBuilder.getTextBox2Value(prefix + '_');
                                                        if (isInit) {
                                                            if (options.length == 1) {
                                                                isEquals[key] = true;
                                                                box1Values[key] = options[0].getValue();
                                                                box2Values[key] = '';
                                                            } else if (options.length == 2) {
                                                                isEquals[key] = false;
                                                                box1Values[key] = options[0].getValue();
                                                                box2Values[key] = options[1].getValue();
                                                            }
                                                        }
                                                        innerHTMLString += '<td colspan="' + numOfCols + '">' +
                                                            '<table cellpadding="0" cellspacing="0"><tr>' +
                                                            '<td><div id="' + menuDivId + '"></div></td>' +
                                                            '<td><div id="' + boxDivId + '"></div></td>' +
                                                            '</tr></table></td>';
                                                        var resetId = 'RESET_PROTOCOL_NUMERIC.' + prefix;
                                                        innerHTMLString += '<td align="right">' +
                                                            '<input type="checkbox" ' +
                                                            'name="displayInResult" ' +
                                                            'id="' + resetId + '" ' +
                                                            'value="' + key + '" ';
                                                        var isChecked = false;
                                                        var checkBoxElem = document.getElementById(resetId);
                                                        if (isInit) {
                                                        } else if (checkBoxElem != null) {
                                                            isChecked = checkBoxElem.checked;
                                                        }
                                                        if (isChecked) {
                                                            innerHTMLString += ' checked';
                                                        }
                                                        innerHTMLString += '/></td>' +
                                                            '<td align="center">&nbsp;</td>' +
                                                            '</tr>';
                                                    }
                                                    modNameTd = '<td/><td/>';
                                                }
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                            for (var p = 0; p < protocols.length; p++) {
                                                var terms = protocols[p].getTerms();
                                                for (var j = 0; j < terms.length; j++) {
                                                    var key = terms[j].getKey();
                                                    if (terms[j] instanceof AdvNumberTerm) {
                                                        var prefix = 'imgProtocol_' + protocols[p].getModalityId() +
                                                            '_' + terms[j].getId();
                                                        var menuDivId = prefix + '_MenuVal';
                                                        var boxDivId = prefix + '_Val';
                                                        var key = terms[j].getKey();
                                                        numericBuilder.build(prefix + '_', menuDivId, isEquals[key], boxDivId,
                                                            prefix + '_textBox', box1Values[key],
                                                            box2Values[key]);
                                                    }
                                                }
                                            }
                                        };
                                    };
                                    AdvQualityBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('imgQuaElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'imgQuality_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_QUALITY') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (qualityGroups) {
                                            var content = document.getElementById('imgQuaHolder');
                                            document.getElementById('imgQuaElems').style.display = 'block';
                                            var innerHTMLString = '<table width="96%" cellspacing="0" ' +
                                                'cellpadding="0" border="0" ' +
                                                'class="ida-search-contentBgColor">';
                                            var leftCol = document.getElementById("qCol1").offsetWidth;
                                            var labelCol = document.getElementById("qCol2").offsetWidth;
                                            var contentCol = document.getElementById("qCol3").offsetWidth;
                                            var chkBoxCol = document.getElementById("qCol4").offsetWidth;
                                            var rightCol = document.getElementById("qCol5").offsetWidth;
                                            var names = new Array();
                                            for (var i = 0; i < qualityGroups.length; i++) {
                                                var items = qualityGroups[i].getItems();
                                                for (var j = 0; j < items.length; j++) {
                                                    names.push(items[j].getName());
                                                }
                                            }
                                            var columnSizer = new AdvColumnSizer(names);
                                            var numOfCols = columnSizer.getNumberOfColumns(contentCol, true);
                                            var newColspan = numOfCols + 1;
                                            for (var i = 0; i < qualityGroups.length; i++) {
                                                var project = qualityGroups[i].getProject();
                                                var items = qualityGroups[i].getItems();
                                                innerHTMLString += '<tr>';
                                                innerHTMLString += '<td width="' + leftCol + '"/>';
                                                if (true) {
                                                    innerHTMLString += '<td class="bodyTextBold" width="' +
                                                        labelCol + '">(' + project + ')' + '</td>';
                                                } else {
                                                    innerHTMLString += '<td/>';
                                                }
                                                var remainder = items.length % numOfCols;
                                                var numOfRows = (items.length - remainder) / numOfCols;
                                                if (remainder > 0) {
                                                    numOfRows++;
                                                }
                                                var index = 0;
                                                for (var row = 0; row < numOfRows; row++) {
                                                    if (row != 0) {
                                                        innerHTMLString += '<tr><td/><td/>';
                                                    }
                                                    var checkBoxName = "imgQuality_checkBox";
                                                    for (var col = 0; col < numOfCols; col++) {
                                                        innerHTMLString += '<td class="ida-advQuery-lightStripe"  nowrap>';
                                                        if (index < items.length) {
                                                            var value = project + '_' + items[index].getId();
                                                            var checkBoxId = checkBoxName + items[index].getId();
                                                            innerHTMLString += '<input type="checkbox" ' +
                                                                'style="vertical-align:middle" ' +
                                                                'id="' + checkBoxId + '" ' +
                                                                'name="' + checkBoxName + '" ' +
                                                                'value="' + value + '"';
                                                            var isChecked = false;
                                                            var checkBoxElem = document.getElementById(checkBoxId);
                                                            if (isInit) {
                                                                isChecked = items[index].isSelected();
                                                            } else if (checkBoxElem != null) {
                                                                isChecked = checkBoxElem.checked;
                                                            }
                                                            if (isChecked) {
                                                                innerHTMLString += ' checked';
                                                            }
                                                            innerHTMLString += '/><label style="vertical-align:middle">' + items[index].getName() + '</label></td>';
                                                            index++;
                                                        } else {
                                                            innerHTMLString += '</td>';
                                                        }
                                                    }
                                                    if (row == 0) {
                                                        if (i == 0) {
                                                            var resetId = 'RESET_QUALITY.0';
                                                            innerHTMLString += '<td width="' + chkBoxCol + '" align="right">' +
                                                                '<input type="checkbox" ' +
                                                                'name="displayInResult" ' +
                                                                'id="' + resetId + '" ' +
                                                                'value="QUALITY"';
                                                            var isChecked = false;
                                                            var checkBoxElem = document.getElementById(resetId);
                                                            if (isInit) {
                                                                isChecked = false;
                                                            } else if (checkBoxElem != null) {
                                                                isChecked = checkBoxElem.checked;
                                                            }
                                                            if (isChecked) {
                                                                innerHTMLString += ' checked';
                                                            }
                                                            innerHTMLString += '></td>';
                                                        } else {
                                                            innerHTMLString += '<td/>';
                                                        }
                                                        innerHTMLString += '<td width="' + rightCol + '"/>';
                                                        innerHTMLString += '</tr>';
                                                    } else {
                                                        innerHTMLString += '<td/><td/></tr>';
                                                    }
                                                }
                                                innerHTMLString += '<tr><td colspan="' + newColspan +
                                                    '" height="2px"/>' + '</tr>';
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                        };
                                    };
                                    AdvStatusBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('imgStsElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'imgStatus_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_STATUS') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (statuses) {
                                            var content = document.getElementById('imgStsHolder');
                                            document.getElementById('imgStsElems').style.display = 'block';
                                            var names = new Array();
                                            for (var i = 0; i < statuses.length; i++) {
                                                names.push(statuses[i].getName());
                                            }
                                            var columnSizer = new AdvColumnSizer(names);
                                            var numOfCols = columnSizer.getNumberOfColumns(content.offsetWidth, true);
                                            var remainder = statuses.length % numOfCols;
                                            var numOfRows = (statuses.length - remainder) / numOfCols;
                                            if (remainder > 0) {
                                                numOfRows++;
                                            }
                                            var innerHTMLString = '<table width="100%" cellpadding="0" ' +
                                                'cellspacing="0" border="0">';
                                            var checkBoxName = "imgStatus_checkBox";
                                            var index = 0;
                                            for (var row = 0; row < numOfRows; row++) {
                                                innerHTMLString += '<tr>';
                                                for (var col = 0; col < numOfCols; col++) {
                                                    innerHTMLString += '<td class="ida-advQuery-lightStripe" nowrap>';
                                                    if (index < statuses.length) {
                                                        var checkBoxId = checkBoxName + statuses[index].getId();
                                                        innerHTMLString += '<input type="checkbox" ' +
                                                            'style="vertical-align:middle" ' +
                                                            'id="' + checkBoxId + '" ' +
                                                            'name="' + checkBoxName + '" ' +
                                                            'value="' + statuses[index].getId() + '"';
                                                        var isChecked = false;
                                                        var checkBoxElem = document.getElementById(checkBoxId);
                                                        if (isInit) {
                                                            isChecked = statuses[index].isSelected();
                                                        } else if (checkBoxElem != null) {
                                                            isChecked = checkBoxElem.checked;
                                                        }
                                                        if (isChecked) {
                                                            innerHTMLString += ' checked';
                                                        }
                                                        innerHTMLString += '/><label style="vertical-align:middle">' +
                                                            names[index] + '</label></td>';
                                                        index++;
                                                    } else {
                                                        innerHTMLString += '</td>';
                                                    }
                                                }
                                                innerHTMLString += '</tr>';
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                        };
                                    };
                                    AdvProcessingBuilder = function (isInit) {
                                        this.hide = function () {
                                            document.getElementById('imgProcElems').style.display = 'none';
                                        };
                                        this.reset = function () {
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'fileType_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'structure_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'tissueType_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'laterality_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'registration_checkBox') {
                                                    elems[i].checked = false;
                                                }
                                            }
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_PROCESSING') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                        };
                                        this.build = function (fileTypes, structures, tissueTypes, lateralities,
                                                               registrations) {
                                            var content = document.getElementById('imgProcHolder');
                                            document.getElementById('imgProcElems').style.display = 'block';
                                            var pixelWidthCol1 = document.getElementById('imgProcCol1').offsetWidth;
                                            var pixelWidthCol2 = document.getElementById('imgProcCol2').offsetWidth;
                                            var pixelWidthCol3 = document.getElementById('imgProcCol3').offsetWidth;
                                            var pixelWidthCol4 = document.getElementById('imgProcCol4').offsetWidth;
                                            var pixelWidthCol5 = document.getElementById('imgProcCol5').offsetWidth;
                                            var allNames = new Array();
                                            for (var i = 0; i < fileTypes.length; i++) {
                                                allNames.push(fileTypes[i].getName());
                                            }
                                            for (var i = 0; i < structures.length; i++) {
                                                allNames.push(structures[i].getName());
                                            }
                                            for (var i = 0; i < tissueTypes.length; i++) {
                                                allNames.push(tissueTypes[i].getName());
                                            }
                                            for (var i = 0; i < lateralities.length; i++) {
                                                allNames.push(lateralities[i].getName());
                                            }
                                            for (var i = 0; i < registrations.length; i++) {
                                                allNames.push(registrations[i].getName());
                                            }
                                            var columnSizer = new AdvColumnSizer(allNames);
                                            var numOfCols = columnSizer.getNumberOfColumns(pixelWidthCol3, true);
                                            var innerHTMLString = '<table width="96%" cellpadding="0" ' +
                                                'cellspacing="0" border="0" ' +
                                                'class="ida-search-contentBgColor">';
                                            innerHTMLString += '<tr valign="top">' +
                                                '<td width="' + pixelWidthCol1 + '"/>' +
                                                '<td width="' + pixelWidthCol2 + '"/>' +
                                                '<td width="' + pixelWidthCol3 + '" colspan="' +
                                                numOfCols + '"/>' +
                                                '<td width="' + pixelWidthCol4 + '"/>' +
                                                '<td width="' + pixelWidthCol5 + '"/>' +
                                                '</tr>';
                                            if (fileTypes.length > 0) {
                                                innerHTMLString +=
                                                    _getSectionHtml(fileTypes, numOfCols, "Image File Type",
                                                        'fileType_checkBox',
                                                        'IMAGE_PROCESSING.IMAGE_FILE_TYPE',
                                                        false);
                                            }
                                            var newColspan = numOfCols + 4;
                                            if (structures.length > 0) {
                                                innerHTMLString += '<tr><td colspan="' + newColspan +
                                                    '" height="2px"/></tr>';
                                                innerHTMLString +=
                                                    _getSectionHtml(structures, numOfCols, "Anatomic Structure",
                                                        'structure_checkBox',
                                                        'IMAGE_PROCESSING.ANATOMIC_STRUCTURE',
                                                        false);
                                            }
                                            if (tissueTypes.length > 0) {
                                                innerHTMLString += '<tr><td colspan="' + newColspan +
                                                    '" height="2px"/></tr>';
                                                innerHTMLString +=
                                                    _getSectionHtml(tissueTypes, numOfCols, "Tissue Type",
                                                        'tissueType_checkBox',
                                                        'IMAGE_PROCESSING.TISSUE_TYPE',
                                                        false);
                                            }
                                            if (lateralities.length > 0) {
                                                innerHTMLString += '<tr><td colspan="' + newColspan +
                                                    '" height="2px"/></tr>';
                                                innerHTMLString +=
                                                    _getSectionHtml(lateralities, numOfCols, "Laterality",
                                                        'laterality_checkBox',
                                                        'IMAGE_PROCESSING.LATERALITY',
                                                        false);
                                            }
                                            if (registrations.length > 0) {
                                                innerHTMLString += '<tr><td colspan="' + newColspan +
                                                    '" height="2px"/></tr>';
                                                innerHTMLString +=
                                                    _getSectionHtml(registrations, numOfCols, "Registration",
                                                        'registration_checkBox',
                                                        'IMAGE_PROCESSING.REGISTRATION',
                                                        false);
                                            }
                                            innerHTMLString += '</table>';
                                            content.innerHTML = innerHTMLString;
                                        };

                                        function _getNumberOfColumns(items, width) {
                                            var names = new Array();
                                            for (var i = 0; i < items.length; i++) {
                                                names.push(items[i].getName());
                                            }
                                            var columnSizer = new AdvColumnSizer(names);
                                            return columnSizer.getNumberOfColumns(width, true);
                                        };

                                        function _getSectionHtml(items, numOfCols, title, checkBoxName, keyName,
                                                                 isSelected) {
                                            var remainder = items.length % numOfCols;
                                            var numOfRows = (items.length - remainder) / numOfCols;
                                            if (remainder > 0) {
                                                numOfRows++;
                                            }
                                            var innerHtmlStr = '<tr>' +
                                                '<td>&nbsp;</td>' +
                                                '<td class="bodyTextBold">' + title + '</td>';
                                            var index = 0;
                                            for (var row = 0; row < numOfRows; row++) {
                                                if (row > 0) {
                                                    innerHtmlStr += '<tr><td/><td/>';
                                                }
                                                for (var col = 0; col < numOfCols; col++) {
                                                    if (index < items.length) {
                                                        var checkBoxId = checkBoxName + items[index].getId();
                                                        innerHtmlStr += '<td class="ida-advQuery-lightStripe" nowrap>' +
                                                            '<input type="checkbox" ' +
                                                            'style="vertical-align:middle" ' +
                                                            'id="' + checkBoxId + '" ' +
                                                            'name="' + checkBoxName +
                                                            '" value="' + items[index].getId() + '"';
                                                        var isChecked = false;
                                                        var checkBoxElem = document.getElementById(checkBoxId);
                                                        if (isInit) {
                                                            isChecked = items[index].isSelected();
                                                        } else if (checkBoxElem != null) {
                                                            isChecked = checkBoxElem.checked;
                                                        }
                                                        if (isChecked) {
                                                            innerHtmlStr += ' checked';
                                                        }
                                                        innerHtmlStr += '><label style="vertical-align:middle">' +
                                                            items[index].getName() + '</label></td>';
                                                        index++;
                                                    } else {
                                                        innerHtmlStr += '<td class="ida-advQuery-lightStripe" />';
                                                    }
                                                }
                                                if (row == 0) {
                                                    var resetId = 'RESET_PROCESSING.' + keyName;
                                                    innerHtmlStr += '<td align="right">' +
                                                        '<input type="checkbox" ' +
                                                        'name="displayInResult" ' +
                                                        'id="' + resetId + '" ' +
                                                        'value="' + keyName + '"';
                                                    var isChecked = false;
                                                    var checkBoxElem = document.getElementById(resetId);
                                                    if (isInit) {
                                                        isChecked = isSelected;
                                                    } else if (checkBoxElem != null) {
                                                        isChecked = checkBoxElem.checked;
                                                    }
                                                    if (isChecked) {
                                                        innerHtmlStr += ' checked';
                                                    }
                                                    innerHtmlStr += '></td>';
                                                } else {
                                                    innerHtmlStr += '<td/>';
                                                }
                                                innerHtmlStr += '<td>&nbsp;</td></tr>';
                                            }
                                            return innerHtmlStr;
                                        };
                                    };
                                    AdvOrAndBuilder = function () {
                                        this.build = function (andOrId, andOrName, isOr) {
                                            var andOrElem = document.getElementById(andOrId);
                                            var descId = andOrId + "_desc";
                                            andOrElem.innerHTML = '<table width="100%" border="0" cellpadding="0" ' +
                                                'cellspacing="0">' +
                                                '<tr valign="middle">' +
                                                _getRadioHtml(andOrId, andOrName, true, isOr) +
                                                '<td width="10%"/>' +
                                                _getRadioHtml(andOrId, andOrName, false, isOr) +
                                                '</tr><tr>' +
                                                '<td class="ida-advQuery-information" colspan="3" ' +
                                                'align="center" nowrap>' +
                                                '<div id="' + descId + '"></div></td></tr></table>';
                                            this.changeDesc(descId, isOr);
                                        };
                                        this.isOr = function (andOrId) {
                                            var buttonId = andOrId + "_OR";
                                            var elem = document.getElementById(buttonId);
                                            if (elem != null) {
                                                return elem.checked;
                                            }
                                            return true;
                                        };
                                        this.setTo = function (andOrId, isOr) {
                                            var buttonId = andOrId + "_OR";
                                            var elem = document.getElementById(buttonId);
                                            elem.checked = isOr;
                                            var buttonId = andOrId + "_AND";
                                            var elem = document.getElementById(buttonId);
                                            elem.checked = !isOr;
                                            var descId = andOrId + "_desc";
                                            this.changeDesc(descId, isOr);
                                        };
                                        this.changeDesc = function (descId, isOr) {
                                            var desc = document.getElementById(descId);
                                            if (isOr) {
                                                desc.innerHTML = 'Subject has at least one';
                                            } else {
                                                desc.innerHTML = 'Subject has all';
                                            }
                                        };

                                        function _getRadioHtml(andOrId, andOrName, isOrButton, isOr) {
                                            var descId = andOrId + "_desc";
                                            if (isOrButton) {
                                                var buttonId = andOrId + "_OR";
                                                var value = "OR";
                                                var align = "right";
                                                var endCap = "/>OR";
                                                if (isOr) {
                                                    endCap = "checked/>OR";
                                                }
                                            } else {
                                                var buttonId = andOrId + "_AND";
                                                var value = "AND";
                                                var align = "left";
                                                var endCap = "/>AND";
                                                if (!isOr) {
                                                    endCap = "checked/>AND";
                                                }
                                            }
                                            var onClick = "var builder = new AdvOrAndBuilder(); " +
                                                "builder.changeDesc('" + descId + "', " +
                                                "this.value == 'OR')";
                                            return '<td width="45%" class="ida-advQuery-information" ' +
                                                'align="' + align + '" nowrap>' +
                                                '<input type="radio" name="' + andOrName + '" ' +
                                                'id="' + buttonId + '" ' +
                                                'value="' + value + '" onClick="' + onClick + '" ' + endCap +
                                                '</td>';
                                        };
                                    };
                                    AdvNumericBuilder = function () {
                                        this.build = function (prefix, menuDivId, isEquals, boxDivId, boxName,
                                                               boxValue1, boxValue2) {
                                            var menuId = prefix + 'Menu';
                                            var menuName = menuId;
                                            var box1Id = prefix + 'TextBox1';
                                            var box2Id = prefix + 'TextBox2';
                                            var menuElem = document.getElementById(menuDivId);
                                            menuElem.innerHTML = _getMenuHtml(prefix, menuDivId, menuId, menuName,
                                                isEquals, boxDivId, box1Id, box2Id,
                                                boxName);
                                            var boxElem = document.getElementById(boxDivId);
                                            if (!isEquals) {
                                                boxElem.innerHTML = "&nbsp;" + _getBoxHtml(box1Id, boxName, boxValue1) +
                                                    "and " + _getBoxHtml(box2Id, boxName, boxValue2) +
                                                    "&nbsp;";
                                            } else {
                                                boxElem.innerHTML = "&nbsp;" + _getBoxHtml(box1Id, boxName, boxValue1) +
                                                    "&nbsp;";
                                            }
                                        };
                                        this.getIsEquals = function (prefix) {
                                            var menuId = prefix + 'Menu';
                                            var menuElem = document.getElementById(menuId);
                                            if (menuElem != null) {
                                                return menuElem.selectedIndex == 0;
                                            }
                                            return true;
                                        };
                                        this.getTextBox1Value = function (prefix) {
                                            var boxId = prefix + 'TextBox1';
                                            var boxElem = document.getElementById(boxId);
                                            if (boxElem != null) {
                                                return boxElem.value;
                                            }
                                            return "";
                                        };
                                        this.getTextBox2Value = function (prefix) {
                                            var boxId = prefix + 'TextBox2';
                                            var boxElem = document.getElementById(boxId);
                                            if (boxElem != null) {
                                                return boxElem.value;
                                            }
                                            return "";
                                        };
                                        this.checkNumericInput = function (event, id) {
                                            var userInput = document.getElementById(id);
                                            var strLength = userInput.value.length;
                                            var decimalCount = 0;
                                            if (event.type == 'keyup' || event.type == 'keypress') {
                                                for (var i = 0; i < strLength; i++) {
                                                    if (userInput.value.charAt(i) == '.') {
                                                        decimalCount++;
                                                    }
                                                }
                                                var lchar = userInput.value.charAt(strLength - 1);
                                                if ((!_isNumeric(lchar)) || (decimalCount > 1)) {
                                                    var number = userInput.value.substring(0, strLength - 1);
                                                    userInput.value = number;
                                                }
                                            } else {
                                                var finalIndex = 0;
                                                for (var j = 0; j < strLength; j++) {
                                                    if (userInput.value.charAt(j) == '.') {
                                                        decimalCount++;
                                                    }
                                                    if (!_isNumeric(userInput.value.charAt(j)) || decimalCount > 1) {
                                                        finalIndex = j;
                                                        break;
                                                    }
                                                }
                                                var number = userInput.value.substring(0, j);
                                                if (number == '.') {
                                                    number = '';
                                                }
                                                userInput.value = number;
                                            }
                                            return true;
                                        };

                                        function _isNumeric(lchar) {
                                            var cCode = lchar.charCodeAt(0);
                                            if ((cCode < 46) || (cCode > 57) || (cCode == 47))
                                                return false;
                                            else
                                                return true;
                                        };

                                        function _getMenuHtml(prefix, menuDivId, menuId, menuName, isEquals, boxDivId,
                                                              box1Id, box2Id, boxName) {
                                            var option1 = '<option value="equals" ';
                                            if (isEquals) {
                                                option1 += 'selected';
                                            }
                                            option1 += '>Equals</option>';
                                            var option2 = '<option value="between" ';
                                            if (!isEquals) {
                                                option2 += 'selected';
                                            }
                                            option2 += '>Between</option>';
                                            var s1 = "document.getElementById('" + menuId + "')";
                                            var eqText = s1 + "[" + s1 + ".selectedIndex].value=='equals'";
                                            var subText = "var builder = new AdvNumericBuilder(); " +
                                                "builder.build('" + prefix + "','" + menuDivId + "'," +
                                                eqText + ",'" + boxDivId + "','" + boxName + "'," +
                                                "document.getElementById('" + box1Id + "').value, '');";
                                            return '<select name="' + menuName + '" id="' + menuId + '" ' +
                                                'onChange="' + subText + '">' + option1 + option2 + '</select>';
                                        };

                                        function _getBoxHtml(boxId, boxName, boxValue) {
                                            var subText = "var builder = new AdvNumericBuilder(); " +
                                                "builder.checkNumericInput(event, this.id)";
                                            return "<input type='text' size='8' id='" + boxId + "' " +
                                                "name='" + boxName + "' value='" + boxValue + "' " +
                                                "onblur='" + subText + "' onkeyup='" + subText + "' " +
                                                "onkeypress='" + subText + "'/>";
                                        };
                                    };
                                    AdvCalendarBuilder = function (inputId, calendarId, dialogId, callback) {
                                        var _calendar;
                                        var _calDialog;
                                        var _showBtn;
                                        this.build = function () {
                                            _showBtn = YAHOO.util.Dom.get(inputId);
                                            YAHOO.util.Event.on(_showBtn, 'click', _createCalendar);
                                        };

                                        function _createCalendar() {
                                            YAHOO.util.Event.on(document, 'click', _hideCalendar);
                                            var calDialogProperty = new AdvCalendarDialogProperty();
                                            calDialogProperty.addContext(inputId);
                                            calDialogProperty.addContext(YAHOO.widget.Overlay.TOP_LEFT);
                                            calDialogProperty.addContext(YAHOO.widget.Overlay.TOP_LEFT);
                                            _calDialog = new YAHOO.widget.Dialog(dialogId, calDialogProperty);
                                            _calDialog.setBody('<div id="' + calendarId + '"></div>');
                                            _calDialog.render(document.body);
                                            _calDialog.showEvent.subscribe(_showCalendar);
                                            var property = new AdvCalendarProperty(false, true);
                                            _calendar = new YAHOO.widget.Calendar(calendarId, property);
                                            var curDate = _getCurrentPageDate();
                                            if (curDate) {
                                                _calendar.cfg.setProperty('pagedate', curDate);
                                            }
                                            _calendar.render();
                                            _calendar.selectEvent.subscribe(_dateSelected);
                                            _calendar.renderEvent.subscribe(_calendarIsRendered);
                                            _calDialog.show();
                                        };

                                        function _getCurrentPageDate() {
                                            var date = YAHOO.util.Dom.get(inputId).value;
                                            var components = date.split('/');
                                            if (components.length < 3) {
                                                return false;
                                            }
                                            return components[0] + '/' + components[2];
                                        };

                                        function _dateSelected(e) {
                                            var value;
                                            if (_calendar.getSelectedDates().length > 0) {
                                                var selDate = _calendar.getSelectedDates()[0];
                                                var dStr = selDate.getDate();
                                                var mStr = selDate.getMonth() + 1;
                                                var yStr = selDate.getFullYear();
                                                value = mStr + "/" + dStr + "/" + yStr;
                                            } else {
                                                value = "";
                                            }
                                            YAHOO.util.Dom.get(inputId).value = value;
                                            callback();
                                            _calDialog.hide();
                                        };

                                        function _calendarIsRendered(e) {
                                            _calDialog.fireEvent("changeContent");
                                        };

                                        function _showCalendar(e) {
                                            if (YAHOO.env.ua.ie) {
                                                _calDialog.fireEvent('changeContent');
                                            }
                                        };

                                        function _hideCalendar(e) {
                                            var el = YAHOO.util.Event.getTarget(e);
                                            var dialogEl = _calDialog.element;
                                            if (el != dialogEl && !YAHOO.util.Dom.isAncestor(dialogEl, el) &&
                                                el != _showBtn && !YAHOO.util.Dom.isAncestor(_showBtn, el)) {
                                                _calDialog.hide();
                                            }
                                        };
                                    };
                                    AdvCalendarProperty = function (iframe, hide_blank_weeks) {
                                        this.iframe = iframe;
                                        this.hide_blank_weeks = hide_blank_weeks;
                                        this.navigator = new AdvCalendarNavigator();
                                    };
                                    AdvCalendarProperty.prototype =
                                        {
                                            iframe: false,
                                            hide_blank_weeks: false,
                                            navigator: null
                                        };
                                    AdvCalendarNavigatorLabels = function () {
                                    };
                                    AdvCalendarNavigatorLabels.prototype =
                                        {
                                            month: "Month",
                                            year: "Year",
                                            submit: "OK",
                                            cancel: "Cancel"
                                        };
                                    AdvCalendarNavigator = function () {
                                    };
                                    AdvCalendarNavigator.prototype =
                                        {
                                            initialFocus: "year",
                                            strings: new AdvCalendarNavigatorLabels()
                                        };
                                    AdvCalendarDialogProperty = function () {
                                        this.context = new Array();
                                    };
                                    AdvCalendarDialogProperty.prototype =
                                        {
                                            context: null,
                                            visible: false,
                                            draggable: true,
                                            close: true,
                                            addContext: function (value) {
                                                this.context.push(value);
                                            }
                                        };
                                    var ADV_CHECKBOX_WIDTH = 0;
                                    AdvColumnSizer = function (textArray) {
                                        this.getNumberOfColumns = function (tableWidth, hasCheckBoxes) {
                                            var maxTextWidth1 = 0;
                                            var maxTextWidth2 = 0;
                                            for (var a = 0; a < textArray.length; a++) {
                                                var textWidth = _getTextWidthInPixels(textArray[a]);
                                                if (maxTextWidth1 < textWidth) {
                                                    maxTextWidth2 = maxTextWidth1;
                                                    maxTextWidth1 = textWidth;
                                                } else if (maxTextWidth2 < textWidth) {
                                                    maxTextWidth2 = textWidth;
                                                }
                                            }
                                            if (maxTextWidth1 == 0 || maxTextWidth2 == 0) {
                                                return 1;
                                            }
                                            if (hasCheckBoxes) {
                                                if (ADV_CHECKBOX_WIDTH == 0) {
                                                    ADV_CHECKBOX_WIDTH = _getTextWidthInPixels('<input type="checkbox"/>');
                                                    _getTextWidthInPixels('');
                                                }
                                                maxTextWidth1 += ADV_CHECKBOX_WIDTH;
                                                maxTextWidth2 += ADV_CHECKBOX_WIDTH;
                                            }
                                            if (maxTextWidth1 != maxTextWidth2 && tableWidth > maxTextWidth1) {
                                                var remainderWidth = tableWidth - maxTextWidth1;
                                                var n = Math.floor(remainderWidth / maxTextWidth2);
                                                if (n < 1) {
                                                    n = 1;
                                                }
                                                return n + 1;
                                            }
                                            var numberOfColumns = Math.floor(tableWidth / maxTextWidth1);
                                            if (numberOfColumns < 1) {
                                                numberOfColumns = 1;
                                            }
                                            return numberOfColumns;
                                        };

                                        function _getTextWidthInPixels(text) {
                                            var hiddenElem = document.getElementById("advColumnSizerTd");
                                            hiddenElem.innerHTML = text;
                                            var pixelWidth = hiddenElem.offsetWidth;
                                            return pixelWidth;
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2016  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <!--
COPYRIGHT NOTICE
Copyright (c) 2011  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    ProgressBar = function () {
                                        var _timer;
                                        this.startAfter = function (seconds) {
                                            _timer = setTimeout(_start, seconds * 1000);
                                        };
                                        this.close = function () {
                                            clearTimeout(_timer);
                                            $("#progressDialog").dialog("destroy");
                                        };

                                        function _start() {
                                            $("#progressDialog").dialog({
                                                modal: true, draggable: false, resizable: false,
                                                height: 100, position: 'center'
                                            });
                                            $("#progressBar").progressbar({value: 100});
                                        };
                                    };
                                    //-->
                                </script>
                                <script>
                                    <!--
                                    AdvSearchOptionHandler = function () {
                                        this.init = function () {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setDefaults();
                                            var elem = document.getElementById('projectOption');
                                            elem.checked = cookieManager.hasProjectSection();
                                            var elem = document.getElementById('subjectOption');
                                            elem.checked = cookieManager.hasSubjectSection();
                                            var elem = document.getElementById('projectSpecificOption');
                                            elem.checked = cookieManager.hasProjectSpecificSection();
                                            var elem = document.getElementById('assessmentOption');
                                            elem.checked = cookieManager.hasAssessmentSection();
                                            var elem = document.getElementById('visitOption');
                                            elem.checked = cookieManager.hasStudyVisitSection();
                                            var elem = document.getElementById('imageModalityOption');
                                            elem.checked = cookieManager.hasModalitySection();
                                            var elem = document.getElementById('imagingProtocolOption');
                                            elem.checked = cookieManager.hasProtocolSection();
                                            var elem = document.getElementById('imageQualityOption');
                                            elem.checked = cookieManager.hasQualitySection();
                                            var elem = document.getElementById('imageStatusOption');
                                            elem.checked = cookieManager.hasStatusSection();
                                            var elem = document.getElementById('originalOption');
                                            elem.checked = cookieManager.hasImgTypeOriginalSection();
                                            var elemPre = document.getElementById('preProcessedOption');
                                            elemPre.checked = cookieManager.hasImgTypePreProcessSection();
                                            var elemPost = document.getElementById('postProcessedOption');
                                            elemPost.checked = cookieManager.hasImgTypePostProcessSection();
                                            var elem = document.getElementById('imageProcessingOption');
                                            if (!elemPre.checked && !elemPost.checked) {
                                                elem.checked = false;
                                                elem.disabled = true;
                                            } else {
                                                elem.checked = cookieManager.hasProcessingSection();
                                            }
                                            var url = "/pages/ajax/search/advQueryOption";
                                            var callback = new IDA.connect.Callback(_createSections, _error, true);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.resetAll = function () {
                                            var builder = new AdvProjectBuilder();
                                            builder.reset();
                                            var builder = new AdvSubjectBuilder();
                                            builder.reset();
                                            var builder = new AdvProjectSpecificBuilder();
                                            builder.reset();
                                            var builder = new AdvAssessmentBuilder();
                                            builder.reset();
                                            var builder = new AdvStudyVisitBuilder();
                                            builder.reset();
                                            var builder = new AdvModalityBuilder();
                                            builder.reset();
                                            var builder = new AdvProtocolBuilder();
                                            builder.reset();
                                            var builder = new AdvQualityBuilder();
                                            builder.reset();
                                            var builder = new AdvStatusBuilder();
                                            builder.reset();
                                            var builder = new AdvProcessingBuilder();
                                            builder.reset();
                                            this.resetProjects();
                                        };
                                        this.projectsHaveChanged = function () {
                                            var url = "/pages/ajax/search/advQueryOption";
                                            var elems = document.getElementsByTagName("input");
                                            var delim = '?';
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'project_checkBox' && elems[i].checked) {
                                                    url += delim + 'project=' + elems[i].value;
                                                    delim = '&';
                                                }
                                            }
                                            var callback = new IDA.connect.Callback(_createSections, _error, false);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.resetProjects = function () {
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == 'displayInResult') {
                                                    var resetId = elems[i].id;
                                                    var components = resetId.split('.');
                                                    if (components[0] == 'RESET_PROJECT' ||
                                                        components[0] == 'RESET_MODALITY') {
                                                        elems[i].checked = false;
                                                    }
                                                }
                                            }
                                            var url = "/pages/ajax/search/advQueryOption?resetProjects=true";
                                            var callback = new IDA.connect.Callback(_createSections, _error, false);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.setProject = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setProjectSection(isChecked);
                                            var url = "/pages/ajax/search/advQueryOption";
                                            if (!isChecked) {
                                                url += "?resetProjects=true";
                                                var builder = new AdvProjectBuilder();
                                                builder.reset();
                                            }
                                            var callback = new IDA.connect.Callback(_createSections, _error, false);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.setSubject = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setSubjectSection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "subject";
                                                var callback = new IDA.connect.Callback(_createSubjectSection, _error,
                                                    false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvSubjectBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };
                                        this.setProjectSpecificInformation = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setProjectSpecificSection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "projectSpecific";
                                                var callback = new IDA.connect.Callback(_createProjectSpecificSection,
                                                    _error, false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvProjectSpecificBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };
                                        this.setAssessments = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setAssessmentSection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "assessment";
                                                var callback = new IDA.connect.Callback(_createAssessmentSection,
                                                    _error, false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvAssessmentBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };
                                        this.setStudyVisit = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setStudyVisitSection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "visit";
                                                var callback = new IDA.connect.Callback(_createStudyVisitSection,
                                                    _error, false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvStudyVisitBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };
                                        this.modalitiesHaveChanged = function () {
                                            var url = "/pages/ajax/search/advQueryOption?section=" +
                                                "modality";
                                            var elems = document.getElementsByTagName("input");
                                            for (var i = 0; i < elems.length; i++) {
                                                if (elems[i].name == "imgModality_checkBox" && elems[i].checked) {
                                                    url += '&modality=' + elems[i].value;
                                                }
                                            }
                                            var callback = new IDA.connect.Callback(_createModalitySection, _error,
                                                false);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.resetModalities = function () {
                                            var modalityBuilder = new AdvModalityBuilder();
                                            modalityBuilder.reset();
                                            var url = "/pages/ajax/search/advQueryOption?section=" +
                                                "modality&resetModality=true";
                                            var callback = new IDA.connect.Callback(_createModalitySection, _error,
                                                false);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.setModality = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setModalitySection(isChecked);
                                            var url = "/pages/ajax/search/advQueryOption?section=" +
                                                "modality";
                                            if (!isChecked) {
                                                url += "&resetModality=true";
                                            }
                                            var callback = new IDA.connect.Callback(_createModalitySection, _error,
                                                false);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.setProtocol = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setProtocolSection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "protocol";
                                                var callback = new IDA.connect.Callback(_createProtocolSection,
                                                    _error, false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvProtocolBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };
                                        this.setQuality = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setQualitySection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "quality";
                                                var callback = new IDA.connect.Callback(_createQualitySection,
                                                    _error, false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvQualityBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };
                                        this.setStatus = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setStatusSection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "status";
                                                var callback = new IDA.connect.Callback(_createStatusSection,
                                                    _error, false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvStatusBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };
                                        this.orderByHasChanged = function (menuId) {
                                            var url = "/pages/ajax/search/advQueryOption?section=" +
                                                "orderBy";
                                            var menuElem1 = document.getElementById('advOrderBy1');
                                            var menuItem1 = menuElem1[menuElem1.selectedIndex].value;
                                            url += "&orderBy1=" + menuItem1;
                                            if (menuId != 'advOrderBy1') {
                                                var menuElem2 = document.getElementById('advOrderBy2');
                                                if (menuElem2.selectedIndex > 0) {
                                                    var menuItem2 = menuElem2[menuElem2.selectedIndex].value;
                                                    url += "&orderBy2=" + menuItem2;
                                                }
                                                if (menuId != 'advOrderBy2') {
                                                    var menuElem3 = document.getElementById('advOrderBy3');
                                                    if (menuElem3.selectedIndex > 0) {
                                                        var menuItem3 = menuElem3[menuElem3.selectedIndex].value;
                                                        url += "&orderBy3=" + menuItem3;
                                                    }
                                                }
                                            }
                                            var callback = new IDA.connect.Callback(_createOrderBySection, _error,
                                                false);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.setImageProcessing = function (isChecked) {
                                            _setImageProcessing(isChecked);
                                        };
                                        this.setOriginal = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setImgTypeOriginalSection(isChecked);
                                        };
                                        this.setPreProcessed = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setImgTypePreProcessSection(isChecked);
                                            _updateImageProcessing();
                                        };
                                        this.setPostProcessed = function (isChecked) {
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setImgTypePostProcessSection(isChecked);
                                            _updateImageProcessing();
                                        };
                                        this.submit = function (e) {
                                            e.preventDefault();
                                            if (_validateImageId.call($("#imageIdText").get()[0])) {
                                                $('#imageIdText').focus();
                                            } else if (_validateStudyDate.call($("#advCalText1").get()[0])) {
                                                $("#advCalText1").focus();
                                            } else if (_validateStudyDate.call($("#advCalText2").get()[0])) {
                                                $('#advCalText2').focus();
                                            } else if (_validateArchiveDate.call($('#advCalText3').get()[0])) {
                                                $('#advCalText3').focus();
                                            } else if (_validateArchiveDate.call($('#advCalText4').get()[0])) {
                                                $('#advCalText4').focus();
                                            } else {
                                                var progressBar = new ProgressBar();
                                                progressBar.startAfter(3);
                                                $('#advancedQuery').submit();
                                            }
                                        };

                                        function _setImageProcessing(isChecked) {
                                            var elem = document.getElementById('imageProcessingOption');
                                            elem.checked = isChecked;
                                            var cookieManager = new AdvCookieManager();
                                            cookieManager.setProcessingSection(isChecked);
                                            if (isChecked) {
                                                var url = "/pages/ajax/search/advQueryOption?section=" +
                                                    "processing";
                                                var callback = new IDA.connect.Callback(_createProcessingSection,
                                                    _error, false);
                                                YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                            } else {
                                                var builder = new AdvProcessingBuilder();
                                                builder.hide();
                                                builder.reset();
                                            }
                                        };

                                        function _updateImageProcessing() {
                                            var elemPre = document.getElementById('preProcessedOption');
                                            var elemPost = document.getElementById('postProcessedOption');
                                            var elem = document.getElementById('imageProcessingOption');
                                            var cookieManager = new AdvCookieManager();
                                            if (!elemPre.checked && !elemPost.checked) {
                                                _setImageProcessing(false);
                                            } else {
                                                _setImageProcessing(cookieManager.hasProcessingSection());
                                            }
                                            elem.disabled = (!elemPre.checked && !elemPost.checked);
                                        };

                                        function _createSections(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var elem = document.getElementById('projectOption');
                                            var projectBuilder = new AdvProjectBuilder(isInit);
                                            if (elem.checked) {
                                                var projects = decoder.getProjects();
                                                var projectPhases = decoder.getProjectPhases();
                                                projectBuilder.build(projects, projectPhases);
                                                var noSelectedProj = 0;
                                                for (var i = 0; i < projects.length; i++) {
                                                    if (projects[i].isSelected()) {
                                                        noSelectedProj++;
                                                    }
                                                }
                                                if (noSelectedProj == 1) {
                                                    $('#RESET_PROJECT\\.0').removeAttr('checked');
                                                }
                                                if (numberOfSelectedProjects == 1 && noSelectedProj > 1) {
                                                    $('#RESET_PROJECT\\.0').attr('checked', true);
                                                }
                                                numberOfSelectedProjects = noSelectedProj;
                                            } else {
                                                projectBuilder.hide();
                                            }
                                            var elem = document.getElementById('subjectOption');
                                            if (elem.checked) {
                                                _createSubjectSection(o);
                                            } else {
                                                var subjectBuilder = new AdvSubjectBuilder();
                                                subjectBuilder.hide();
                                                subjectBuilder.reset();
                                            }
                                            var elem = document.getElementById('projectSpecificOption');
                                            var specifics = decoder.getProjectSpecifics();
                                            if (specifics.length == 0) {
                                                elem.checked = false;
                                                elem.disabled = true;
                                                var specificBuilder = new AdvProjectSpecificBuilder();
                                                specificBuilder.hide();
                                                specificBuilder.reset();
                                            } else if (elem.checked) {
                                                elem.disabled = false;
                                                _createProjectSpecificSection(o);
                                            } else {
                                                elem.disabled = false;
                                                var specificBuilder = new AdvProjectSpecificBuilder();
                                                specificBuilder.hide();
                                                specificBuilder.reset();
                                            }
                                            var elem = document.getElementById('assessmentOption');
                                            var assessments = decoder.getAssessments();
                                            if (assessments.length == 0) {
                                                elem.checked = false;
                                                elem.disabled = true;
                                                var assessmentBuilder = new AdvAssessmentBuilder();
                                                assessmentBuilder.hide();
                                                assessmentBuilder.reset();
                                            } else if (elem.checked) {
                                                elem.disabled = false;
                                                _createAssessmentSection(o);
                                            } else {
                                                elem.disabled = false;
                                                var assessmentBuilder = new AdvAssessmentBuilder();
                                                assessmentBuilder.hide();
                                                assessmentBuilder.reset();
                                            }
                                            var elem = document.getElementById('visitOption');
                                            if (elem.checked) {
                                                _createStudyVisitSection(o);
                                            } else {
                                                var visitBuilder = new AdvStudyVisitBuilder();
                                                visitBuilder.hide();
                                                visitBuilder.reset();
                                            }
                                            $('#imageIdText').bind("keyup blur", _validateImageId);
                                            $('#advCalText1,#advCalText2').bind("keyup", _validateStudyDate);
                                            $('#advCalText3,#advCalText4').bind("keyup", _validateArchiveDate);
                                            _createModalitySection(o);
                                            var elem = document.getElementById('imageQualityOption');
                                            var qualityGroups = decoder.getImageQualityGroups();
                                            if (qualityGroups.length == 0) {
                                                elem.checked = false;
                                                elem.disabled = true;
                                                var qualityBuilder = new AdvQualityBuilder();
                                                qualityBuilder.hide();
                                                qualityBuilder.reset();
                                            } else if (elem.checked) {
                                                elem.disabled = false;
                                                _createQualitySection(o);
                                            } else {
                                                elem.disabled = false;
                                                var qualityBuilder = new AdvQualityBuilder();
                                                qualityBuilder.hide();
                                                qualityBuilder.reset();
                                            }
                                            var elem = document.getElementById('imageStatusOption');
                                            var statuses = decoder.getImageStatuses();
                                            if (statuses.length == 0) {
                                                elem.checked = false;
                                                elem.disabled = true;
                                                var statusBuilder = new AdvStatusBuilder();
                                                statusBuilder.hide();
                                                statusBuilder.reset();
                                            } else if (elem.checked) {
                                                elem.disabled = false;
                                                _createStatusSection(o);
                                            } else {
                                                elem.disabled = false;
                                                var statusBuilder = new AdvStatusBuilder();
                                                statusBuilder.hide();
                                                statusBuilder.reset();
                                            }
                                            _createOrderBySection(o);
                                            var elem = document.getElementById('imageProcessingOption');
                                            if (elem.checked) {
                                                _createProcessingSection(o);
                                            } else {
                                                var processingBuilder = new AdvProcessingBuilder();
                                                processingBuilder.hide();
                                                processingBuilder.reset();
                                            }
                                        };

                                        function _createSubjectSection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var subjectBuilder = new AdvSubjectBuilder(isInit);
                                            var ids = decoder.getSubjectIds();
                                            var ages = decoder.getSubjectAges();
                                            var sex = decoder.getSubjectSex();
                                            var weights = decoder.getSubjectWeights();
                                            var researchGroups = decoder.getResearchGroups();
                                            var speciesGroups = decoder.getSpecies();
                                            subjectBuilder.build(ids, ages, sex, weights, researchGroups,
                                                speciesGroups);
                                        };

                                        function _createProjectSpecificSection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var specificBuilder = new AdvProjectSpecificBuilder(isInit);
                                            var specifics = decoder.getProjectSpecifics();
                                            specificBuilder.build(specifics);
                                        };

                                        function _createAssessmentSection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var assessmentBuilder = new AdvAssessmentBuilder(isInit);
                                            var assessments = decoder.getAssessments();
                                            assessmentBuilder.build(assessments);
                                        };

                                        function _createStudyVisitSection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var visitBuilder = new AdvStudyVisitBuilder(isInit);
                                            var studyDates = decoder.getStudyDates();
                                            var archiveDates = decoder.getArchiveDates();
                                            var visits = decoder.getVisits();
                                            visitBuilder.build(studyDates, archiveDates, visits);
                                        };

                                        function _createModalitySection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var modalityBuilder = new AdvModalityBuilder(isInit);
                                            var elem = document.getElementById('imageModalityOption');
                                            if (elem.checked) {
                                                var imageDesc = decoder.getImageDescription();
                                                var imageDataIds = decoder.getImageDataIds();
                                                var isModalityOr = decoder.isModalityOr();
                                                var modalities = decoder.getModalities();
                                                modalityBuilder.build(imageDesc, imageDataIds, isModalityOr, modalities);
                                            } else {
                                                modalityBuilder.hide();
                                                modalityBuilder.reset();
                                            }
                                            _createProtocolSection(o);
                                        };

                                        function _createProtocolSection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var protocolBuilder = new AdvProtocolBuilder(isInit);
                                            var protocols = decoder.getImagingProtocols();
                                            protocolBuilder.build(protocols);
                                        };

                                        function _createQualitySection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var qualityBuilder = new AdvQualityBuilder(isInit);
                                            var qualityGroups = decoder.getImageQualityGroups();
                                            qualityBuilder.build(qualityGroups);
                                        };

                                        function _createStatusSection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var statusBuilder = new AdvStatusBuilder(isInit);
                                            var statuses = decoder.getImageStatuses();
                                            statusBuilder.build(statuses);
                                        };

                                        function _createProcessingSection(o) {
                                            var isInit = o.argument.arg;
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var processingBuilder = new AdvProcessingBuilder(isInit);
                                            var fileTypes = decoder.getFileTypes();
                                            var structures = decoder.getStructures();
                                            var tissueTypes = decoder.getTissueTypes();
                                            var lateralities = decoder.getLateralities();
                                            var registrations = decoder.getRegistrations();
                                            processingBuilder.build(fileTypes, structures, tissueTypes,
                                                lateralities, registrations);
                                        };

                                        function _createOrderBySection(o) {
                                            var menuElem1 = document.getElementById('advOrderBy1');
                                            var menuElem2 = document.getElementById('advOrderBy2');
                                            var menuElem3 = document.getElementById('advOrderBy3');
                                            var xml = o.responseXML.documentElement;
                                            var decoder = new AdvOptionDecoder(xml);
                                            var orderBys = decoder.getOrderBys();
                                            if (orderBys[0] != undefined) {
                                                menuElem1.length = 0;
                                                var menuOptions = _getOrderByMenuOptions(orderBys[0]);
                                                for (var i = 0; i < menuOptions.length; i++) {
                                                    menuElem1.options[i] = menuOptions[i];
                                                }
                                                menuElem2.disabled = true;
                                                menuElem2.length = 0;
                                                menuElem3.disabled = true;
                                                menuElem3.length = 0;
                                            }
                                            if (orderBys[1] != undefined) {
                                                menuElem2.disabled = false;
                                                menuElem2.length = 0;
                                                menuElem2.options[0] = new Option('', '');
                                                var menuOptions = _getOrderByMenuOptions(orderBys[1]);
                                                for (var i = 0; i < menuOptions.length; i++) {
                                                    menuElem2.options[i + 1] = menuOptions[i];
                                                }
                                                menuElem3.disabled = true;
                                                menuElem3.length = 0;
                                            }
                                            if (orderBys[2] != undefined) {
                                                menuElem3.disabled = false;
                                                menuElem3.length = 0;
                                                menuElem3.options[0] = new Option('', '');
                                                var menuOptions = _getOrderByMenuOptions(orderBys[2]);
                                                for (var i = 0; i < menuOptions.length; i++) {
                                                    menuElem3.options[i + 1] = menuOptions[i];
                                                }
                                            }
                                        };

                                        function _getOrderByMenuOptions(set) {
                                            var menuOptions = new Array();
                                            var options = set.getOptions();
                                            for (var i = 0; i < options.length; i++) {
                                                var displayName = '';
                                                if (options[i].getValue() == 'SUBJECT_ID') {
                                                    displayName = 'Subject ID';
                                                }
                                                if (options[i].getValue() == 'RESEARCH_GROUP') {
                                                    displayName = 'Research Group';
                                                }
                                                if (options[i].getValue() == 'SEX') {
                                                    displayName = 'Sex';
                                                }
                                                if (options[i].getValue() == 'SPECIES') {
                                                    displayName = 'Species';
                                                }
                                                var isSelected = options[i].isSelected();
                                                menuOptions.push(new Option(displayName, options[i].getValue(),
                                                    isSelected));
                                            }
                                            return menuOptions;
                                        };

                                        function _isDateValid(txtDate) {
                                            var currVal = txtDate;
                                            if (currVal == '')
                                                return false;
                                            var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/;
                                            var dtArray = currVal.match(rxDatePattern);
                                            if (dtArray == null)
                                                return false;
                                            dtMonth = dtArray[1];
                                            dtDay = dtArray[3];
                                            dtYear = dtArray[5];
                                            if (dtMonth < 1 || dtMonth > 12)
                                                return false;
                                            else if (dtDay < 1 || dtDay > 31)
                                                return false;
                                            else if ((dtMonth == 4 || dtMonth == 6 || dtMonth == 9 || dtMonth == 11) && dtDay == 31)
                                                return false;
                                            else if (dtMonth == 2) {
                                                var isleap = (dtYear % 4 == 0 && (dtYear % 100 != 0 || dtYear % 400 == 0));
                                                if (dtDay > 29 || (dtDay == 29 && !isleap))
                                                    return false;
                                            }
                                            return true;
                                        };

                                        function _validateImageId(e) {
                                            if (e && (e.keyCode == 16 || e.keyCode == 17)) {
                                                return;
                                            }
                                            var msg = '<br>Please use the Subject ID field above to search for ' +
                                                'subjects<br>or the Image Description field above to ' +
                                                'search for image descriptions';
                                            if (/[^0-9iI\,\ ]/g.test(this.value)) {
                                                msg = '<br>Image Id has invalid characters';
                                            } else if (/([0-9]+[iI])/g.test(this.value)) {
                                                var newIds = '';
                                                var delim = '';
                                                var ids = this.value.split(',');
                                                for (var i = 0; i < ids.length; i++) {
                                                    var newId = ids[i];
                                                    if (/([0-9]+[iI])/g.test(newId)) {
                                                        newId = newId.replace(/[iI]/g, '');
                                                    }
                                                    newIds += delim + newId;
                                                    delim = ',';
                                                }
                                                this.value = newIds;
                                            } else if (/([iI]){2,}/g.test(this.value)) {
                                                this.value = this.value.replace(/([iI]){2,}/g, 'I');
                                            } else {
                                                msg = '';
                                            }
                                            var ids = this.value.split(',');
                                            for (var i = 0; i < ids.length; i++) {
                                                var newId = ids[i].replace(/[iI]/g, '');
                                                if (newId > 16777215) {
                                                    msg = '<br>Maximum value for Image Id is 16777215';
                                                }
                                            }
                                            $('#imgIdInfo').html(msg);
                                            return msg ? true : false;
                                        };

                                        function _validateStudyDate(e) {
                                            if (e && (e.keyCode == 16 || e.keyCode == 17)) {
                                                return;
                                            }
                                            var msg = '';
                                            if (this.value != '') {
                                                msg = '<br>The date is formatted incorrectly.' +
                                                    ' Please enter as mm/dd/yyyy';
                                                if (_isDateValid(this.value)) {
                                                    msg = '';
                                                }
                                            }
                                            $('#dateInfo1').html(msg);
                                            return msg ? true : false;
                                        };

                                        function _validateArchiveDate(e) {
                                            if (e && (e.keyCode == 16 || e.keyCode == 17)) {
                                                return;
                                            }
                                            var msg = '';
                                            if (this.value != '') {
                                                var msg = '<br>The date is formatted incorrectly.' +
                                                    ' Please enter as mm/dd/yyyy';
                                                if (_isDateValid(this.value)) {
                                                    msg = '';
                                                }
                                            }
                                            $('#dateInfo2').html(msg);
                                            return msg ? true : false;
                                        };

                                        function _error(o) {
                                        };
                                    };
                                    //-->
                                </script>


                                <script>
                                    <!--

                                    // Initialize the number of selected projects
                                    var numberOfSelectedProjects = 0;

                                    /** Initialize the advanced search tab. */
                                    function initAdvSearchTab() {
                                        // Initialize the search options
                                        var searchOptionHandler = new AdvSearchOptionHandler();
                                        searchOptionHandler.init();

                                        // Build the modality and/or radio buttons
                                        var andOrBuilder = new AdvOrAndBuilder();
                                        andOrBuilder.build('advImgModRadio', 'imgModality_andOr', true);

                                        // Build the study date calendars
                                        var calendarBuilder = new AdvCalendarBuilder('advCalText1', 'advCalendar1',
                                            'advCalDialog1', clearErrorMsg1);
                                        calendarBuilder.build();
                                        var calendarBuilder = new AdvCalendarBuilder('advCalText2', 'advCalendar2',
                                            'advCalDialog2', clearErrorMsg1);
                                        calendarBuilder.build();
                                        var calendarBuilder = new AdvCalendarBuilder('advCalText3', 'advCalendar3',
                                            'advCalDialog3', clearErrorMsg2);
                                        calendarBuilder.build();
                                        var calendarBuilder = new AdvCalendarBuilder('advCalText4', 'advCalendar4',
                                            'advCalDialog4', clearErrorMsg2);
                                        calendarBuilder.build();

                                        function clearErrorMsg1() {
                                            $('#dateInfo1').html('');
                                        }

                                        function clearErrorMsg2() {
                                            $('#dateInfo2').html('');
                                        }

                                    }

                                    //-->
                                </script>

                                <form name="advancedQuery" id="advancedQuery" method="POST" action="search.jsp">
                                    <input type="hidden" name="tab" value="advResult">


                                    <table width="100%" cellspacing="3" cellpadding="0" border="0">

                                        <tbody>
                                        <tr valign="top">
                                            <td width="20%">


                                                <table width="100%" cellspacing="3" cellpadding="3" border="0">

                                                    <tbody>
                                                    <tr valign="top">
                                                        <td>


                                                            <table width="100%" cellspacing="0" cellpadding="0"
                                                                   border="1">
                                                                <tbody>
                                                                <tr valign="top">
                                                                    <td>
                                                                        <table width="100%" cellspacing="0"
                                                                               cellpadding="3">
                                                                            <tbody>
                                                                            <tr>
                                                                                <td colspan="2">
                                                                                    <div id="ida-advQuery-search-options">
                                                                                        <b>Search Options</b>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>

                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td nowrap="">
                                                                                    <input type="checkbox"
                                                                                           name="excludeDownloads"
                                                                                           value="true"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Exclude Previous Downloads</label>
                                                                                </td>
                                                                            </tr>


                                                                            <tr>
                                                                                <td class="ida-advQuery-darkBgDivider"
                                                                                    colspan="2" align="center">
                                                                                    SEARCH SECTION
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td width="13%">&nbsp;</td>
                                                                                <td width="87%">
                                                                                    <input type="checkbox"
                                                                                           id="projectOption"
                                                                                           name="projectOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setProject(this.checked);"
                                                                                           style="vertical-align:middle"
                                                                                           checked="" disabled=""><label
                                                                                        style="vertical-align:middle">
                                                                                    Project/Phase</label>
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="subjectOption"
                                                                                           name="subjectOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setSubject(this.checked);"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Subject</label>
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td nowrap=""><input type="checkbox"
                                                                                                     id="projectSpecificOption"
                                                                                                     name="projectSpecificOption"
                                                                                                     value="true"
                                                                                                     onclick="var handler = new AdvSearchOptionHandler(); handler.setProjectSpecificInformation(this.checked);"
                                                                                                     style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Subject Specific Information</label>
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="assessmentOption"
                                                                                           name="assessmentOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setAssessments(this.checked);"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Assessments</label></td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="visitOption"
                                                                                           name="visitOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setStudyVisit(this.checked);"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Study/Visit</label></td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="imageModalityOption"
                                                                                           name="imageModalityOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setModality(this.checked);"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Image</label></td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="imagingProtocolOption"
                                                                                           name="imagingProtocolOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setProtocol(this.checked);"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Imaging Protocol</label></td>
                                                                            </tr>
                                                                            <tr id="lightBgColor" style="display:none">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="imageQualityOption"
                                                                                           name="imageQualityOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setQuality(this.checked);"
                                                                                           style="vertical-align:middle"
                                                                                           disabled=""><label
                                                                                        style="vertical-align:middle">
                                                                                    Image Quality</label></td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="imageStatusOption"
                                                                                           name="imageStatusOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setStatus(this.checked);"
                                                                                           style="vertical-align:middle"
                                                                                           disabled=""><label
                                                                                        style="vertical-align:middle">
                                                                                    Image Status</label></td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           id="imageProcessingOption"
                                                                                           name="imageProcessingOption"
                                                                                           value="true"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setImageProcessing(this.checked);"
                                                                                           style="vertical-align:middle"
                                                                                           disabled=""><label
                                                                                        style="vertical-align:middle">
                                                                                    Image Processing</label></td>
                                                                            </tr>


                                                                            <tr>
                                                                                <td class="ida-advQuery-darkBgDivider"
                                                                                    colspan="2" align="center">
                                                                                    IMAGE TYPES
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td width="13%">&nbsp;</td>
                                                                                <td width="87%"><input type="checkbox"
                                                                                                       name="imgType"
                                                                                                       id="originalOption"
                                                                                                       value="1"
                                                                                                       onclick="var handler = new AdvSearchOptionHandler(); handler.setOriginal(this.checked)"
                                                                                                       style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Original</label>
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td>
                                                                                    <input type="checkbox"
                                                                                           name="imgType"
                                                                                           id="preProcessedOption"
                                                                                           value="2"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setPreProcessed(this.checked)"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Pre-processed</label>
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="lightBgColor">
                                                                                <td>&nbsp;</td>
                                                                                <td><input type="checkbox"
                                                                                           name="imgType"
                                                                                           id="postProcessedOption"
                                                                                           value="4"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.setPostProcessed(this.checked)"
                                                                                           style="vertical-align:middle"><label
                                                                                        style="vertical-align:middle">
                                                                                    Post-processed</label></td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                    <tr valign="top">
                                                        <td>


                                                            <table width="100%" cellspacing="0" cellpadding="0"
                                                                   border="1">
                                                                <tbody>
                                                                <tr valign="top">
                                                                    <td>
                                                                        <table id="lightBgColor" width="100%"
                                                                               cellspacing="0" cellpadding="2">
                                                                            <tbody>
                                                                            <tr>
                                                                                <td colspan="2">
                                                                                    <div id="ida-advQuery-display-options">
                                                                                        <b>Display Options</b>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td nowrap="">Order by:</td>
                                                                                <td>
                                                                                    <select name="advOrderBy1"
                                                                                            id="advOrderBy1"
                                                                                            onchange="var handler = new AdvSearchOptionHandler(); handler.orderByHasChanged(this.id);">
                                                                                        <option value="SUBJECT_ID"
                                                                                                selected="">Subject ID
                                                                                        </option>
                                                                                        <option value="RESEARCH_GROUP">
                                                                                            Research Group
                                                                                        </option>
                                                                                        <option value="SEX">Sex</option>
                                                                                    </select>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td align="center">and</td>
                                                                                <td>
                                                                                    <select name="advOrderBy2"
                                                                                            id="advOrderBy2"
                                                                                            onchange="var handler = new AdvSearchOptionHandler(); handler.orderByHasChanged(this.id);">
                                                                                        <option value=""></option>
                                                                                        <option value="RESEARCH_GROUP">
                                                                                            Research Group
                                                                                        </option>
                                                                                        <option value="SEX">Sex</option>
                                                                                    </select>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td align="center">and</td>
                                                                                <td>
                                                                                    <select name="advOrderBy3"
                                                                                            id="advOrderBy3"
                                                                                            onchange="var handler = new AdvSearchOptionHandler(); handler.orderByHasChanged(this.id);"
                                                                                            disabled="">
                                                                                    </select>
                                                                                </td>
                                                                            </tr>

                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>


                                                    <tr>
                                                        <td>
                                                            <table class="ida-advQuery-column-sizer" cellspacing="0"
                                                                   cellpadding="0">
                                                                <tbody>
                                                                <tr>
                                                                    <td id="advColumnSizerTd" nowrap="">T2</td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>

                                                    </tbody>
                                                </table>
                                            </td>
                                            <td width="80%">


                                                <table width="100%" cellspacing="3" cellpadding="3" border="0">


                                                    <tbody>
                                                    <tr valign="top">
                                                        <td>
                                                            <table width="100%" cellspacing="0" cellpadding="0"
                                                                   border="1">
                                                                <tbody>
                                                                <tr valign="top">
                                                                    <td align="center">


                                                                        <div id="ida-advQuery-search-criteria"><b>Search
                                                                            Criteria</b></div>


                                                                        <table width="96%" cellspacing="0"
                                                                               cellpadding="0">
                                                                            <tbody>
                                                                            <tr valign="top">
                                                                                <td width="10%" align="left">


                                                                                    <input type="button"
                                                                                           value="RESET ALL"
                                                                                           id="reloading" class="button"
                                                                                           onmouseover="this.className='buttonHover'"
                                                                                           onmouseout="this.className='button'"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.resetAll(); return false;">
                                                                                </td>
                                                                                <td style="padding-right:5px;padding-left:10px;padding-bottom:3px"
                                                                                    width="80%">
                                                                                    Specify selection criteria using the
                                                                                    checkboxes on the left. Wild cards
                                                                                    (*) are permitted in fields marked
                                                                                    with a star below. For example,
                                                                                    "rest*" returns results that begin
                                                                                    with "rest."
                                                                                </td>
                                                                                <td width="10%" align="right">


                                                                                    <input type="submit" value="SEARCH"
                                                                                           id="advSearchQuery"
                                                                                           onmouseover="this.className='buttonHover'"
                                                                                           onmouseout="this.className='button'"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.submit(event);"
                                                                                           class="button">
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>


                                                                        <div id="projectElems" style="display:block">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="5">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    PROJECT/PHASE
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="project_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var projectHandler = new AdvProjectBuilder(); projectHandler.reset(); var handler = new AdvSearchOptionHandler(); handler.resetProjects(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr valign="middle">
                                                                                    <td id="projectCol1" width="5%">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                    <td class="bodyTextBold"
                                                                                        id="projectCol2" width="17%">
                                                                                        Projects
                                                                                    </td>
                                                                                    <td id="projectHolder" width="63%">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0"
                                                                                               border="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td nowrap=""><input
                                                                                                        type="checkbox"
                                                                                                        style="vertical-align:middle"
                                                                                                        name="project_checkBox"
                                                                                                        value="ADNI"
                                                                                                        onclick="var hlr=new AdvSearchOptionHandler();hlr.projectsHaveChanged();"
                                                                                                        checked=""><label
                                                                                                        style="vertical-align:middle">ADNI</label>
                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td nowrap=""><input
                                                                                                        type="checkbox"
                                                                                                        style="vertical-align:middle"
                                                                                                        name="project_checkBox"
                                                                                                        value="HCP"
                                                                                                        onclick="var hlr=new AdvSearchOptionHandler();hlr.projectsHaveChanged();"><label
                                                                                                        style="vertical-align:middle">HCP</label>
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                    <td id="projectCol4" width="10%"
                                                                                        align="right">
                                                                                        <input type="checkbox"
                                                                                               value="PROJECT"
                                                                                               id="RESET_PROJECT.0"
                                                                                               name="displayInResult">
                                                                                    </td>
                                                                                    <td id="projectCol5" width="5%"
                                                                                        align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>


                                                                            <div id="phaseHolder">
                                                                                <table class="ida-search-contentBgColor"
                                                                                       width="96%" cellspacing="0"
                                                                                       cellpadding="0" border="0">
                                                                                    <tbody>
                                                                                    <tr valign="top">
                                                                                        <td width="0"></td>
                                                                                        <td width="0"></td>
                                                                                        <td colspan="1" width="0"></td>
                                                                                        <td width="0"></td>
                                                                                        <td width="0"></td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>&nbsp;</td>
                                                                                        <td class="bodyTextBold">
                                                                                            (ADNI)
                                                                                        </td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="projectPhase_checkBox"
                                                                                                id="projectPhase_checkBox1"
                                                                                                value="ADNI_1"><label
                                                                                                style="vertical-align:middle">ADNI
                                                                                            1</label></td>
                                                                                        <td align="right"><input
                                                                                                type="checkbox"
                                                                                                name="displayInResult"
                                                                                                id="RESET_PROJECT_PHASE.0"
                                                                                                value="PHASE"></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="projectPhase_checkBox"
                                                                                                id="projectPhase_checkBox2"
                                                                                                value="ADNI_2"><label
                                                                                                style="vertical-align:middle">ADNI
                                                                                            GO</label></td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="projectPhase_checkBox"
                                                                                                id="projectPhase_checkBox3"
                                                                                                value="ADNI_3"><label
                                                                                                style="vertical-align:middle">ADNI
                                                                                            2</label></td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="projectPhase_checkBox"
                                                                                                id="projectPhase_checkBox4"
                                                                                                value="ADNI_4"><label
                                                                                                style="vertical-align:middle">ADNI
                                                                                            3</label></td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>


                                                                        <div id="subjectElems" style="display:block">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="5">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">SUBJECT
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="subject_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var subjectBuilder = new AdvSubjectBuilder(); subjectBuilder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td colspan="5" height="2px"></td>
                                                                                </tr>


                                                                                <tr>
                                                                                    <td id="subjectCol1" width="5%">
                                                                                    </td>
                                                                                    <td class="bodyTextBold"
                                                                                        id="subjectCol2" width="17%">
                                                                                        Subject ID &nbsp; *
                                                                                    </td>
                                                                                    <td id="subjectCol3"
                                                                                        class="ida-advQuery-information"
                                                                                        width="63%" nowrap="">
                                                                                        <input type="text"
                                                                                               name="advSubjectId"
                                                                                               id="subjectIdText"
                                                                                               value="">
                                                                                        &nbsp;Separate multiple Subject
                                                                                        ID's by commas
                                                                                    </td>
                                                                                    <td id="subjectCol4" width="10%"
                                                                                        align="right">
                                                                                        <input type="checkbox"
                                                                                               checked="" disabled="">
                                                                                        <input type="hidden"
                                                                                               value="SUBJECT.SUBJECT_ID"
                                                                                               name="displayInResult">
                                                                                    </td>
                                                                                    <td id="subjectCol5" width="5%"
                                                                                        align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>


                                                                                <tr>
                                                                                    <td colspan="5" height="2px"></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>&nbsp;</td>
                                                                                    <td class="bodyTextBold">Age
                                                                                        (years)
                                                                                    </td>
                                                                                    <td>
                                                                                        <table cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <div id="advAgeMenuVal">
                                                                                                        <select name="advAgeMenu"
                                                                                                                id="advAgeMenu"
                                                                                                                onchange="var builder = new AdvNumericBuilder(); builder.build('advAge','advAgeMenuVal',document.getElementById('advAgeMenu')[document.getElementById('advAgeMenu').selectedIndex].value=='equals','advAgeVal','advAge_textBox',document.getElementById('advAgeTextBox1').value, '');">
                                                                                                            <option value="equals"
                                                                                                                    selected="">
                                                                                                                Equals
                                                                                                            </option>
                                                                                                            <option value="between">
                                                                                                                Between
                                                                                                            </option>
                                                                                                        </select></div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div id="advAgeVal">
                                                                                                        &nbsp;<input
                                                                                                            type="text"
                                                                                                            size="8"
                                                                                                            id="advAgeTextBox1"
                                                                                                            name="advAge_textBox"
                                                                                                            value=""
                                                                                                            onblur="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                            onkeyup="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                            onkeypress="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)">&nbsp;
                                                                                                    </div>
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               checked="" disabled="">
                                                                                        <input type="hidden"
                                                                                               value="SUBJECT.AGE"
                                                                                               name="displayInResult">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>


                                                                                <tr>
                                                                                    <td colspan="5" height="2px"></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>&nbsp;</td>
                                                                                    <td class="bodyTextBold">Sex</td>
                                                                                    <td>
                                                                                        <select name="advSex"
                                                                                                id="advSex">

                                                                                            <option value="OTHER">Both
                                                                                            </option>

                                                                                            <option value="FEMALE">
                                                                                                Female
                                                                                            </option>

                                                                                            <option value="MALE">Male
                                                                                            </option>

                                                                                            <option value="UNKNOWN">
                                                                                                Unknown
                                                                                            </option>

                                                                                        </select>
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               checked="" disabled="">
                                                                                        <input type="hidden"
                                                                                               value="SUBJECT.SUBJECT_SEX"
                                                                                               name="displayInResult">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>


                                                                                <tr>
                                                                                    <td colspan="5" height="2px"></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>&nbsp;</td>
                                                                                    <td class="bodyTextBold">Weight
                                                                                        (kgs)
                                                                                    </td>
                                                                                    <td>
                                                                                        <table cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <div id="advWeightMenuVal">
                                                                                                        <select name="advWeightMenu"
                                                                                                                id="advWeightMenu"
                                                                                                                onchange="var builder = new AdvNumericBuilder(); builder.build('advWeight','advWeightMenuVal',document.getElementById('advWeightMenu')[document.getElementById('advWeightMenu').selectedIndex].value=='equals','advWeightVal','weight_textBox',document.getElementById('advWeightTextBox1').value, '');">
                                                                                                            <option value="equals"
                                                                                                                    selected="">
                                                                                                                Equals
                                                                                                            </option>
                                                                                                            <option value="between">
                                                                                                                Between
                                                                                                            </option>
                                                                                                        </select></div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div id="advWeightVal">
                                                                                                        &nbsp;<input
                                                                                                            type="text"
                                                                                                            size="8"
                                                                                                            id="advWeightTextBox1"
                                                                                                            name="weight_textBox"
                                                                                                            value=""
                                                                                                            onblur="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                            onkeyup="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                            onkeypress="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)">&nbsp;
                                                                                                    </div>
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               value="SUBJECT.WEIGHT"
                                                                                               id="RESET_WEIGHT.0"
                                                                                               name="displayInResult">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>


                                                                            <div id="subjectHolder">
                                                                                <table class="ida-search-contentBgColor"
                                                                                       width="96%" cellspacing="0"
                                                                                       cellpadding="0" border="0">
                                                                                    <tbody>
                                                                                    <tr valign="top">
                                                                                        <td width="0"></td>
                                                                                        <td width="0"></td>
                                                                                        <td colspan="1" width="0"></td>
                                                                                        <td width="0"></td>
                                                                                        <td width="0"></td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>&nbsp;</td>
                                                                                        <td class="bodyTextBold">
                                                                                            Research Group
                                                                                        </td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox32"
                                                                                                value="32"><label
                                                                                                style="vertical-align:middle">MCI</label>
                                                                                        </td>
                                                                                        <td align="right"><input
                                                                                                type="checkbox"
                                                                                                name="displayInResult"
                                                                                                id="RESET_RESEARCH_GROUP.0"
                                                                                                value="SUBJECT.RESEARCH_GROUP">
                                                                                        </td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox33"
                                                                                                value="33"><label
                                                                                                style="vertical-align:middle">EMCI</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox34"
                                                                                                value="34"><label
                                                                                                style="vertical-align:middle">LMCI</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox2"
                                                                                                value="2"><label
                                                                                                style="vertical-align:middle">Patient</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox35"
                                                                                                value="35"><label
                                                                                                style="vertical-align:middle">AD</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox3"
                                                                                                value="3"><label
                                                                                                style="vertical-align:middle">Phantom</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox36"
                                                                                                value="36"><label
                                                                                                style="vertical-align:middle">SMC</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox4"
                                                                                                value="4"><label
                                                                                                style="vertical-align:middle">Volunteer</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td class="ida-advQuery-lightStripe"
                                                                                            nowrap=""><input
                                                                                                type="checkbox"
                                                                                                style="vertical-align:middle"
                                                                                                name="researchGroup_checkBox"
                                                                                                id="researchGroup_checkBox31"
                                                                                                value="31"><label
                                                                                                style="vertical-align:middle">CN</label>
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>&nbsp;</td>
                                                                                    </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>


                                                                        <div id="projectSpecificElems"
                                                                             style="display:none">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="6">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    SUBJECT SPECIFIC
                                                                                                    INFORMATION
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="projectSpecific_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var builder = new AdvProjectSpecificBuilder(); builder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>


                                                                                    <td id="psCol1" width="5%">
                                                                                    </td>
                                                                                    <td id="psCol2" width="8%">
                                                                                    </td>
                                                                                    <td id="psCol3" width="15%">
                                                                                    </td>
                                                                                    <td id="psCol4" width="57%">
                                                                                    </td>
                                                                                    <td id="psCol5" width="10%">
                                                                                    </td>
                                                                                    <td id="psCol6" width="5%">
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div id="projectSpecificHolder"></div>
                                                                        </div>


                                                                        <div id="assessmentElems" style="display:none">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="4">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    ASSESSMENTS
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="assessment_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var builder = new AdvAssessmentBuilder(); builder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr valign="top">
                                                                                    <td width="5%">&nbsp;</td>
                                                                                    <td id="assessmentHolder"
                                                                                        colspan="2" width="90%">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>


                                                                        <div id="visitElems" style="display: none;">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="5">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    STUDY/VISIT
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="visit_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var builder = new AdvStudyVisitBuilder(); builder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td colspan="5" height="2px"></td>
                                                                                </tr>
                                                                                <tr valign="middle">
                                                                                    <td width="5%">&nbsp;</td>
                                                                                    <td class="bodyTextBold"
                                                                                        width="15%">Study Date
                                                                                    </td>
                                                                                    <td id="studyHolder" width="65%">
                                                                                        <table cellspacing="0"
                                                                                               cellpadding="0"
                                                                                               border="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <select id="studyDate"
                                                                                                            onchange="if (value == 'equals') {document.getElementById('studyDateAnd').style.display = 'none'; document.getElementById('studyDateInput').style.display = 'none'; document.getElementById('advCalText2').value='';} else {document.getElementById('studyDateAnd').style.display = 'inline'; document.getElementById('studyDateInput').style.display = 'inline';}">
                                                                                                        <option value="equals">
                                                                                                            Equals
                                                                                                        </option>
                                                                                                        <option value="between">
                                                                                                            Between
                                                                                                        </option>
                                                                                                    </select>&nbsp;
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="advDatefield">
                                                                                                        <table>
                                                                                                            <tbody>
                                                                                                            <tr>
                                                                                                                <td>
                                                                                                                    <input type="text"
                                                                                                                           id="advCalText1"
                                                                                                                           name="advStudyDate"
                                                                                                                           size="10"
                                                                                                                           value="">
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <div id="studyDateAnd"
                                                                                                                         style="display: none;">
                                                                                                                        and
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <div id="studyDateInput"
                                                                                                                         style="display: none;">
                                                                                                                        <input type="text"
                                                                                                                               id="advCalText2"
                                                                                                                               name="advStudyDate"
                                                                                                                               size="10"
                                                                                                                               value="">
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                            </tbody>
                                                                                                        </table>
                                                                                                    </div>
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                        <span id="dateInfo1"
                                                                                              style="color:#FF0000"></span>
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               id="RESET_STUDY.0"
                                                                                               value="STUDY.STUDY_DATE"
                                                                                               name="displayInResult">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>

                                                                                </tr>
                                                                                <tr valign="middle">
                                                                                    <td width="5%">&nbsp;</td>
                                                                                    <td class="bodyTextBold" width="15%"
                                                                                        nowrap="">Archive Date
                                                                                    </td>
                                                                                    <td width="65%">
                                                                                        <table cellspacing="0"
                                                                                               cellpadding="0"
                                                                                               border="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <select id="archiveDate"
                                                                                                            onchange="if (value == 'equals') {document.getElementById('archiveDateAnd').style.display = 'none'; document.getElementById('archiveDateInput').style.display = 'none'; document.getElementById('advCalText4').value='';} else {document.getElementById('archiveDateAnd').style.display = 'inline'; document.getElementById('archiveDateInput').style.display = 'inline';}">
                                                                                                        <option value="equals">
                                                                                                            Equals
                                                                                                        </option>
                                                                                                        <option value="between">
                                                                                                            Between
                                                                                                        </option>
                                                                                                    </select>&nbsp;
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="advDatefield">
                                                                                                        <table>
                                                                                                            <tbody>
                                                                                                            <tr>
                                                                                                                <td>
                                                                                                                    <input type="text"
                                                                                                                           id="advCalText3"
                                                                                                                           name="archiveDate"
                                                                                                                           size="10"
                                                                                                                           value="">
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <div id="archiveDateAnd"
                                                                                                                         style="display: none;">
                                                                                                                        and
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <div id="archiveDateInput"
                                                                                                                         style="display: none;">
                                                                                                                        <input type="text"
                                                                                                                               id="advCalText4"
                                                                                                                               name="archiveDate"
                                                                                                                               size="10"
                                                                                                                               value="">
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                            </tbody>
                                                                                                        </table>
                                                                                                    </div>
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                        <span id="dateInfo2"
                                                                                              style="color:#FF0000"></span>
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               id="RESET_STUDY.1"
                                                                                               value="STUDY.ARCHIVE_DATE"
                                                                                               name="displayInResult">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>


                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr>
                                                                                    <td id="vCol1" width="5%">
                                                                                    </td>
                                                                                    <td id="vCol2" width="10%">
                                                                                    </td>
                                                                                    <td id="vCol3" width="45%">
                                                                                    </td>
                                                                                    <td id="vCol4" width="25%">
                                                                                    </td>
                                                                                    <td id="vCol5" width="10%">
                                                                                    </td>
                                                                                    <td id="vCol6" width="5%">
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div id="visitHolder"></div>
                                                                        </div>


                                                                        <div id="imgModElems" style="display: none;">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="6">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    IMAGE
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="imgModality_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.resetModalities(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <td colspan="6" height="2px"></td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <td width="5%">&nbsp;</td>
                                                                                    <td class="bodyTextBold"
                                                                                        style="vertical-align:top; padding-top:5px;"
                                                                                        width="10%" nowrap="">
                                                                                        Image Description &nbsp; *&nbsp;
                                                                                    </td>
                                                                                    <td class="ida-advQuery-information"
                                                                                        colspan="2" width="70%"
                                                                                        nowrap="">

                                                                                        <input type="text"
                                                                                               name="imgDesc"
                                                                                               id="imgDescText"
                                                                                               maxlength="64" value="">
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               checked="" disabled="">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <td width="5%">&nbsp;</td>
                                                                                    <td class="bodyTextBold"
                                                                                        style="vertical-align:top; padding-top:5px;"
                                                                                        width="10%">
                                                                                        Image ID
                                                                                    </td>
                                                                                    <td class="ida-advQuery-information"
                                                                                        colspan="2" width="70%"
                                                                                        nowrap="">
                                                                                        <input type="text" name="imgId"
                                                                                               id="imageIdText"
                                                                                               value="">
                                                                                        &nbsp;Separate multiple Image
                                                                                        ID's by commas (eg.
                                                                                        I123,I456,... or 123,456,...)
                                                                                        <span id="imgIdInfo"
                                                                                              style="color:#FF0000"></span>
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               value="IMAGE"
                                                                                               name="displayInResult"
                                                                                               id="RESET_MODALITY.1">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>

                                                                                <tr valign="center">
                                                                                    <td width="5%">&nbsp;</td>
                                                                                    <td class="bodyTextBold"
                                                                                        width="10%">Modality
                                                                                    </td>
                                                                                    <td id="imgModHolder" width="45%">
                                                                                    </td>
                                                                                    <td class="bodyTextBold"
                                                                                        width="25%">
                                                                                        <div id="advImgModRadio">
                                                                                            <table width="100%"
                                                                                                   cellspacing="0"
                                                                                                   cellpadding="0"
                                                                                                   border="0">
                                                                                                <tbody>
                                                                                                <tr valign="middle">
                                                                                                    <td class="ida-advQuery-information"
                                                                                                        width="45%"
                                                                                                        nowrap=""
                                                                                                        align="right">
                                                                                                        <input type="radio"
                                                                                                               name="imgModality_andOr"
                                                                                                               id="advImgModRadio_OR"
                                                                                                               value="OR"
                                                                                                               onclick="var builder = new AdvOrAndBuilder(); builder.changeDesc('advImgModRadio_desc', this.value == 'OR')"
                                                                                                               checked="">OR
                                                                                                    </td>
                                                                                                    <td width="10%"></td>
                                                                                                    <td class="ida-advQuery-information"
                                                                                                        width="45%"
                                                                                                        nowrap=""
                                                                                                        align="left">
                                                                                                        <input type="radio"
                                                                                                               name="imgModality_andOr"
                                                                                                               id="advImgModRadio_AND"
                                                                                                               value="AND"
                                                                                                               onclick="var builder = new AdvOrAndBuilder(); builder.changeDesc('advImgModRadio_desc', this.value == 'OR')">AND
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td class="ida-advQuery-information"
                                                                                                        colspan="3"
                                                                                                        nowrap=""
                                                                                                        align="center">
                                                                                                        <div id="advImgModRadio_desc">
                                                                                                            Subject has
                                                                                                            at least one
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               value="MODALITY"
                                                                                               name="displayInResult"
                                                                                               id="RESET_MODALITY.0">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>


                                                                        <div id="imgProElems" style="display: block;">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">


                                                                                <tbody>
                                                                                <tr>
                                                                                    <td id="ptCol1" width="5%">
                                                                                    </td>
                                                                                    <td id="ptCol2" width="7%">
                                                                                    </td>
                                                                                    <td id="ptCol3" width="23%">
                                                                                    </td>
                                                                                    <td id="ptCol4" width="50%">
                                                                                    </td>
                                                                                    <td id="ptCol5" width="10%">
                                                                                    </td>
                                                                                    <td id="ptCol6" width="5%">
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>


                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="6">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    IMAGING PROTOCOL
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="imgProtocol_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var builder = new AdvProtocolBuilder(); builder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>


                                                                                <tr>
                                                                                    <td colspan="6">
                                                                                        <div id="imgProHolder">
                                                                                            <table width="100%"
                                                                                                   cellspacing="0"
                                                                                                   cellpadding="0"
                                                                                                   border="0">
                                                                                                <tbody>
                                                                                                <tr>
                                                                                                    <td width="0"></td>
                                                                                                    <td class="bodyTextBold"
                                                                                                        width="0">(MRI)
                                                                                                    </td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Field Strength&nbsp;(tesla)&nbsp;
                                                                                                    </td>
                                                                                                    <td colspan="1">
                                                                                                        <table cellspacing="0"
                                                                                                               cellpadding="0">
                                                                                                            <tbody>
                                                                                                            <tr>
                                                                                                                <td>
                                                                                                                    <div id="imgProtocol_1_Field_Strength_MenuVal">
                                                                                                                        <select name="imgProtocol_1_Field_Strength_Menu"
                                                                                                                                id="imgProtocol_1_Field_Strength_Menu"
                                                                                                                                onchange="var builder = new AdvNumericBuilder(); builder.build('imgProtocol_1_Field_Strength_','imgProtocol_1_Field_Strength_MenuVal',document.getElementById('imgProtocol_1_Field_Strength_Menu')[document.getElementById('imgProtocol_1_Field_Strength_Menu').selectedIndex].value=='equals','imgProtocol_1_Field_Strength_Val','imgProtocol_1_Field_Strength_textBox',document.getElementById('imgProtocol_1_Field_Strength_TextBox1').value, '');">
                                                                                                                            <option value="equals"
                                                                                                                                    selected="">
                                                                                                                                Equals
                                                                                                                            </option>
                                                                                                                            <option value="between">
                                                                                                                                Between
                                                                                                                            </option>
                                                                                                                        </select>
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <div id="imgProtocol_1_Field_Strength_Val">
                                                                                                                        &nbsp;<input
                                                                                                                            type="text"
                                                                                                                            size="8"
                                                                                                                            id="imgProtocol_1_Field_Strength_TextBox1"
                                                                                                                            name="imgProtocol_1_Field_Strength_textBox"
                                                                                                                            value=""
                                                                                                                            onblur="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                                            onkeyup="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                                            onkeypress="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)">&nbsp;
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                            </tbody>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_NUMERIC.imgProtocol_1_Field_Strength"
                                                                                                               value="PROTOCOL.1.Field Strength">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Matrix Z&nbsp;&nbsp;
                                                                                                    </td>
                                                                                                    <td colspan="1">
                                                                                                        <table cellspacing="0"
                                                                                                               cellpadding="0">
                                                                                                            <tbody>
                                                                                                            <tr>
                                                                                                                <td>
                                                                                                                    <div id="imgProtocol_1_Matrix_Z_MenuVal">
                                                                                                                        <select name="imgProtocol_1_Matrix_Z_Menu"
                                                                                                                                id="imgProtocol_1_Matrix_Z_Menu"
                                                                                                                                onchange="var builder = new AdvNumericBuilder(); builder.build('imgProtocol_1_Matrix_Z_','imgProtocol_1_Matrix_Z_MenuVal',document.getElementById('imgProtocol_1_Matrix_Z_Menu')[document.getElementById('imgProtocol_1_Matrix_Z_Menu').selectedIndex].value=='equals','imgProtocol_1_Matrix_Z_Val','imgProtocol_1_Matrix_Z_textBox',document.getElementById('imgProtocol_1_Matrix_Z_TextBox1').value, '');">
                                                                                                                            <option value="equals"
                                                                                                                                    selected="">
                                                                                                                                Equals
                                                                                                                            </option>
                                                                                                                            <option value="between">
                                                                                                                                Between
                                                                                                                            </option>
                                                                                                                        </select>
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <div id="imgProtocol_1_Matrix_Z_Val">
                                                                                                                        &nbsp;<input
                                                                                                                            type="text"
                                                                                                                            size="8"
                                                                                                                            id="imgProtocol_1_Matrix_Z_TextBox1"
                                                                                                                            name="imgProtocol_1_Matrix_Z_textBox"
                                                                                                                            value=""
                                                                                                                            onblur="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                                            onkeyup="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                                            onkeypress="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)">&nbsp;
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                            </tbody>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_NUMERIC.imgProtocol_1_Matrix_Z"
                                                                                                               value="PROTOCOL.1.Matrix Z">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Slice Thickness&nbsp;(mm)&nbsp;
                                                                                                    </td>
                                                                                                    <td colspan="1">
                                                                                                        <table cellspacing="0"
                                                                                                               cellpadding="0">
                                                                                                            <tbody>
                                                                                                            <tr>
                                                                                                                <td>
                                                                                                                    <div id="imgProtocol_1_Slice_Thickness_MenuVal">
                                                                                                                        <select name="imgProtocol_1_Slice_Thickness_Menu"
                                                                                                                                id="imgProtocol_1_Slice_Thickness_Menu"
                                                                                                                                onchange="var builder = new AdvNumericBuilder(); builder.build('imgProtocol_1_Slice_Thickness_','imgProtocol_1_Slice_Thickness_MenuVal',document.getElementById('imgProtocol_1_Slice_Thickness_Menu')[document.getElementById('imgProtocol_1_Slice_Thickness_Menu').selectedIndex].value=='equals','imgProtocol_1_Slice_Thickness_Val','imgProtocol_1_Slice_Thickness_textBox',document.getElementById('imgProtocol_1_Slice_Thickness_TextBox1').value, '');">
                                                                                                                            <option value="equals"
                                                                                                                                    selected="">
                                                                                                                                Equals
                                                                                                                            </option>
                                                                                                                            <option value="between">
                                                                                                                                Between
                                                                                                                            </option>
                                                                                                                        </select>
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <div id="imgProtocol_1_Slice_Thickness_Val">
                                                                                                                        &nbsp;<input
                                                                                                                            type="text"
                                                                                                                            size="8"
                                                                                                                            id="imgProtocol_1_Slice_Thickness_TextBox1"
                                                                                                                            name="imgProtocol_1_Slice_Thickness_textBox"
                                                                                                                            value=""
                                                                                                                            onblur="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                                            onkeyup="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)"
                                                                                                                            onkeypress="var builder = new AdvNumericBuilder(); builder.checkNumericInput(event, this.id)">&nbsp;
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                            </tbody>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_NUMERIC.imgProtocol_1_Slice_Thickness"
                                                                                                               value="PROTOCOL.1.Slice Thickness">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="5"
                                                                                                        height="2px"></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Acquisition
                                                                                                        Plane
                                                                                                    </td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Acquisition_Plane.AXIAL"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Acquisition_Plane.AXIAL"><label
                                                                                                            style="vertical-align:middle">AXIAL</label>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_STRING.1_Acquisition_Plane"
                                                                                                               value="PROTOCOL.1.Acquisition Plane">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Acquisition_Plane.CORONAL"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Acquisition_Plane.CORONAL"><label
                                                                                                            style="vertical-align:middle">CORONAL</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Acquisition_Plane.SAGITTAL"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Acquisition_Plane.SAGITTAL"><label
                                                                                                            style="vertical-align:middle">SAGITTAL</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="5"
                                                                                                        height="2px"></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Acquisition Type
                                                                                                    </td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Acquisition_Type.2D"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Acquisition_Type.2D"><label
                                                                                                            style="vertical-align:middle">2D</label>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_STRING.1_Acquisition_Type"
                                                                                                               value="PROTOCOL.1.Acquisition Type">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Acquisition_Type.3D"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Acquisition_Type.3D"><label
                                                                                                            style="vertical-align:middle">3D</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="5"
                                                                                                        height="2px"></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Manufacturer
                                                                                                    </td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.GE MEDICAL SYSTEMS"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.GE MEDICAL SYSTEMS"><label
                                                                                                            style="vertical-align:middle">GE
                                                                                                        MEDICAL
                                                                                                        SYSTEMS</label>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_STRING.1_Manufacturer"
                                                                                                               value="PROTOCOL.1.Manufacturer">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.MPTronic software"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.MPTronic software"><label
                                                                                                            style="vertical-align:middle">MPTronic
                                                                                                        software</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.Philips"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.Philips"><label
                                                                                                            style="vertical-align:middle">Philips</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.Philips Healthcare"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.Philips Healthcare"><label
                                                                                                            style="vertical-align:middle">Philips
                                                                                                        Healthcare</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.Philips Medical Systems"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.Philips Medical Systems"><label
                                                                                                            style="vertical-align:middle">Philips
                                                                                                        Medical
                                                                                                        Systems</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.SIEMENS"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.SIEMENS"><label
                                                                                                            style="vertical-align:middle">SIEMENS</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.SIEMENS|PixelMed"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.SIEMENS|PixelMed"><label
                                                                                                            style="vertical-align:middle">SIEMENS|PixelMed</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.Siemens"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.Siemens"><label
                                                                                                            style="vertical-align:middle">Siemens</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Manufacturer.Siemens Healthineers"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Manufacturer.Siemens Healthineers"><label
                                                                                                            style="vertical-align:middle">Siemens
                                                                                                        Healthineers</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="5"
                                                                                                        height="2px"></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Mfg Model
                                                                                                    </td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Achieva"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Achieva"><label
                                                                                                            style="vertical-align:middle">Achieva</label>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_STRING.1_Mfg_Model"
                                                                                                               value="PROTOCOL.1.Mfg Model">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Achieva dStream"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Achieva dStream"><label
                                                                                                            style="vertical-align:middle">Achieva
                                                                                                        dStream</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Aera"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Aera"><label
                                                                                                            style="vertical-align:middle">Aera</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Allegra"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Allegra"><label
                                                                                                            style="vertical-align:middle">Allegra</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Avanto"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Avanto"><label
                                                                                                            style="vertical-align:middle">Avanto</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Biograph_mMR"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Biograph_mMR"><label
                                                                                                            style="vertical-align:middle">Biograph_mMR</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.DISCOVERY MR750"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.DISCOVERY MR750"><label
                                                                                                            style="vertical-align:middle">DISCOVERY
                                                                                                        MR750</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.DISCOVERY MR750w"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.DISCOVERY MR750w"><label
                                                                                                            style="vertical-align:middle">DISCOVERY
                                                                                                        MR750w</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Espree"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Espree"><label
                                                                                                            style="vertical-align:middle">Espree</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.GEMINI"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.GEMINI"><label
                                                                                                            style="vertical-align:middle">GEMINI</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.GENESIS_SIGNA"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.GENESIS_SIGNA"><label
                                                                                                            style="vertical-align:middle">GENESIS_SIGNA</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Gyroscan Intera"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Gyroscan Intera"><label
                                                                                                            style="vertical-align:middle">Gyroscan
                                                                                                        Intera</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Gyroscan NT"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Gyroscan NT"><label
                                                                                                            style="vertical-align:middle">Gyroscan
                                                                                                        NT</label></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Ingenia"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Ingenia"><label
                                                                                                            style="vertical-align:middle">Ingenia</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Ingenia Elition X"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Ingenia Elition X"><label
                                                                                                            style="vertical-align:middle">Ingenia
                                                                                                        Elition
                                                                                                        X</label></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Ingenuity"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Ingenuity"><label
                                                                                                            style="vertical-align:middle">Ingenuity</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Intera"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Intera"><label
                                                                                                            style="vertical-align:middle">Intera</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Intera Achieva"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Intera Achieva"><label
                                                                                                            style="vertical-align:middle">Intera
                                                                                                        Achieva</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.MAGNETOM Prisma Fit"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.MAGNETOM Prisma Fit"><label
                                                                                                            style="vertical-align:middle">MAGNETOM
                                                                                                        Prisma
                                                                                                        Fit</label></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.MAGNETOM VISION"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.MAGNETOM VISION"><label
                                                                                                            style="vertical-align:middle">MAGNETOM
                                                                                                        VISION</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.MAGNETOM Vida"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.MAGNETOM Vida"><label
                                                                                                            style="vertical-align:middle">MAGNETOM
                                                                                                        Vida</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Mirada Registration Server"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Mirada Registration Server"><label
                                                                                                            style="vertical-align:middle">Mirada
                                                                                                        Registration
                                                                                                        Server</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.NUMARIS/4"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.NUMARIS/4"><label
                                                                                                            style="vertical-align:middle">NUMARIS/4</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Obelix"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Obelix"><label
                                                                                                            style="vertical-align:middle">Obelix</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Prisma"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Prisma"><label
                                                                                                            style="vertical-align:middle">Prisma</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Prisma_fit"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Prisma_fit"><label
                                                                                                            style="vertical-align:middle">Prisma_fit</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.SIGNA EXCITE"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.SIGNA EXCITE"><label
                                                                                                            style="vertical-align:middle">SIGNA
                                                                                                        EXCITE</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.SIGNA HDx"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.SIGNA HDx"><label
                                                                                                            style="vertical-align:middle">SIGNA
                                                                                                        HDx</label></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.SIGNA Premier"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.SIGNA Premier"><label
                                                                                                            style="vertical-align:middle">SIGNA
                                                                                                        Premier</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.SIGNA UHP"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.SIGNA UHP"><label
                                                                                                            style="vertical-align:middle">SIGNA
                                                                                                        UHP</label></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Signa"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Signa"><label
                                                                                                            style="vertical-align:middle">Signa</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Signa HDxt"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Signa HDxt"><label
                                                                                                            style="vertical-align:middle">Signa
                                                                                                        HDxt</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Signa MR360"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Signa MR360"><label
                                                                                                            style="vertical-align:middle">Signa
                                                                                                        MR360</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Skyra"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Skyra"><label
                                                                                                            style="vertical-align:middle">Skyra</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Skyra_fit"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Skyra_fit"><label
                                                                                                            style="vertical-align:middle">Skyra_fit</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Skyra|DicomCleaner"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Skyra|DicomCleaner"><label
                                                                                                            style="vertical-align:middle">Skyra|DicomCleaner</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Sonata"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Sonata"><label
                                                                                                            style="vertical-align:middle">Sonata</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.SonataVision"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.SonataVision"><label
                                                                                                            style="vertical-align:middle">SonataVision</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Symphony"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Symphony"><label
                                                                                                            style="vertical-align:middle">Symphony</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.SymphonyTim"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.SymphonyTim"><label
                                                                                                            style="vertical-align:middle">SymphonyTim</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Trio"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Trio"><label
                                                                                                            style="vertical-align:middle">Trio</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.TrioTim"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.TrioTim"><label
                                                                                                            style="vertical-align:middle">TrioTim</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Mfg_Model.Verio"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Mfg_Model.Verio"><label
                                                                                                            style="vertical-align:middle">Verio</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="5"
                                                                                                        height="2px"></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="bodyTextBold">
                                                                                                        Weighting
                                                                                                    </td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Weighting.PD"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Weighting.PD"><label
                                                                                                            style="vertical-align:middle">PD</label>
                                                                                                    </td>
                                                                                                    <td align="right">
                                                                                                        <input type="checkbox"
                                                                                                               name="displayInResult"
                                                                                                               id="RESET_PROTOCOL_STRING.1_Weighting"
                                                                                                               value="PROTOCOL.1.Weighting">
                                                                                                    </td>
                                                                                                    <td align="center">
                                                                                                        &nbsp;
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Weighting.T1"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Weighting.T1"><label
                                                                                                            style="vertical-align:middle">T1</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td class="ida-advQuery-lightStripe"
                                                                                                        nowrap=""><input
                                                                                                            type="checkbox"
                                                                                                            style="vertical-align:middle"
                                                                                                            id="imgProtocol_checkBox1.Weighting.T2"
                                                                                                            name="imgProtocol_checkBox"
                                                                                                            value="1.Weighting.T2"><label
                                                                                                            style="vertical-align:middle">T2</label>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>


                                                                        <div id="imgQuaElems" style="display:none">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="6">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    IMAGE QUALITY
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="imgQuality_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var builder = new AdvQualityBuilder(); builder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td id="qCol1" width="5%">
                                                                                    </td>
                                                                                    <td id="qCol2" width="10%">
                                                                                    </td>
                                                                                    <td id="qCol3" width="70%">
                                                                                    </td>
                                                                                    <td id="qCol4" width="10%">
                                                                                    </td>
                                                                                    <td id="qCol5" width="5%">
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div id="imgQuaHolder"></div>
                                                                        </div>


                                                                        <div id="imgStsElems" style="display:none">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="4">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    IMAGE STATUS
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="imgStatus_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var builder = new AdvStatusBuilder(); builder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr valign="center">
                                                                                    <td width="5%">&nbsp;</td>
                                                                                    <td id="imgStsHolder" width="80%">
                                                                                    </td>
                                                                                    <td width="10%" align="right">
                                                                                        <input type="checkbox"
                                                                                               value="IMAGE_STATUS"
                                                                                               name="displayInResult"
                                                                                               id="RESET_STATUS.0">
                                                                                    </td>
                                                                                    <td width="5%" align="center">
                                                                                        &nbsp;
                                                                                    </td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>


                                                                        <div id="imgProcElems" style="display:none">
                                                                            <table class="ida-search-contentBgColor"
                                                                                   width="96%" cellspacing="0"
                                                                                   cellpadding="0" border="0">
                                                                                <tbody>
                                                                                <tr valign="middle">
                                                                                    <td colspan="5">
                                                                                        <table width="100%"
                                                                                               cellspacing="0"
                                                                                               cellpadding="0">
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td id="darkBgColor"
                                                                                                    width="40%">
                                                                                                    IMAGE PROCESSING
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="45%"
                                                                                                    align="right">
                                                                                                    <input type="button"
                                                                                                           value="RESET"
                                                                                                           id="imgProcessing_reset"
                                                                                                           onmouseover="this.className='buttonHover'"
                                                                                                           onmouseout="this.className='button'"
                                                                                                           class="button"
                                                                                                           onclick="var builder = new AdvProcessingBuilder(); builder.reset(); return false;">
                                                                                                </td>
                                                                                                <td id="darkBgColor"
                                                                                                    width="15%"
                                                                                                    align="center">
                                                                                                    Display in result
                                                                                                </td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td colspan="5" height="2px"></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td id="imgProcCol1"
                                                                                        width="5%"></td>
                                                                                    <td id="imgProcCol2"
                                                                                        width="17%"></td>
                                                                                    <td id="imgProcCol3"
                                                                                        width="63%"></td>
                                                                                    <td id="imgProcCol4"
                                                                                        width="10%"></td>
                                                                                    <td id="imgProcCol5"
                                                                                        width="5%"></td>
                                                                                </tr>

                                                                                </tbody>
                                                                            </table>
                                                                            <div id="imgProcHolder"></div>
                                                                        </div>


                                                                        <table width="96%" cellspacing="1"
                                                                               cellpadding="3">
                                                                            <tbody>
                                                                            <tr>
                                                                                <td width="70%" align="left">


                                                                                    <input type="button"
                                                                                           value="RESET ALL"
                                                                                           id="reloading" class="button"
                                                                                           onmouseover="this.className='buttonHover'"
                                                                                           onmouseout="this.className='button'"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.resetAll(); return false;">
                                                                                </td>
                                                                                <td width="30%" align="right">


                                                                                    <input type="submit" value="SEARCH"
                                                                                           id="advSearchQuery"
                                                                                           onmouseover="this.className='buttonHover'"
                                                                                           onmouseout="this.className='button'"
                                                                                           onclick="var handler = new AdvSearchOptionHandler(); handler.submit(event);"
                                                                                           class="button">
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>

                                                    </tbody>
                                                </table>

                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </form>

                            </div>


                            <!--
COPYRIGHT NOTICE
Copyright (c) 2021  Scott C. Neu and Arthur W. Toga

See README.license for license notices.
-->


                            <div id="tab3" style="display: none;" align="center">


                                <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    SortManager = function () {
                                        var _sortColumnKey = 'SORT_COLUMN';
                                        var _isForwardSortKey = 'IS_FORWARD_SORT';
                                        this.getSortParameters = function () {
                                            var manager = new SortCookieManager();
                                            var sortColumn = manager.get(_sortColumnKey) || 0;
                                            var isForwardSort = manager.get(_isForwardSortKey) || true;
                                            return new SortParameters(sortColumn, isForwardSort);
                                        };
                                        this.setSortParameters = function (params) {
                                            if (params == null || params == undefined) return;
                                            var sortColumn = params.getSortColumn();
                                            var isForwardSort = params.isForwardSort();
                                            var manager = new SortCookieManager();
                                            var expire = manager.getForever();
                                            manager.set(_sortColumnKey, sortColumn, expire);
                                            manager.set(_isForwardSortKey, isForwardSort, expire);
                                        };
                                    };

                                    function SortParameters(sortColumn, isForwardSort) {
                                        var _sortColumn = sortColumn;
                                        var _isForwardSort = isForwardSort;
                                        this.getSortColumn = function () {
                                            return _sortColumn;
                                        };
                                        this.isForwardSort = function () {
                                            return _isForwardSort;
                                        };
                                    };
                                    SortCookieManager = function () {
                                        this.set = function (key, value, expire) {
                                            document.cookie = key + "=" + escape(value) + ";expires=" + expire;
                                        };
                                        this.get = function (key) {
                                            var content = document.cookie;
                                            var splitted = content.split(';');
                                            for (var i = 0; i < splitted.length; i++) {
                                                var map = splitted[i].split('=');
                                                if (_trim(map[0]) == key)
                                                    return unescape(_trim(map[1]));
                                            }
                                            return '';
                                        };
                                        this.getForever = function () {
                                            var now = new Date();
                                            var futureYear = now.getYear() + 1900 + 100;
                                            now.setYear(futureYear)
                                            return now.toUTCString();
                                        };

                                        function _trim(str) {
                                            if (str == null || str == undefined) return '';
                                            return str.replace(/^\s+|\s+$/g, '');
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2011  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    CollectionDecoder = function (xml) {
                                        this.getMyCollections = function () {
                                            return _getCollections("myCollections");
                                        };
                                        this.getMySharedCollectionGroups = function () {
                                            return _getCollectionGroups("mySharedCollections");
                                        };
                                        this.getOtherCollectionGroups = function () {
                                            return _getCollectionGroups("otherCollections");
                                        };

                                        function _getCollectionGroups(type) {
                                            var groups = new Array();
                                            var collections = _getCollections(type);
                                            for (i = 0; i < collections.length; i++) {
                                                var group = null;
                                                for (j = 0; j < groups.length; j++) {
                                                    if (groups[j].canAdd(collections[i])) {
                                                        group = groups[j];
                                                    }
                                                }
                                                if (group == null) {
                                                    var project = collections[i].getProject();
                                                    group = new SharedCollectionGroup(project);
                                                    groups.push(group);
                                                }
                                                group.addCollection(collections[i]);
                                            }
                                            return groups;
                                        }

                                        function _getCollections(type) {
                                            var collections = new Array();
                                            for (i = 0; i < xml.childNodes.length; i++) {
                                                var collectionNode = xml.childNodes[i];
                                                if (collectionNode.tagName != type) {
                                                    continue;
                                                }
                                                collections.push(_getCollection(collectionNode));
                                            }
                                            return collections;
                                        }

                                        function _getCollection(node) {
                                            var name = node.getAttribute("name");
                                            var id = node.getAttribute("id");
                                            var desc = node.getAttribute("description");
                                            var total = node.getAttribute("total");
                                            var downloaded = node.getAttribute("downloaded");
                                            var project = node.getAttribute("project");
                                            if (project != undefined) {
                                                return new SharedCollection(name, id, desc, total, downloaded, project);
                                            }
                                            return new Collection(name, id, desc, total, downloaded);
                                        }
                                    };
                                    SharedCollectionGroup = function (project) {
                                        var _project = project;
                                        var _collections = new Array();
                                        this.getProject = function () {
                                            return _project;
                                        };
                                        this.getCollections = function () {
                                            return _collections;
                                        };
                                        this.canAdd = function (collection) {
                                            if (!(collection instanceof SharedCollection)) {
                                                return false;
                                            }
                                            return (collection.getProject() == _project);
                                        };
                                        this.addCollection = function (collection) {
                                            if (!this.canAdd(collection)) {
                                                return;
                                            }
                                            _collections.push(collection);
                                        };
                                    };
                                    Collection = function (name, id, desc, total, downloaded) {
                                        var _name = name;
                                        var _id = id;
                                        var _desc = desc;
                                        var _total = total;
                                        var _downloaded = downloaded;
                                        this.getName = function () {
                                            var replaceName = _name.replace(/&/g, '&amp;');
                                            replaceName = replaceName.replace(/</g, '&lt;');
                                            replaceName = replaceName.replace(/>/g, '&gt;');
                                            return replaceName;
                                        };
                                        this.getId = function () {
                                            return _id;
                                        };
                                        this.getDescription = function () {
                                            return _desc;
                                        };
                                        this.getNumberOfImages = function () {
                                            return _total;
                                        };
                                        this.getNumberOfDownloads = function () {
                                            return _downloaded;
                                        };
                                    };
                                    SharedCollection = function (name, id, desc, total, downloaded, project) {
                                        Collection.call(this, name, id, desc, total, downloaded);
                                        var _project = project;
                                        this.getProject = function () {
                                            return _project;
                                        };
                                    };
                                    SharedCollection.prototype = new Collection;
                                    SharedCollection.prototype.constructor = SharedCollection;
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2011  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    TreeInitializer = function (treeId, collectionId, subset) {
                                        this.init = function () {
                                            var url = "/pages/ajax/search/collectTree";
                                            var callback = new IDA.connect.Callback(_buildTree, _errorTree);
                                            var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };

                                        function _buildTree(o) {
                                            var decoder = new CollectionDecoder(o.responseXML.documentElement);
                                            var myCollections = decoder.getMyCollections();
                                            var mySharedCollectionGroups = decoder.getMySharedCollectionGroups();
                                            var otherCollectionGroups = decoder.getOtherCollectionGroups();
                                            var treeBuilder = new CollectionTreeBuilder(treeId, myCollections,
                                                mySharedCollectionGroups,
                                                otherCollectionGroups,
                                                collectionId, subset);
                                            treeBuilder.getTree();
                                        };

                                        function _errorTree(o) {
                                        };
                                    };
                                    CollectionTreeBuilder = function (treeDivName, myCollections,
                                                                      mySharedCollectionGroups,
                                                                      otherCollectionGroups, collectionId, subset) {
                                        this.getTree = function () {
                                            var tree = new YAHOO.widget.TreeView(treeDivName);
                                            var selector = new TreeNodeSelector(tree);
                                            tree.subscribe('labelClick', selector.selectNode);
                                            var parentCollectionNodes = new Array();
                                            var myNode = new YAHOO.widget.TextNode('My Collections', tree.getRoot(),
                                                false);
                                            parentCollectionNodes.push(myNode);
                                            for (var i = 0; i < myCollections.length; i++) {
                                                _addCollectionNode(myNode, myCollections[i], collectionId, subset,
                                                    selector);
                                            }
                                            var mySharedNode = new YAHOO.widget.TextNode('My Shared Collections',
                                                tree.getRoot(), false);
                                            for (var i = 0; i < mySharedCollectionGroups.length; i++) {
                                                var group = mySharedCollectionGroups[i];
                                                var project = group.getProject();
                                                var projectNode = new YAHOO.widget.TextNode(project, mySharedNode, false);
                                                parentCollectionNodes.push(projectNode);
                                                var collections = group.getCollections();
                                                for (var j = 0; j < collections.length; j++) {
                                                    _addCollectionNode(projectNode, collections[j], collectionId, subset,
                                                        selector);
                                                }
                                            }
                                            var otherNode = new YAHOO.widget.TextNode('Other Shared Collections',
                                                tree.getRoot(), false);
                                            for (var i = 0; i < otherCollectionGroups.length; i++) {
                                                var group = otherCollectionGroups[i];
                                                var project = group.getProject();
                                                var projectNode = new YAHOO.widget.TextNode(project, otherNode, false);
                                                parentCollectionNodes.push(projectNode);
                                                var collections = group.getCollections();
                                                for (var j = 0; j < collections.length; j++) {
                                                    _addCollectionNode(projectNode, collections[j], collectionId, subset,
                                                        selector);
                                                }
                                            }
                                            tree.draw();
                                            selector.refresh();
                                            for (var i = 0; i < parentCollectionNodes.length; i++) {
                                                _addToolTips(tree, parentCollectionNodes[i]);
                                            }
                                            return tree;
                                        };

                                        function _addCollectionNode(rootNode, collection, collectionId, subset,
                                                                    selector) {
                                            var name = collection.getName();
                                            var id = collection.getId();
                                            var description = collection.getDescription();
                                            var numImages = collection.getNumberOfImages();
                                            var numDownloads = collection.getNumberOfDownloads();
                                            var isExpanded = false;
                                            if (id == collectionId) {
                                                isExpanded = true;
                                                rootNode.expand();
                                                if (rootNode.getAncestor(0) != null) {
                                                    rootNode.getAncestor(0).expand();
                                                }
                                            }
                                            var label = name + ' (' + numImages + ')';
                                            var mainNode = new YAHOO.widget.TextNode(label, rootNode, isExpanded);
                                            mainNode.data = new TreeNodeData(id, 'ALL', numImages);
                                            mainNode.title = description;
                                            label = 'Not Downloaded (' + (numImages - numDownloads) + ')';
                                            var notDownloadNode = new YAHOO.widget.TextNode(label, mainNode, false);
                                            notDownloadNode.data = new TreeNodeData(id, 'NOT_DOWNLOADED',
                                                numImages - numDownloads);
                                            label = 'Downloaded (' + numDownloads + ')';
                                            var downloadNode = new YAHOO.widget.TextNode(label, mainNode, false);
                                            downloadNode.data = new TreeNodeData(id, 'DOWNLOADED', numDownloads);
                                            if (id == collectionId) {
                                                if (subset == 'NOT_DOWNLOADED') {
                                                    selector.selectNode(notDownloadNode, false);
                                                } else if (subset == 'DOWNLOADED') {
                                                    selector.selectNode(downloadNode, false);
                                                } else {
                                                    selector.selectNode(mainNode, false);
                                                }
                                            }
                                            return mainNode;
                                        };

                                        function _addToolTips(tree, parentNode) {
                                            if (parentNode.expanded) {
                                                _setToolTips(parentNode);
                                                return;
                                            }
                                            var firstExpand = false;
                                            tree.subscribe("expandComplete", function (node) {
                                                if (!firstExpand && node == parentNode) {
                                                    _setToolTips(parentNode);
                                                    firstExpand = true;
                                                }
                                            });
                                        };

                                        function _setToolTips(parentNode) {
                                            for (var i = 0; i < parentNode.children.length; i++) {
                                                var title = parentNode.children[i].title;
                                                if (title == '') {
                                                    continue;
                                                }
                                                $('#' + parentNode.children[i].labelElId).attr('tooltip', title);
                                                $('#' + parentNode.children[i].labelElId).tooltip({
                                                    showURL: false,
                                                    bodyHandler: function () {
                                                        var tooltip = $(this).attr('tooltip');
                                                        return '<span class="ida-collection-tool-tip">' + tooltip + '</span>';
                                                    }
                                                });
                                            }
                                        };
                                    };
                                    TreeNodeSelector = function (tree) {
                                        var _tree = tree;
                                        var _selectedNodeIndex = -1;
                                        this.refresh = function () {
                                            if (_selectedNodeIndex != -1) {
                                                var selectedNode = _tree.getNodeByIndex(_selectedNodeIndex);
                                                this.selectNode(selectedNode, false);
                                            }
                                        };
                                        this.selectNode = function (node, noRefresh) {
                                            if (_selectedNodeIndex != -1) {
                                                var selectedNode = _tree.getNodeByIndex(_selectedNodeIndex);
                                                var selectedEl = selectedNode.getLabelEl();
                                                if (selectedEl != null) {
                                                    YAHOO.util.Dom.removeClass(selectedEl, 'node_highlight');
                                                    YAHOO.util.Dom.addClass(selectedEl, 'ygtvlabel');
                                                }
                                            }
                                            _selectedNodeIndex = node.index;
                                            var el = node.getLabelEl();
                                            if (el != null) {
                                                YAHOO.util.Dom.removeClass(el, 'ygtvlabel');
                                                YAHOO.util.Dom.addClass(el, 'node_highlight');
                                            }
                                            if (noRefresh != false) {
                                                var selectHandler = new SelectHandler();
                                                if (YAHOO.lang.isString(node.data)) {
                                                    selectHandler.noCollection();
                                                    return;
                                                }
                                                var collectId = node.data.getCollectionId();
                                                var subset = node.data.getSubset();
                                                selectHandler.selectCollection(collectId, subset);
                                            }
                                        };
                                    };
                                    TreeNodeData = function (collectionId, subset) {
                                        var _collectionId = collectionId;
                                        var _subset = subset;
                                        this.getCollectionId = function () {
                                            return _collectionId;
                                        };
                                        this.getSubset = function () {
                                            return _subset;
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2021  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    CollectionDetailDecoder = function (xml) {
                                        this.getCollectionDetails = function () {
                                            var id = xml.getAttribute("id");
                                            if (id == "none") {
                                                return new CollectionDetails("", "", "", "", 0, 0, 0, 0);
                                            }
                                            var name = xml.getAttribute("name");
                                            var subset = xml.getAttribute("subset");
                                            var shared = xml.getAttribute("shared");
                                            var numberOfPages = xml.getAttribute("numberOfPages");
                                            var numberOfImages = xml.getAttribute("numberOfImages");
                                            var numberOfTranslatables = xml.getAttribute("numberOfTransImages");
                                            var numberOfAccessibleRows = xml.getAttribute("numberOfAccessibleImages")
                                            return new CollectionDetails(name, id, subset, shared, numberOfPages,
                                                numberOfImages, numberOfTranslatables,
                                                numberOfAccessibleRows);
                                        };
                                    };
                                    CollectionDetails = function (name, id, subset, shared, numberOfPages,
                                                                  numberOfImages, numberOfTranslatables,
                                                                  numberOfAccessibleRows) {
                                        this.getName = function () {
                                            return name;
                                        };
                                        this.getId = function () {
                                            return id;
                                        };
                                        this.getSubset = function () {
                                            return subset;
                                        };
                                        this.getSharedStatus = function () {
                                            return shared;
                                        };
                                        this.getNumberOfPages = function () {
                                            return numberOfPages;
                                        };
                                        this.getNumberOfImages = function () {
                                            return numberOfImages;
                                        };
                                        this.getNumberOfTranslatables = function () {
                                            return numberOfTranslatables;
                                        };
                                        this.getNumberOfAccessibleRows = function () {
                                            return numberOfAccessibleRows;
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    PageBlockDecoder = function (xml) {
                                        this.getPageBlock = function () {
                                            var pages = new Array();
                                            for (i = 0; i < xml.childNodes.length; i++) {
                                                if (xml.childNodes[i].nodeName == "page") {
                                                    var pageNode = xml.childNodes[i];
                                                    var pageNumber = pageNode.getAttribute("pageNumber");
                                                    var rows = new Array();
                                                    var htmlContent = "";
                                                    for (j = 0; j < pageNode.childNodes.length; j++) {
                                                        if (pageNode.childNodes[j].nodeName == "row") {
                                                            var rowNode = pageNode.childNodes[j];
                                                            var imageDataId = rowNode.getAttribute("imageDataId");
                                                            var isTranslatable = rowNode.getAttribute("isTranslatable");
                                                            var row = new Row(imageDataId, isTranslatable);
                                                            rows.push(row);
                                                        }
                                                        if (pageNode.childNodes[j].nodeName == "pageContent") {
                                                            var contentNode = pageNode.childNodes[j];
                                                            htmlContent = _getTextContent(contentNode);
                                                        }
                                                    }
                                                }
                                                var page = new Page(pageNumber, htmlContent, rows);
                                                pages[pageNumber] = page;
                                            }
                                            return new PageBlock(pages);
                                        };

                                        function _getTextContent(node) {
                                            if (node.textContent != undefined) {
                                                return node.textContent;
                                            }
                                            return node.text;
                                        };
                                    };
                                    PageBlock = function (pages) {
                                        var _pages = pages;
                                        this.hasPage = function (pageNumber) {
                                            if (_pages[pageNumber]) {
                                                return true;
                                            }
                                            return false;
                                        };
                                        this.getPage = function (pageNumber) {
                                            return _pages[pageNumber];
                                        };
                                    };
                                    Page = function (pageNumber, htmlContent, rows) {
                                        var _pageNumber = pageNumber;
                                        var _htmlContent = htmlContent;
                                        var _rows = rows;
                                        this.getPageNumber = function () {
                                            return parseInt(_pageNumber);
                                        };
                                        this.getHtmlContent = function () {
                                            return _htmlContent;
                                        };
                                        this.getRows = function () {
                                            return _rows;
                                        };
                                    };
                                    Row = function (imageDataId, isTranslatable) {
                                        var _imageDataId = imageDataId;
                                        var _isTranslatable = isTranslatable;
                                        this.getImageDataId = function () {
                                            return _imageDataId;
                                        };
                                        this.isTranslatable = function () {
                                            return _isTranslatable;
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2021  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    SelectManager = function (tableBuilder) {
                                        var _collectDetails = new CollectionDetails("", "", "", "", 0, 0, 0);
                                        var _currentPageNumber = 0;
                                        this.getCurrentPageNumber = function () {
                                            return _currentPageNumber;
                                        };
                                        this.setCurrentPage = function (page) {
                                            var numberOfPages = _collectDetails.getNumberOfPages();
                                            tableBuilder.setPage(page, numberOfPages);
                                            _currentPageNumber = page.getPageNumber();
                                        };
                                        this.setCollection = function (collectDetails) {
                                            _collectDetails = collectDetails;
                                            _currentPageNumber = 0;
                                            if (this.hasEmptyCollection()) {
                                                tableBuilder.noPage();
                                            }
                                        };
                                        this.hasEmptyCollection = function () {
                                            return _collectDetails.getNumberOfPages() == 0;
                                        };
                                        this.getNumberOfPages = function () {
                                            return _collectDetails.getNumberOfPages();
                                        };
                                        this.getSharedStatus = function () {
                                            return _collectDetails.getSharedStatus();
                                        };
                                    };
                                    CheckBoxManager = function (checkBoxesId, totalNumberOfImages,
                                                                totalNumberOfUntranslatables,
                                                                numberOfAccessibleRows) {
                                        var _isTranslatableMap = new Object();
                                        var _isCheckAll = false;
                                        this.shouldBeChecked = function (checkBox) {
                                            var imageDataId = checkBox.value;
                                            var isTranslatable = _isTranslatableMap[imageDataId];
                                            if (_isCheckAll) {
                                                if (isTranslatable == true || isTranslatable == false) {
                                                    return false;
                                                }
                                                return true;
                                            } else {
                                                if (isTranslatable == true || isTranslatable == false) {
                                                    return true;
                                                }
                                                return false;
                                            }
                                        };
                                        this.check = function (checkBox) {
                                            var imageDataId = checkBox.value;
                                            if (_isCheckAll) {
                                                if (checkBox.checked) {
                                                    _isTranslatableMap[imageDataId] = null;
                                                    _removeHiddenTag(imageDataId);
                                                } else {
                                                    _isTranslatableMap[imageDataId] = _isTranslatable(checkBox);
                                                    _createHiddenTag(imageDataId);
                                                }
                                            } else {
                                                if (checkBox.checked) {
                                                    _isTranslatableMap[imageDataId] = _isTranslatable(checkBox);
                                                    _createHiddenTag(imageDataId);
                                                } else {
                                                    _isTranslatableMap[imageDataId] = null;
                                                    _removeHiddenTag(imageDataId);
                                                }
                                            }
                                        };
                                        this.checkAll = function (isChecked) {
                                            _isCheckAll = isChecked;
                                            _isTranslatableMap = new Object();
                                            _removeAllHiddenTags();
                                        };
                                        this.getNumberOfChecks = function () {
                                            var numOfChecks = 0;
                                            for (var attr in _isTranslatableMap) {
                                                if (_isTranslatableMap[attr] == true || _isTranslatableMap[attr] == false) {
                                                    numOfChecks++;
                                                }
                                            }
                                            if (_isCheckAll) {
                                                return totalNumberOfImages - numOfChecks;
                                            }
                                            return numOfChecks;
                                        };
                                        this.getNumberOfDownloadables = function () {
                                            if (_isCheckAll) {
                                                return numberOfAccessibleRows;
                                            }
                                            return this.getNumberOfChecks();
                                        };
                                        this.hasUntranslatables = function () {
                                            if (_isCheckAll) {
                                                var numberOfUntranslatables = 0;
                                                for (imageDataId in _isTranslatableMap) {
                                                    if (_isTranslatableMap[imageDataId] == false) {
                                                        numberOfUntranslatables++;
                                                    }
                                                }
                                                return totalNumberOfUntranslatables > numberOfUntranslatables;
                                            } else {
                                                for (imageDataId in _isTranslatableMap) {
                                                    if (_isTranslatableMap[imageDataId] == false) {
                                                        return true;
                                                    }
                                                }
                                                return false;
                                            }
                                        };

                                        function _isTranslatable(checkBox) {
                                            var parentNode = checkBox.parentNode;
                                            for (var i = 0; i < parentNode.childNodes.length; i++) {
                                                if (parentNode.childNodes[i].name == 'translatableFile') {
                                                    return parentNode.childNodes[i].value == 'true';
                                                }
                                            }
                                            return false;
                                        };

                                        function _createHiddenTag(imageDataId) {
                                            var inputElem = document.createElement('input');
                                            inputElem.setAttribute('type', 'hidden');
                                            inputElem.setAttribute('name', 'id');
                                            inputElem.setAttribute('value', imageDataId);
                                            var checkBoxesDiv = document.getElementById(checkBoxesId);
                                            checkBoxesDiv.appendChild(inputElem);
                                        };

                                        function _removeHiddenTag(imageDataId) {
                                            var checkBoxesDiv = document.getElementById(checkBoxesId);
                                            var hiddenNodes = checkBoxesDiv.childNodes;
                                            for (var i = 0; i < hiddenNodes.length; i++) {
                                                if (hiddenNodes[i].value == imageDataId) {
                                                    checkBoxesDiv.removeChild(hiddenNodes[i]);
                                                }
                                            }
                                        };

                                        function _removeAllHiddenTags() {
                                            var checkBoxesDiv = document.getElementById(checkBoxesId);
                                            while (checkBoxesDiv.hasChildNodes()) {
                                                checkBoxesDiv.removeChild(checkBoxesDiv.childNodes.item(0));
                                            }
                                        };
                                        _removeAllHiddenTags();
                                    };
                                    PageManager = function () {
                                        var MAX_BLOCKS = 4;
                                        var _pageBlocks = new Array();
                                        this.clearPageCache = function () {
                                            _pageBlocks = new Array();
                                        };
                                        this.hasPage = function (pageNumber) {
                                            for (var i = 0; i < _pageBlocks.length; i++) {
                                                if (_pageBlocks[i].hasPage(pageNumber)) {
                                                    return true;
                                                }
                                            }
                                            return false;
                                        };
                                        this.getPage = function (pageNumber) {
                                            var pageIsFound = false;
                                            var requestedBlock;
                                            var pageBlocks = new Array();
                                            for (var i = 0; i < _pageBlocks.length; i++) {
                                                if (_pageBlocks[i].hasPage(pageNumber)) {
                                                    pageIsFound = true;
                                                    requestedBlock = _pageBlocks[i];
                                                } else {
                                                    pageBlocks.push(_pageBlocks[i]);
                                                }
                                            }
                                            ;
                                            if (!pageIsFound) {
                                                return new Page(pageNumber, "", new Array());
                                            }
                                            pageBlocks.push(requestedBlock);
                                            _pageBlocks = pageBlocks;
                                            return requestedBlock.getPage(pageNumber);
                                        };
                                        this.addPageBlock = function (block) {
                                            _pageBlocks.push(block);
                                            while (_pageBlocks.length > MAX_BLOCKS) {
                                                _pageBlocks.shift();
                                            }
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2013  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    TableBuilder = function (tableHeaderId, tableDataId, sliderDivId, sliderThumbId,
                                                             sliderThumbMiddleId, sliderTooltipId) {
                                        this.noPage = function () {
                                            var tableDiv = document.getElementById(tableDataId);
                                            tableDiv.innerHTML = '';
                                            var headerBuilder = new TableHeaderBuilder();
                                            headerBuilder.build(tableHeaderId);
                                            var scrollBarBuilder = new ScrollBarBuilder(sliderDivId, sliderThumbId,
                                                sliderThumbMiddleId,
                                                sliderTooltipId, tableDataId);
                                            scrollBarBuilder.getScrollBar(0, 0);
                                        };
                                        this.setPage = function (page, numberOfPages) {
                                            var content = page.getHtmlContent();
                                            var tableDiv = document.getElementById(tableDataId);
                                            tableDiv.innerHTML = content;
                                            var handler = new CheckBoxHandler();
                                            handler.setCheckBoxes();
                                            var headerBuilder = new TableHeaderBuilder();
                                            headerBuilder.adjust(tableDataId);
                                            var scrollBarBuilder = new ScrollBarBuilder(sliderDivId, sliderThumbId,
                                                sliderThumbMiddleId,
                                                sliderTooltipId, tableDataId);
                                            scrollBarBuilder.getScrollBar(page.getPageNumber(), numberOfPages);
                                        };
                                    };
                                    TableHeaderBuilder = function () {
                                        var _COLUMN_A = 'column_A_';
                                        var _COLUMN_DIV = 'column_DIV_';
                                        this.build = function (tableHeaderId) {
                                            var tableHeader = document.getElementById(tableHeaderId);
                                            while (tableHeader.firstChild) {
                                                tableHeader.removeChild(tableHeader.firstChild);
                                            }
                                            for (i = 0; i < 11; i++) {
                                                var td = document.createElement('td');
                                                tableHeader.appendChild(td);
                                                var div = document.createElement('div');
                                                div.setAttribute('id', _COLUMN_DIV + i);
                                                td.appendChild(div);
                                                var u = document.createElement('u');
                                                div.appendChild(u);
                                                var a = document.createElement('a');
                                                a.setAttribute('href', 'javascript:void(0);');
                                                var handler = new TableColumnSortHandler(i);
                                                YAHOO.util.Event.addListener(a, 'click', handler.sortColumn);
                                                a.setAttribute('id', _COLUMN_A + i);
                                                u.appendChild(a);
                                                YAHOO.util.Dom.addClass(div, 'tableHeaderInactive');
                                            }
                                            var td = document.createElement('td');
                                            tableHeader.appendChild(td);
                                            var div = document.createElement('div');
                                            div.setAttribute('id', _COLUMN_DIV + 11);
                                            div.appendChild(document.createTextNode('All'));
                                            td.appendChild(div);
                                            var input = document.createElement('input');
                                            input.setAttribute('type', 'checkbox');
                                            input.setAttribute('name', 'selectAll');
                                            input.setAttribute('id', 'selectAllCheckBox');
                                            var handler = new CheckBoxHandler();
                                            YAHOO.util.Event.addListener(input, 'click', handler.handleCheckAll);
                                            div.appendChild(input);
                                            var tdEnd = document.createElement('td');
                                            tableHeader.appendChild(tdEnd);
                                            tdEnd.setAttribute('width', '25px');
                                            YAHOO.util.Dom.addClass(div, 'tableHeaderInactive');
                                            YAHOO.util.Dom.setStyle(input, 'display', 'none');
                                        };
                                        this.adjust = function (tableDataId) {
                                            var sortManager = new SortManager();
                                            var sortParams = sortManager.getSortParameters();
                                            var sortColumn = sortParams.getSortColumn();
                                            var isForwardSorted = sortParams.isForwardSort();
                                            var isTableData = YAHOO.util.Dom.getRegion('cell0_0');
                                            var columnTitles = ['Subject', 'Group', 'Sex', 'Age', 'Visit',
                                                'Modality', 'Description', 'Type', 'Acq Date',
                                                'Format', 'Downloaded'];
                                            var ascImg = '<img src="/pages/images/Arrow_Up.gif"' +
                                                'style="border-style:none">';
                                            var dscImg = '<img src="/pages/images/Arrow_Down.gif"' +
                                                'style="border-style:none">';
                                            for (i = 0; i < columnTitles.length; i++) {
                                                var heading = columnTitles[i];
                                                if (sortColumn != '' && i == sortColumn && isTableData) {
                                                    if (isForwardSorted == 'true') {
                                                        heading += dscImg;
                                                    } else {
                                                        heading += ascImg;
                                                    }
                                                }
                                                if (isTableData) {
                                                    YAHOO.util.Dom.removeClass(_COLUMN_DIV + i, 'tableHeaderInactive');
                                                } else {
                                                    YAHOO.util.Dom.addClass(_COLUMN_DIV + i, 'tableHeaderInactive');
                                                }
                                                var aTag = document.getElementById(_COLUMN_A + i);
                                                aTag.innerHTML = heading;
                                            }
                                            if (isTableData) {
                                                YAHOO.util.Dom.removeClass(_COLUMN_DIV + 11, 'tableHeaderInactive');
                                                YAHOO.util.Dom.setStyle('selectAllCheckBox', 'display', '');
                                            } else {
                                                YAHOO.util.Dom.addClass(_COLUMN_DIV + 11, 'tableHeaderInactive');
                                                YAHOO.util.Dom.setStyle('selectAllCheckBox', 'display', 'none');
                                            }
                                            for (i = 0; i < 12; i++) {
                                                var column = $('#' + _COLUMN_DIV + i).parent();
                                                if (column) {
                                                    var cellRegion = $('#cell' + i + '_0').parent();
                                                    if (cellRegion) {
                                                        column.css("width", cellRegion.css('width'));
                                                        column.css("white-space", "nowrap");
                                                    }
                                                }
                                            }
                                        };
                                    };
                                    TableColumnSortHandler = function (columnIndex) {
                                        this.sortColumn = function (event) {
                                            var sortManager = new SortManager();
                                            var sortParams = sortManager.getSortParameters();
                                            var isForwardSort = sortParams.isForwardSort();
                                            if (sortParams.getSortColumn() == columnIndex) {
                                                isForwardSort = true;
                                                if (sortParams.isForwardSort() == 'true') {
                                                    isForwardSort = false;
                                                }
                                            }
                                            sortParams = new SortParameters(columnIndex, isForwardSort);
                                            sortManager.setSortParameters(sortParams);
                                            var selectHandler = new SelectHandler();
                                            selectHandler.refreshCollection();
                                        };
                                    };
                                    //-->
                                </script>

                                <!--
COPYRIGHT NOTICE
Copyright (c) 2008  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    <!--
                                    var SLIDER = null;
                                    var SLIDER_HEIGHT = 310;
                                    ScrollBarBuilder = function (sliderDivId, sliderThumbId, sliderThumbMiddleId,
                                                                 sliderTooltipId, tableDataId) {
                                        var _toolTip;
                                        var _toolTipDownPageNumber = 1;
                                        var _toolTipDragPageNumber = 1;
                                        var _numberOfPages;
                                        var _sliderRange;
                                        this.getScrollBar = function (currentPage, numberOfPages) {
                                            _numberOfPages = numberOfPages;
                                            var tableRegion = YAHOO.util.Dom.getRegion(tableDataId);
                                            var sliderHeight = tableRegion.bottom - tableRegion.top - 2 * 17 + 4;
                                            if (sliderHeight > SLIDER_HEIGHT) {
                                                SLIDER_HEIGHT = sliderHeight;
                                            }
                                            var sliderDiv = document.getElementById(sliderDivId);
                                            YAHOO.util.Dom.setStyle(sliderDiv, 'height', SLIDER_HEIGHT);
                                            var thumbHeight = SLIDER_HEIGHT;
                                            if (numberOfPages > 1) {
                                                thumbHeight = Math.ceil(SLIDER_HEIGHT / numberOfPages);
                                                if (thumbHeight < SLIDER_HEIGHT / 6) {
                                                    thumbHeight = Math.ceil(SLIDER_HEIGHT / 6);
                                                }
                                            }
                                            var thumbMiddle = document.getElementById(sliderThumbMiddleId);
                                            YAHOO.util.Dom.setStyle(thumbMiddle, 'height', thumbHeight - 6);
                                            _sliderRange = SLIDER_HEIGHT - thumbHeight;
                                            if (SLIDER == null) {
                                                SLIDER = new YAHOO.widget.Slider.getVertSlider(sliderDivId, sliderThumbId,
                                                    0, _sliderRange);
                                                SLIDER.animate = false;
                                                SLIDER.backgroundEnabled = false;
                                                SLIDER.onMouseDown = _sliderBackgroundClicked;
                                            } else {
                                                SLIDER.thumb.initSlider(0, 0, 0, _sliderRange);
                                            }
                                            var thumbLocation = 0;
                                            if (numberOfPages > 1) {
                                                thumbLocation = Math.round(currentPage * _sliderRange / (numberOfPages - 1));
                                            }
                                            SLIDER.setValue(thumbLocation, true, false, true);
                                            _toolTip = new YAHOO.widget.Overlay(sliderTooltipId, {visible: false});
                                            _toolTip.setBody("Page #1");
                                            _toolTip.render(document.body);
                                            var tipRegion = YAHOO.util.Dom.getRegion(sliderTooltipId);
                                            var tableX = tableRegion.left + (tableRegion.right - tableRegion.left) / 2;
                                            var tableY = tableRegion.top + SLIDER_HEIGHT / 2;
                                            var tipX = tableX - (tipRegion.right - tipRegion.left) / 2;
                                            var tipY = tableY - (tipRegion.bottom - tipRegion.top) / 2;
                                            _toolTip.cfg.setProperty("xy", [tipX, tipY]);
                                            SLIDER.unsubscribeAll("slideStart");
                                            SLIDER.unsubscribeAll("change");
                                            SLIDER.unsubscribeAll("slideEnd");
                                            SLIDER.subscribe("slideStart", _sliderStartMoving);
                                            SLIDER.subscribe("change", _sliderMoved);
                                            SLIDER.subscribe("slideEnd", _sliderStopMoving);
                                            return SLIDER;
                                        };

                                        function _sliderBackgroundClicked(e) {
                                            var mouseY = YAHOO.util.Event.getPageY(e);
                                            var thumbXY = YAHOO.util.Dom.getXY(sliderThumbId);
                                            var selectHandler = new SelectHandler();
                                            if (mouseY < thumbXY[1]) {
                                                selectHandler.previousPage();
                                            } else {
                                                selectHandler.nextPage();
                                            }
                                        };

                                        function _sliderStartMoving() {
                                            if (_numberOfPages <= 1) {
                                                return;
                                            }
                                            _updateToolTipBody(SLIDER.getValue());
                                            _toolTipDownPageNumber = _toolTipDragPageNumber;
                                            _toolTip.show();
                                        };

                                        function _sliderMoved(thumbBarPosition) {
                                            _updateToolTipBody(thumbBarPosition);
                                        };

                                        function _sliderStopMoving() {
                                            if (_numberOfPages <= 1) {
                                                return;
                                            }
                                            if (_toolTipDownPageNumber != _toolTipDragPageNumber) {
                                                var selectHandler = new SelectHandler();
                                                selectHandler.selectPage(_toolTipDragPageNumber - 1);
                                            }
                                            _toolTip.hide();
                                        };

                                        function _updateToolTipBody(thumbBarPosition) {
                                            if (_numberOfPages <= 1) {
                                                return;
                                            }
                                            var pageNumber = 1;
                                            if (thumbBarPosition > 0) {
                                                var ratio = (thumbBarPosition - 1) / _sliderRange;
                                                pageNumber = Math.floor(ratio * _numberOfPages) + 1;
                                            }
                                            if (pageNumber == _toolTipDragPageNumber) {
                                                return;
                                            }
                                            _toolTip.setBody("Page #" + pageNumber);
                                            _toolTipDragPageNumber = pageNumber;
                                        };
                                    };
                                    //-->
                                </script>


                                <!--
COPYRIGHT NOTICE
Copyright (c) 2021  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script type="text/javascript">
                                    SelectHandler = function () {
                                        this.init = function () {
                                            var sortManager = new SortManager();
                                            var sortParams = sortManager.getSortParameters();
                                            var sortColumn = sortParams.getSortColumn();
                                            var isForwardSort = sortParams.isForwardSort();
                                            var url = "/pages/ajax/search/collectDetail" +
                                                "?sortColumn=" + sortColumn +
                                                "&isForwardSort=" + isForwardSort;
                                            var callback = new IDA.connect.Callback(_initCollectionTable,
                                                _errorCollection);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.noCollection = function () {
                                            var url = "/pages/ajax/search/collectDetail" +
                                                "?collectionId=none";
                                            var callback = new IDA.connect.Callback(_setCollection, _errorCollection);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.refreshCollection = function () {
                                            var sortManager = new SortManager();
                                            var sortParams = sortManager.getSortParameters();
                                            var sortColumn = sortParams.getSortColumn();
                                            var isForwardSort = sortParams.isForwardSort();
                                            var url = "/pages/ajax/search/collectDetail" +
                                                "?sortColumn=" + sortColumn +
                                                "&isForwardSort=" + isForwardSort;
                                            var callback = new IDA.connect.Callback(_setCollection, _errorCollection);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.selectCollection = function (collectionId, subset) {
                                            var sortManager = new SortManager();
                                            var sortParams = sortManager.getSortParameters();
                                            var sortColumn = sortParams.getSortColumn();
                                            var isForwardSort = sortParams.isForwardSort();
                                            var url = "/pages/ajax/search/collectDetail" +
                                                "?collectionId=" + collectionId +
                                                "&subset=" + subset +
                                                "&sortColumn=" + sortColumn +
                                                "&isForwardSort=" + isForwardSort;
                                            var callback = new IDA.connect.Callback(_setCollection, _errorCollection);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };
                                        this.previousPage = function () {
                                            if (SELECT_MANAGER.hasEmptyCollection()) {
                                                return;
                                            }
                                            var currentPageNumber = SELECT_MANAGER.getCurrentPageNumber();
                                            if (currentPageNumber - 1 < 0) {
                                                return;
                                            }
                                            var pageHandler = new PageHandler(_updateCollectionTable);
                                            pageHandler.requestPage(currentPageNumber - 1);
                                        };
                                        this.selectPage = function (pageNumber) {
                                            if (SELECT_MANAGER.hasEmptyCollection()) {
                                                return;
                                            }
                                            if (pageNumber < 0 || pageNumber >= SELECT_MANAGER.getNumberOfPages()) {
                                                return;
                                            }
                                            var pageHandler = new PageHandler(_updateCollectionTable);
                                            pageHandler.requestPage(pageNumber);
                                        };
                                        this.nextPage = function () {
                                            if (SELECT_MANAGER.hasEmptyCollection()) {
                                                return;
                                            }
                                            var currentPageNumber = SELECT_MANAGER.getCurrentPageNumber();
                                            if (currentPageNumber + 1 >= SELECT_MANAGER.getNumberOfPages()) {
                                                return;
                                            }
                                            var pageHandler = new PageHandler(_updateCollectionTable);
                                            pageHandler.requestPage(currentPageNumber + 1);
                                        };

                                        function _setCollection(o) {
                                            var decoder = new CollectionDetailDecoder(o.responseXML.documentElement);
                                            var collectDetails = decoder.getCollectionDetails();
                                            PAGE_MANAGER.clearPageCache();
                                            var numImages = collectDetails.getNumberOfImages();
                                            var numUntran = numImages - collectDetails.getNumberOfTranslatables();
                                            var numAccessible = collectDetails.getNumberOfAccessibleRows();
                                            CHECK_BOX_MANAGER = new CheckBoxManager('checkBoxes', numImages, numUntran, numAccessible);
                                            SELECT_MANAGER.setCollection(collectDetails);
                                            _updateCollectionDisplay(collectDetails.getName(), collectDetails.getId());
                                            var buttonHandler = new ButtonEnableHandler();
                                            buttonHandler.updateActionButtons();
                                            buttonHandler.updateCollectionButtons(collectDetails.getSharedStatus());
                                            _updateRadioMessageState(numImages, collectDetails.getNumberOfTranslatables());
                                            if (SELECT_MANAGER.hasEmptyCollection()) {
                                                return;
                                            }
                                            var pageHandler = new PageHandler(_updateCollectionTable);
                                            pageHandler.requestPage(0);
                                        };

                                        function _initCollectionTable(o) {
                                            var decoder = new CollectionDetailDecoder(o.responseXML.documentElement);
                                            var collectDetails = decoder.getCollectionDetails();
                                            var collectionId = collectDetails.getId();
                                            var subset = collectDetails.getSubset();
                                            var treeInitializer = new TreeInitializer('collections', collectionId,
                                                subset);
                                            treeInitializer.init();
                                            var numImages = collectDetails.getNumberOfImages();
                                            var numUntran = numImages - collectDetails.getNumberOfTranslatables();
                                            var numAccessible = collectDetails.getNumberOfAccessibleRows();
                                            CHECK_BOX_MANAGER = new CheckBoxManager('checkBoxes', numImages, numUntran, numAccessible);
                                            SELECT_MANAGER.setCollection(collectDetails);
                                            _updateCollectionDisplay(collectDetails.getName(), collectDetails.getId());
                                            var buttonHandler = new ButtonEnableHandler();
                                            buttonHandler.updateActionButtons();
                                            buttonHandler.updateCollectionButtons(collectDetails.getSharedStatus());
                                            _updateRadioMessageState(numImages, collectDetails.getNumberOfTranslatables());
                                            _alignTreeAndTableBottom();
                                            if (SELECT_MANAGER.hasEmptyCollection()) {
                                                return;
                                            }
                                            var pageHandler = new PageHandler(_updateCollectionTable);
                                            pageHandler.requestPage(0);
                                        };

                                        function _updateCollectionTable(page) {
                                            SELECT_MANAGER.setCurrentPage(page);
                                            _alignTreeAndTableBottom();
                                        };

                                        function _alignTreeAndTableBottom() {
                                            var tableRegion = YAHOO.util.Dom.getRegion('collection_table');
                                            var boxRegion = YAHOO.util.Dom.getRegion('collections_box');
                                            var heightDiff = tableRegion.bottom - boxRegion.bottom;
                                            if (heightDiff > 0) {
                                                var treeRegion = YAHOO.util.Dom.getRegion('collections_tree');
                                                var treeHeight = treeRegion.bottom - treeRegion.top;
                                                var treeDiv = document.getElementById('collections_tree');
                                                YAHOO.util.Dom.setStyle(treeDiv, 'height', treeHeight + heightDiff);
                                            } else if (heightDiff < 0) {
                                                var tableHeight = tableRegion.bottom - tableRegion.top;
                                                var tableDiv = document.getElementById('collection_table');
                                                YAHOO.util.Dom.setStyle(tableDiv, 'height', tableHeight - heightDiff);
                                            }
                                        };

                                        function _updateCollectionDisplay(collectionName, collectionId) {
                                            var collectionName = '<b>Collection: ' + collectionName + '</b>';
                                            var collectionIdHidden = '<input id="hiddenCollectionId" type="hidden" value="' + collectionId + '" />';
                                            document.getElementById('currentCollection').innerHTML = collectionName + collectionIdHidden;
                                            msg = '<b>0 items selected</b>';
                                            document.getElementById('imageNumber').innerHTML = msg;
                                            var selectAll = document.getElementById('selectAllCheckBox');
                                            selectAll.checked = false;
                                        };

                                        function _updateRadioMessageState(total, numTrans) {
                                            var numUnTrans = total - numTrans;
                                            var mixedMsgStyle = numTrans > 0 && numUnTrans > 0 ? 'block' : "none";
                                            YAHOO.util.Dom.setStyle('mixedMsg', 'display', mixedMsgStyle);
                                            var noTransStyle = total > 0 && numTrans == 0 ? 'block' : 'none';
                                            YAHOO.util.Dom.setStyle('noTranslatableMsg', 'display', noTransStyle);
                                            var radioStyle = total > 0 && numTrans == 0 ? 'none' : 'block';
                                            YAHOO.util.Dom.setStyle('radioBtnContainer', 'display', radioStyle);
                                        };

                                        function _errorCollection(o) {
                                        };
                                    };
                                    UnshareHandler = function () {
                                        this.unshareCollection = function () {
                                            var url = "/pages/ajax/search/collectShare?access=unshare";
                                            var callback = new IDA.connect.Callback(_refreshTab, _errorRefresh);
                                            YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };

                                        function _refreshTab(o) {
                                            var selectHandler = new SelectHandler();
                                            selectHandler.init();
                                        };

                                        function _errorRefresh(o) {
                                        };
                                    };
                                    ExportHandler = function () {
                                        this.exportMetadata = function () {
                                            var sortManager = new SortManager();
                                            var sortParams = sortManager.getSortParameters();
                                            var sortColumn = sortParams.getSortColumn();
                                            var isForwardSort = sortParams.isForwardSort();
                                            var url = "/pages/table/searchCollect" +
                                                "?sortColumn=" + sortColumn +
                                                "&isForwardSort=" + isForwardSort;
                                            location.href = url;
                                        };
                                    };
                                    CheckBoxHandler = function () {
                                        this.handleCheck = function (checkBox) {
                                            CHECK_BOX_MANAGER.check(checkBox);
                                            var handler = new ButtonEnableHandler();
                                            handler.updateActionButtons();
                                            _updateImagesSelected();
                                        };
                                        this.handleCheckAll = function (event) {
                                            var checkAllBox = YAHOO.util.Event.getTarget(event);
                                            CHECK_BOX_MANAGER.checkAll(checkAllBox.checked);
                                            var checkBoxes = _getCheckBoxesInTable();
                                            for (var i = 0; i < checkBoxes.length; i++) {
                                                checkBoxes[i].checked = checkAllBox.checked;
                                            }
                                            var handler = new ButtonEnableHandler();
                                            handler.updateActionButtons();
                                            _updateImagesSelected();
                                        };
                                        this.setCheckBoxes = function () {
                                            var checkBoxes = _getCheckBoxesInTable();
                                            for (var i = 0; i < checkBoxes.length; i++) {
                                                checkBoxes[i].checked = CHECK_BOX_MANAGER.shouldBeChecked(checkBoxes[i]);
                                            }
                                        };

                                        function _updateImagesSelected() {
                                            var numOfChecks = CHECK_BOX_MANAGER.getNumberOfChecks();
                                            var msg = '<b>' + numOfChecks + ' items selected</b>';
                                            if (numOfChecks == 1) {
                                                msg = '<b>1 item selected</b>';
                                            }
                                            document.getElementById('imageNumber').innerHTML = msg;
                                        };

                                        function _getCheckBoxesInTable() {
                                            var checkBoxes = new Array();
                                            var index = 0;
                                            var divCell11 = document.getElementById('cell11_' + index);
                                            while (divCell11 != null && divCell11 != undefined) {
                                                var inputElems = divCell11.getElementsByTagName('input');
                                                for (i = 0; i < inputElems.length; i++) {
                                                    if (inputElems[i].type == 'checkbox') {
                                                        checkBoxes.push(inputElems[i]);
                                                    }
                                                }
                                                index++;
                                                var divCell11 = document.getElementById('cell11_' + index);
                                            }
                                            return checkBoxes;
                                        };
                                    };
                                    ButtonEnableHandler = function () {
                                        this.updateActionButtons = function () {
                                            if (CHECK_BOX_MANAGER.getNumberOfChecks() == 0) {
                                                _changeButtonState('delete', false);
                                                _changeButtonState('rgpCollectId', false);
                                                _changeButtonState('download', false);
                                                _changeRadioButtonState('niftiButton', false);
                                                _changeRadioButtonState('archivedButton', false);
                                                _changeButtonState('simple-download-button', false);
                                                _changeButtonState('adv-download-button', false);
                                                return;
                                            }
                                            if (SELECT_MANAGER.getSharedStatus() != 'OTHER_SHARED') {
                                                _changeButtonState('delete', true);
                                                _changeButtonState('rgpCollectId', true);
                                            }
                                            var enable = CHECK_BOX_MANAGER.getNumberOfDownloadables() > 0;
                                            _changeButtonState('simple-download-button', enable);
                                            _changeButtonState('adv-download-button', enable);
                                            _changeRadioButtonState('niftiButton', enable);
                                            _changeRadioButtonState('archivedButton', enable);
                                            var disable = CHECK_BOX_MANAGER.hasUntranslatables();
                                            if (disable) {
                                                var button = document.getElementById('archivedButton');
                                                if (button != undefined) button.checked = true;
                                            }
                                        }
                                        this.updateCollectionButtons = function (sharedStatus) {
                                            if (SELECT_MANAGER.hasEmptyCollection()) {
                                                _changeButtonState('share', false);
                                                _changeButtonState('unshare', false);
                                                _changeButtonState('export', false);
                                            } else if (sharedStatus == 'MY_SHARED') {
                                                _changeButtonState('share', true);
                                                _changeButtonState('unshare', true);
                                                _changeButtonState('export', true);
                                                _changeButtonLabel('share', 'EDIT COLLECTION');
                                            } else if (sharedStatus == 'OTHER_SHARED') {
                                                _changeButtonState('share', false);
                                                _changeButtonState('unshare', false);
                                                _changeButtonState('export', true);
                                                _changeButtonLabel('share', 'SHARE');
                                            } else if (sharedStatus == 'NOT_SHARED') {
                                                _changeButtonState('share', true);
                                                _changeButtonState('unshare', false);
                                                _changeButtonState('export', true);
                                                _changeButtonLabel('share', 'SHARE');
                                            }
                                        };

                                        function _changeButtonLabel(buttonId, label) {
                                            var button = document.getElementById(buttonId);
                                            if (button == undefined) {
                                                return;
                                            }
                                            button.value = label;
                                        };

                                        function _changeButtonState(buttonId, enable) {
                                            var button = document.getElementById(buttonId);
                                            if (button == undefined) {
                                                return;
                                            }
                                            if (enable) {
                                                button.disabled = false;
                                                YAHOO.util.Dom.replaceClass(button, 'buttonDisabled', 'button');
                                            } else {
                                                button.disabled = true;
                                                YAHOO.util.Dom.replaceClass(button, 'button', 'buttonDisabled');
                                            }
                                        };

                                        function _changeRadioButtonState(buttonId, enable) {
                                            var button = document.getElementById(buttonId);
                                            if (button == undefined) {
                                                return;
                                            }
                                            if (enable) {
                                                button.disabled = false;
                                            } else {
                                                button.disabled = true;
                                            }
                                        };
                                    };
                                    PageHandler = function (pageFunction) {
                                        var _pageFunction = pageFunction;
                                        var _requestedPageNumber = 0;
                                        this.requestPage = function (pageNumber) {
                                            if (PAGE_MANAGER.hasPage(pageNumber)) {
                                                var page = PAGE_MANAGER.getPage(pageNumber);
                                                _pageFunction(page);
                                                return;
                                            }
                                            _requestedPageNumber = pageNumber;
                                            var url = '/pages/ajax/search/collectPages?pageNumber=' + pageNumber;
                                            var callback = new IDA.connect.Callback(_receiveNewPages, _errorNewPages);
                                            var request = YAHOO.util.Connect.asyncRequest('GET', url, callback);
                                        };

                                        function _receiveNewPages(o) {
                                            var decoder = new PageBlockDecoder(o.responseXML.documentElement);
                                            var newBlock = decoder.getPageBlock();
                                            PAGE_MANAGER.addPageBlock(newBlock);
                                            if (!PAGE_MANAGER.hasPage(_requestedPageNumber)) {
                                                return;
                                            }
                                            var page = PAGE_MANAGER.getPage(_requestedPageNumber);
                                            _pageFunction(page);
                                        };

                                        function _errorNewPages(o) {
                                        }
                                    };
                                    FileTimeFormatter = function () {
                                        this.formatFileSize = function (fileSize) {
                                            var sizeUnits = "Bytes";
                                            if (fileSize >= 1073741824) {
                                                fileSize = fileSize / 1073741824;
                                                sizeUnits = "GB";
                                            } else if (fileSize >= 1048576) {
                                                fileSize = fileSize / 1048576;
                                                sizeUnits = "MB";
                                            } else if (fileSize >= 1024) {
                                                fileSize = fileSize / 1024;
                                                sizeUnits = "KB";
                                            }
                                            fileSize = fileSize.toFixed(2);
                                            return fileSize + " " + sizeUnits;
                                        };
                                        this.formatDownloadTime = function (fileSize, connSpeedKpbs, prependAbreviation) {
                                            var time = (fileSize * 8) / connSpeedKpbs / 1000;
                                            var timeVal = 0;
                                            if (time <= 60) {
                                                timeVal = 1;
                                                units = "min";
                                            } else if (time < 3600) {
                                                timeVal = Math.floor(time / 60);
                                                while (timeVal % 5 != 0) {
                                                    timeVal += 1;
                                                }
                                                units = "mins";
                                            } else if (time < 86400) {
                                                timeVal = Math.floor(time / 3600);
                                                if (timeVal > 1) {
                                                    timeVal += 1;
                                                }
                                                units = (timeVal == 1 ? "hour" : "hours");
                                            } else {
                                                timeVal = Math.floor(time / 86400);
                                                units = (timeVal == 1 ? "day" : "days");
                                            }
                                            if (prependAbreviation === undefined) {
                                                prependAbreviation = false;
                                            }
                                            var downloadEstimateText = '';
                                            if (units.indexOf('min') >= 0) {
                                                if (timeVal == 1) {
                                                    downloadEstimateText = (prependAbreviation ? "< 1 min" : "1 min");
                                                } else {
                                                    downloadEstimateText = (prependAbreviation ? "about " + timeVal : timeVal) + " " + units;
                                                }
                                            } else if (units.indexOf('hour') >= 0) {
                                                downloadEstimateText = (prependAbreviation ? "about " + timeVal : timeVal) + " " + units;
                                            } else {
                                                if (timeVal > 20) {
                                                    downloadEstimateText = (prependAbreviation ? "over 20 " : "20 ") + units;
                                                } else {
                                                    downloadEstimateText = (prependAbreviation ? "about " + timeVal : timeVal) + " " + units;
                                                }
                                            }
                                            return downloadEstimateText;
                                        };
                                    };
                                    BandwidthSpeedTestHandler = function (onChangeAvgKpbsCallbackFunction) {
                                        this.avgKbps = 0;
                                        this.imagesDownloaded = 0;
                                        this.sumOfAllConnSpeeds = 0;
                                        this.onChangeAvgKpbsCallback = onChangeAvgKpbsCallbackFunction;
                                        var _hasStarted = false;
                                        var _hasCompleted = false;
                                        this.imageUrlList = new Array(
                                            'images/speedtest/BANDWIDTH_SPEED_TEST_1MB.png'
                                        );
                                        this.startSpeedTest = function () {
                                            if (this.imageUrlList !== undefined && this.imageUrlList.length > 0) {
                                                this.getImageByAjax(this.generateImageUrl(0), Date.now());
                                            } else {
                                                alert('imageUrlList was undefined or empty.');
                                            }
                                        };
                                        this.generateImageUrl = function (imageUrlIndex) {
                                            return "/pages/" + this.imageUrlList[imageUrlIndex] + "?lts=" + new Date().getTime();
                                        };
                                        this.getImageByAjax = function (imageSpeedTestURL, startTime) {
                                            $.ajax({
                                                type: "GET",
                                                url: imageSpeedTestURL,
                                                cache: false,
                                                context: this,
                                                success: function (obj, textstatus, request) {
                                                    _hasStarted = true;
                                                    this.imagesDownloaded++;
                                                    var totalTime = Date.now() - startTime;
                                                    var imageSize = request.getResponseHeader("Content-Length");
                                                    var kbps = (imageSize * 8) / totalTime;
                                                    this.sumOfAllConnSpeeds += kbps;
                                                    this.updateAvgKbps();
                                                    if (this.imagesDownloaded < this.imageUrlList.length) {
                                                        this.getImageByAjax(this.generateImageUrl(this.imagesDownloaded), new Date().getTime());
                                                    } else {
                                                        _hasCompleted = true;
                                                        this.updateAvgKbps();
                                                    }
                                                }
                                            });
                                        };
                                        this.updateAvgKbps = function () {
                                            this.avgKbps = this.sumOfAllConnSpeeds / this.imagesDownloaded;
                                        };
                                        this.isBandwidthSpeedTestCompleted = function () {
                                            return _hasCompleted;
                                        };
                                        this.hasBandwidthSpeedTestStarted = function () {
                                            return _hasStarted;
                                        }
                                        Object.defineProperty(this, 'avgKbps', {
                                            get: function () {
                                                return avgKbps;
                                            },
                                            set: function (v) {
                                                avgKbps = v;
                                                this.onChangeAvgKpbsCallback();
                                            }
                                        });
                                    };

                                    function DownloadHandler(downloadKeyIn, totalImageSelectionSizeIn, requestedImageFormatIn, getFileSizeXMLCallbackFunction, downloadUrl, downloadMetaDataUrl, downloadDataSetUrl) {
                                        var CSS_CLASS_VISITED_DOWNLOAD_LINK = 'download-link-visited';
                                        this.ftf = new FileTimeFormatter();
                                        this.downloadZipFileName;
                                        this.downloadXMLData = new Array();
                                        this.datasetSize = 0;
                                        this.downloadUrl = downloadUrl;
                                        this.downloadMetaDataUrl = downloadMetaDataUrl;
                                        this.downloadDataSetUrl = downloadDataSetUrl;
                                        this.getFileSizeXMLCallback = getFileSizeXMLCallbackFunction;
                                        this.downloadKey = downloadKeyIn;
                                        this.totalImageSelectionSize = totalImageSelectionSizeIn;
                                        this.requestedImageFormat = requestedImageFormatIn;
                                        this.asArchivedCount = 0;
                                        this.getFileSizeXMLAjax = function (zipFileCount) {
                                            if (this.downloadKey !== undefined) {
                                                $.ajax({
                                                    context: this,
                                                    url: "/pages/ajax/download/downloadSize?key=" + this.downloadKey + "&count=" + zipFileCount,
                                                    success: function (fileSizeXML) {
                                                        var zipFiles = $(fileSizeXML).find('zipFiles');
                                                        if ((zipFiles !== undefined) && (zipFiles.length > 0)) {
                                                            var asArchivedCount = $(zipFiles[0]).attr('asArchived');
                                                            if (asArchivedCount !== undefined) {
                                                                this.asArchivedCount = parseInt(asArchivedCount);
                                                            }
                                                            this.downloadXMLData.push(fileSizeXML);
                                                            var datasetSize = $(fileSizeXML).find("zipFiles").attr("dataset_size");
                                                            if (+datasetSize) this.datasetSize = +datasetSize;
                                                            this.getFileSizeXMLCallback(zipFileCount);
                                                        } else {
                                                            alert('Files cannot be downloaded.  Please contact IDA support for help');
                                                        }
                                                    }
                                                });
                                            }
                                        };
                                        this.getFileSizeByFileCountAndNumber = function (zipFileCount, number) {
                                            var fileSizeXMLData = this.getFileSizeXMLDataByFileCount(zipFileCount);
                                            if (fileSizeXMLData !== null) {
                                                var zipFileEles = $(fileSizeXMLData).find('zipFile');
                                                if (number <= zipFileEles.length) {
                                                    return Number($(zipFileEles[number - 1]).attr('size'));
                                                }
                                            }
                                            return null;
                                        }
                                        this.getFileSizeXMLDataByFileCount = function (zipFileCount) {
                                            for (var x = 0; x < this.downloadXMLData.length; x++) {
                                                var fileSizeXML = this.downloadXMLData[x];
                                                var xmlZipFileCount = this.getZipFileCountByFileSizeXML(fileSizeXML);
                                                if (xmlZipFileCount !== null && xmlZipFileCount == zipFileCount) {
                                                    return fileSizeXML;
                                                }
                                            }
                                            return null;
                                        };
                                        this.getZipFileCountByFileSizeXML = function (fileSizeXML) {
                                            if (fileSizeXML !== undefined && fileSizeXML !== null) {
                                                var zipFileCount = $(fileSizeXML).find('zipFile').length;
                                                return zipFileCount;
                                            }
                                            return null;
                                        };
                                        this.getAggregateFileSizeByIndex = function (fileSizeXMLIndex) {
                                            if (this.downloadXMLData !== undefined && this.downloadXMLData !== null && fileSizeXMLIndex < this.downloadXMLData.length) {
                                                var zipFileXMLEles = $(this.downloadXMLData[fileSizeXMLIndex]).find('zipFile');
                                                var fileSizeAggregate = 0;
                                                for (var x = 0; x < zipFileXMLEles.length; x++) {
                                                    fileSizeAggregate += Number($(zipFileXMLEles[x]).attr('size'));
                                                }
                                                return fileSizeAggregate;
                                            }
                                            return null;
                                        };
                                        this.getSmallestFileSizeByFileSizeXML = function (fileSizeXML) {
                                            if (fileSizeXML !== undefined && fileSizeXML !== null) {
                                                var zipFileXMLEles = $(fileSizeXML).find('zipFile');
                                                var smallestSize = 0;
                                                for (var x = 0; x < zipFileXMLEles.length; x++) {
                                                    var currFileSize = Number($(zipFileXMLEles[x]).attr('size'));
                                                    if (smallestSize == 0 || currFileSize < smallestSize) {
                                                        smallestSize = currFileSize;
                                                    }
                                                }
                                                return smallestSize;
                                            }
                                            return null;
                                        };
                                        this.getLargestFileSizeByFileSizeXML = function (fileSizeXML) {
                                            if (fileSizeXML !== undefined && fileSizeXML !== null) {
                                                var zipFileXMLEles = $(fileSizeXML).find('zipFile');
                                                var largestSize = 0;
                                                for (var x = 0; x < zipFileXMLEles.length; x++) {
                                                    var currFileSize = Number($(zipFileXMLEles[x]).attr('size'));
                                                    if (largestSize == 0 || currFileSize > largestSize) {
                                                        largestSize = currFileSize;
                                                    }
                                                }
                                                return largestSize;
                                            }
                                            return null;
                                        };
                                        this.addLinkVistedStyleToDownloadLinks = function () {
                                            $("a[data-download-link=true]").on("click", function () {
                                                $(this).addClass(CSS_CLASS_VISITED_DOWNLOAD_LINK);
                                                if ($(this).attr('data-flash-disclaimer') == 'true') {
                                                    $(".download-notification-container").css("display", "inline-table");
                                                    setTimeout(function () {
                                                        $(".download-notification-container").fadeOut();
                                                    }, DOWNLOAD_DISCLAIMER_TIMEOUT);
                                                }
                                            });
                                        };
                                        this.generateFileDownloadHref = function (count) {
                                            var href = this.downloadUrl + '?key=' + this.downloadKey + '&count=' + count + "&zip=" + encodeURIComponent(this.downloadZipFileName) + ".zip";
                                            return href;
                                        };
                                        this.generateGroupedZipFileDownloadHref = function (count, number) {
                                            return this.downloadUrl + '?key=' + this.downloadKey + '&count=' + count + '&number=' + number + "&zip=" + encodeURIComponent(this.downloadZipFileName) + "_" + number + ".zip";
                                        };
                                        this.generateMetadataXMLHref = function () {
                                            return this.downloadMetaDataUrl + '?key=' + this.downloadKey + "&zip=" + encodeURIComponent(this.downloadZipFileName) + "_metadata.zip";
                                        };
                                        this.generateDatasetXMLHref = function () {
                                            return this.downloadDataSetUrl + '?key=' + this.downloadKey + "&zip=" + encodeURIComponent(this.downloadZipFileName) + "_dataset.zip";
                                        };
                                        this.populateMetadataDownloadLink = function (anchorId) {
                                            $("." + anchorId).attr("href", this.generateMetadataXMLHref());
                                        };
                                        this.populateDatasetDownloadLink = function (anchorId) {
                                            $("." + anchorId).attr("href", this.generateDatasetXMLHref());
                                        };
                                        BandwidthSpeedTestHandler.call(this, this.populateZipFileDownloadSpeeds);
                                    };

                                    function SimpleDownloadHandler(downloadKeyIn, totalImageSelectionSizeIn, requestedImageFormatIn, downloadUrl, downloadMetaDataUrl, downloadDataSetUrl) {
                                        this.zipFileCount = 1;
                                        this.startDownloadHandler = function () {
                                            this.clearSimpleDownloadModal();
                                            this.getFileSizeXMLAjax(this.zipFileCount);
                                        };
                                        this.showPage = function () {
                                            $('#simple-download-modal').show();
                                        };
                                        this.getFileSizeXMLCallback = function (zipFileCount) {
                                            this.startSpeedTest();
                                            this.populateModal();
                                        };
                                        this.clearSimpleDownloadModal = function () {
                                            $('#simple-modal-download-size').text(DEFAULT_SIMPLE_DOWNLOAD_FILESIZE);
                                            $('#simple-modal-download-time').text(DEFAULT_SIMPLE_DOWNLOAD_TIME_ESTIMATE);
                                            $('#simple-download-link').attr('href', '#');
                                            $('#simple-metadata-link').attr('href', '#');
                                            $(".simple-download-close-tip-container").hide();
                                            $('a[data-download-link=true]').removeClass(CSS_CLASS_VISITED_DOWNLOAD_LINK);
                                        };
                                        this.populateModal = function () {
                                            $("#simple-download-dataset").toggle(this.datasetSize > 0);
                                            $("#simple-download-file").toggle(this.getAggregateFileSizeByIndex(0) > 0);
                                            $(".simple-download-metadata-link-text").toggle(this.getAggregateFileSizeByIndex(0) > 0);
                                            $(".multi-zip").toggle(this.datasetSize > 0 && this.getAggregateFileSizeByIndex(0) > 0);
                                            this.setDownloadZipFilename();
                                            this.populateZipDownloadLink();
                                            this.displayAsArchivedImageNotification();
                                            this.populateFileSizes();
                                            this.populateMetadataDownloadLink('singlefile-download-metadata-link');
                                            this.populateDatasetDownloadLink('singlefile-download-dataset-link');
                                            this.addLinkVistedStyleToDownloadLinks();
                                            this.showPage();
                                        };
                                        this.setDownloadZipFilename = function () {
                                            this.downloadZipFileName = $('#currentCollection').find('b').text().replace(/Collection: /gi, '');
                                        };
                                        this.populateZipDownloadLink = function () {
                                            $("#simple-download-link").attr("href", this.generateFileDownloadHref(this.zipFileCount));
                                        };
                                        this.populateFileSizes = function () {
                                            var fileSizeXML = this.getFileSizeXMLDataByFileCount(this.zipFileCount);
                                            if (fileSizeXML !== null) {
                                                var fileSizeText = this.ftf.formatFileSize(this.getAggregateFileSizeByIndex(0));
                                                $("#simple-modal-download-size").text(fileSizeText);
                                            } else {
                                                alert('ERROR: fileSizeXML was null in populateFileSize.');
                                            }
                                            var fileSizeText = this.ftf.formatFileSize(this.datasetSize);
                                            $("#simple-download-dataset-size").text(fileSizeText);
                                        };
                                        this.populateZipFileDownloadSpeeds = function () {
                                            var fileSizeXML = this.getFileSizeXMLDataByFileCount(this.zipFileCount);
                                            if (fileSizeXML !== null) {
                                                var zipFileSize = this.getAggregateFileSizeByIndex(0);
                                                var downloadEstimateText = this.ftf.formatDownloadTime(zipFileSize, this.avgKbps, true);
                                                $("#simple-modal-download-time").text(downloadEstimateText);
                                            } else {
                                                alert('ERROR: fileSizeXML was null in populateFileSize.');
                                            }
                                            var downloadEstimateText = this.ftf.formatDownloadTime(this.datasetSize, this.avgKbps, true);
                                            $("#simple-download-dataset-time").text(downloadEstimateText);
                                        };
                                        this.handleInvalidDownloadKey = function () {
                                            alert('An Error Occurred\n\nEither your session has expired or there was an error retrieving your download.\n\nERROR MESSAGE:  Unable to retrieve downloadKey.');
                                        };
                                        this.displayAsArchivedImageNotification = function () {
                                            if (this.asArchivedCount > 0) {
                                                $('#simple-download-as-archived-notification-format').text(this.requestedImageFormat);
                                                $('#simple-download-as-archived-notification-item-count').text(this.asArchivedCount);
                                                $('.simple-download-as-archived-notification').css('display', 'block');
                                            }
                                        }
                                        DownloadHandler.call(this, downloadKeyIn, totalImageSelectionSizeIn, requestedImageFormatIn, this.getFileSizeXMLCallback, downloadUrl, downloadMetaDataUrl, downloadDataSetUrl);
                                    };

                                    function AdvancedDownloadHandler(downloadKeyIn, totalImageSelectionSizeIn, requestedImageFormatIn, downloadUrl, downloadMetaDataUrl, downloadDataSetUrl) {
                                        var SELECT_FILE_GROUPINGS_SINGLE_DOWNLOAD_OPTION_VALUE = 1;
                                        var LINK_PAGE_EXPIRATION_TIMEOUT_IN_MILLIS = 1000 * 60 * 60 * 24 * 10;
                                        this.desiredFileGroupings = [10, 5, 1];
                                        this.actualFileGroupings = new Array();
                                        this.fileGroupingSelectElement = $('#advanced-download-group-as-select');
                                        this.firstPageRequestTimestamp = getUrlParameter('ts');
                                        if (this.firstPageRequestTimestamp !== undefined) {
                                            var timeDiffMillis = Date.now() - this.firstPageRequestTimestamp;
                                            this.pageTimeoutDate = new Date(Date.now() + LINK_PAGE_EXPIRATION_TIMEOUT_IN_MILLIS - timeDiffMillis);
                                        } else {
                                            this.pageTimeoutDate = new Date(Date.now() + LINK_PAGE_EXPIRATION_TIMEOUT_IN_MILLIS);
                                        }
                                        this.timeoutVerbiage = "Links below will expire in EXPIRES_IN or when your download is complete.";
                                        this.timeOutInterval;
                                        this.startDownloadHandler = function () {
                                            if (this.desiredFileGroupings === undefined || this.desiredFileGroupings === null || this.desiredFileGroupings.length <= 0) {
                                                alert('ERROR - Unable to evaluate argument desiredFileGroupings');
                                                return;
                                            }
                                            var desiredFileCount = this.desiredFileGroupings.pop();
                                            this.getFileSizeXMLAjax(desiredFileCount);
                                        };
                                        this.getFileSizeXMLCallback = function (requestedZipFileCount) {
                                            var lastXMLData = this.downloadXMLData[this.downloadXMLData.length - 1];
                                            var fileCountFromXML = parseInt(this.getZipFileCountByFileSizeXML(lastXMLData));
                                            if (this.actualFileGroupings.indexOf(fileCountFromXML) < 0 && (fileCountFromXML != 0)) {
                                                this.actualFileGroupings.push(fileCountFromXML);
                                            }
                                            if (fileCountFromXML == requestedZipFileCount) {
                                                if (this.desiredFileGroupings.length > 0) {
                                                    var nextFileCountRequest = this.desiredFileGroupings.pop();
                                                    this.getFileSizeXMLAjax(nextFileCountRequest);
                                                    return;
                                                }
                                            }
                                            this.populatePage();
                                        };
                                        this.handleInvalidDownloadKey = function () {
                                            alert('An Error Occurred\n\nEither your session has expired or there was an error retrieving your download.\n\nERROR MESSAGE:  Unable to retrieve downloadKey.');
                                        };
                                        this.populateCollectionDetails = function () {
                                            var collectionDetailsText = '(' + this.totalImageSelectionSize + ' items selected)';
                                            if (this.totalImageSelectionSize == 1) {
                                                collectionDetailsText = '(' + this.totalImageSelectionSize + ' item selected)';
                                            }
                                            $('.advanced-download-collection-info-span-count').text(collectionDetailsText);
                                        }
                                        this.populatePage = function () {
                                            var count = this.getZipFileCountByFileSizeXML(this.downloadXMLData[0]);
                                            var aggregateSize = 0;
                                            for (var i = 0; i < count; i++) {
                                                aggregateSize += this.getAggregateFileSizeByIndex(i);
                                            }
                                            $(".advanced-download-files").toggle(aggregateSize > 0);
                                            if (this.datasetSize > 0) {
                                                $(".advanced-download-dataset-file").show();
                                            } else {
                                                $(".advanced-download-dataset-file").remove();
                                            }
                                            _handleSafariMsg();
                                            $(".advanced-download-files-single-metadata").toggle(aggregateSize > 0);
                                            this.setDownloadZipFilename();
                                            this.displayAsArchivedImageNotification();
                                            this.populateCollectionDetails();
                                            this.populateFileDownloadDivs();
                                            this.startSpeedTest();
                                            this.populateMetadataDownloadLink('singlefile-download-metadata-link');
                                            this.populateMetadataDownloadLink('multifile-download-metadata-link');
                                            this.populateDatasetDownloadLink('singlefile-download-dataset-link');
                                            this.populateDatasetDownloadLink('multifile-download-dataset-link');
                                            this.populateDownloadURLListLink();
                                            this.addLinkVistedStyleToDownloadLinks();
                                            this.addDisableAdvancedPageClickEvents();
                                            $('.advanced-download-info-icon').on('click', this.toggleAdvancedGroupingsInfoDialog);
                                            $('.advanced-download-groupings-info-container').on('click', this.toggleAdvancedGroupingsInfoDialog);
                                            $('.advanced-download-close-button').on('click', this.closeAdvancedDownloadWindow);
                                            $('.advanced-download-page-expired-close-button').on('click', this.closeAdvancedDownloadWindow);
                                            this.updateTimeoutInterval(this.pageTimeoutDate, this.timeoutVerbiage, this.pageTimeout);
                                            this.timeOutInterval = setInterval(this.updateTimeoutInterval, 1000, this.pageTimeoutDate, this.timeoutVerbiage, this.pageTimeout);
                                        };
                                        this.populateZipFileDownloadSpeeds = function () {
                                            this.updateSelectOptionsDownloadEstimates();
                                            this.updateSingeFileDivDownloadEstimates();
                                            this.updateMultipleFileDivDownloadEstimates();
                                        };
                                        this.updateSingeFileDivDownloadEstimates = function () {
                                            var zipFileSize = this.getAggregateFileSizeByIndex(0);
                                            $("#advanced-download-single-download-time").text(this.generateZipFileDownloadEstimate(zipFileSize));
                                            var zipFileSize = this.datasetSize;
                                            $("#advanced-download-single-dataset-time").text(this.generateZipFileDownloadEstimate(zipFileSize));
                                        };
                                        this.updateMultipleFileDivDownloadEstimates = function () {
                                            for (var x = 1; x < this.actualFileGroupings.length; x++) {
                                                var fileCount = this.actualFileGroupings[x];
                                                var fileGroupingDIV = ('#advanced-download-files-list-container_' + fileCount);
                                                var fileListTRs = $(fileGroupingDIV).find('tr');
                                                for (var y = 0; y < fileListTRs.length; y++) {
                                                    var fileListTR = fileListTRs[y];
                                                    var fileEstimateTDEles = $(fileListTR).find('td');
                                                    var zipFileSize = this.getFileSizeByFileCountAndNumber(fileCount, y + 1);
                                                    $(fileEstimateTDEles).siblings('#advanced-download-files-list-td-time').text(this.generateZipFileDownloadEstimate(zipFileSize));
                                                }
                                            }
                                            var zipFileSize = this.datasetSize;
                                            $(".advanced-download-multi-dataset-time").text(this.generateZipFileDownloadEstimate(zipFileSize));
                                        };
                                        this.updateSelectOptionsDownloadEstimates = function () {
                                            for (var index = 0; index < this.fileGroupingSelectElement.children().length; index++) {
                                                $(this.fileGroupingSelectElement.children()[index]).text(this.generateOptionTextByIndex(index));
                                            }
                                        };
                                        this.populateFileDownloadDivs = function () {
                                            this.populateFileGroupingsSelect();
                                            this.populateSingleDownloadDiv();
                                            this.populateMultipleZipFileDownloadDiv();
                                        };
                                        this.setDownloadZipFilename = function () {
                                            this.downloadZipFileName = getUrlParameter("collectionName");
                                        };
                                        this.populateDownloadURLListLink = function () {
                                            var link = document.createElement("a");
                                            if (navigator.msSaveBlob || link.download !== undefined) {
                                                $('.multifile-url-list-link').click(this.downloadURLCSV);
                                            } else {
                                                $('.multifile-url-list-link').hide();
                                            }
                                        };
                                        this.populateMultipleZipFileDownloadDiv = function () {
                                            for (var x = 1; x < this.actualFileGroupings.length; x++) {
                                                var fileCount = this.actualFileGroupings[x];
                                                var fileListDivClone = $('#advanced-download-files-list-container').clone();
                                                var fileListTable = $(fileListDivClone).find('#advanced-download-files-list-table');
                                                var fileTr = $(fileListTable).find('tbody tr');
                                                for (var y = 1; y <= fileCount; y++) {
                                                    var clonedTr = fileTr.clone();
                                                    clonedTr = this.createNewZipFileDownloadTr(clonedTr, fileCount, y);
                                                    $(fileListTable).append(clonedTr);
                                                }
                                                fileTr.remove();
                                                $(fileListDivClone).attr('id', 'advanced-download-files-list-container_' + fileCount);
                                                var cssGroupVal = 0;
                                                if (fileCount <= 5) {
                                                    cssGroupVal = 5;
                                                } else {
                                                    cssGroupVal = 10;
                                                }
                                                $(fileListTable).addClass("advanced-download-files-grouping-common-" + cssGroupVal);
                                                $(fileListTable).addClass("advanced-download-files-list-table-" + cssGroupVal);
                                                $('#advanced-download-files-container').prepend(fileListDivClone);
                                                var zipFileSize = this.datasetSize;
                                                var fileSizeText = this.ftf.formatFileSize(zipFileSize);
                                                $(".advanced-download-multi-dataset-size").text(fileSizeText);
                                            }
                                        };
                                        this.createNewZipFileDownloadTr = function (clonedTr, count, number) {
                                            var newFileLink = clonedTr.find('#advanced-download-files-list-zipfile-link');
                                            $(newFileLink).text("Zip File ");
                                            $(newFileLink).attr("href", this.generateGroupedZipFileDownloadHref(count, number));
                                            $(newFileLink).attr("data-download-link", "true");
                                            $(newFileLink).attr("data-disable-advanced-download", "true");
                                            var zipFileSize = this.getFileSizeByFileCountAndNumber(count, number);
                                            var fileSizeText = this.ftf.formatFileSize(zipFileSize);
                                            clonedTr.find('#advanced-download-files-list-td-size').text(fileSizeText);
                                            clonedTr.find('#advanced-download-files-list-td-time').text(this.generateZipFileDownloadEstimate(zipFileSize));
                                            return clonedTr;
                                        };
                                        this.generateZipFileDownloadEstimate = function (zipFileSize) {
                                            var downloadEstimateText = '';
                                            if (!this.hasBandwidthSpeedTestStarted()) {
                                                downloadEstimateText = "...";
                                            } else {
                                                downloadEstimateText = this.ftf.formatDownloadTime(zipFileSize, this.avgKbps, true);
                                            }
                                            return downloadEstimateText;
                                        };
                                        this.populateSingleDownloadDiv = function () {
                                            $("#advanced-download-files-single-link").attr("href", this.generateFileDownloadHref(1));
                                            $("#advanced-download-files-single-metadata-link").attr("href", this.generateMetadataXMLHref());
                                            $("#advanced-download-files-single-dataset-link").attr("href", this.generateDatasetXMLHref());
                                            var fileSizeText = this.ftf.formatFileSize(this.getAggregateFileSizeByIndex(0));
                                            $("#advanced-download-single-download-size").text(fileSizeText);
                                            var fileSizeText = this.ftf.formatFileSize(this.datasetSize);
                                            $("#advanced-download-single-dataset-size").text(fileSizeText);
                                            var zipFileSize = this.getAggregateFileSizeByIndex(0);
                                            $("#advanced-download-single-download-time").text("...");
                                        };
                                        this.generateOptionTextByIndex = function (index) {
                                            var option = this.fileGroupingSelectElement.children()[index];
                                            var fileCount = this.actualFileGroupings[index];
                                            var fileSizeXML = this.getFileSizeXMLDataByFileCount(fileCount);
                                            var smallestFileSize = this.getSmallestFileSizeByFileSizeXML(fileSizeXML);
                                            var largestFileSize = this.getLargestFileSizeByFileSizeXML(fileSizeXML);
                                            var optionText = '';
                                            var downloadTimeText1 = '';
                                            var downloadTimeText2 = '';
                                            if (index == 0) {
                                                var size = this.getAggregateFileSizeByIndex(0);
                                                if (size > 0 && this.datasetSize) {
                                                    fileCount++;
                                                }
                                                if (size === 0) size += this.datasetSize;
                                                var sizeText = this.ftf.formatFileSize(size);
                                                if (!this.hasBandwidthSpeedTestStarted()) {
                                                    downloadTimeText1 = "...";
                                                } else {
                                                    downloadTimeText1 = this.ftf.formatDownloadTime(size, this.avgKbps, true);
                                                    if (fileCount > 1) {
                                                        downloadTimeText1 += " - ";
                                                        downloadTimeText1 += this.ftf.formatDownloadTime(this.datasetSize, this.avgKbps, false);
                                                        sizeText += "-";
                                                        sizeText += this.ftf.formatFileSize(this.datasetSize);
                                                    }
                                                }
                                                optionText = '(Default) ' + fileCount + ' Zip file' + (fileCount > 1 ? 's' : '') + ' | ' + sizeText + ' | ' + downloadTimeText1;
                                            } else {
                                                if (this.datasetSize) fileCount++;
                                                if (!this.hasBandwidthSpeedTestStarted()) {
                                                    downloadTimeText1 = "...";
                                                    downloadTimeText2 = "";
                                                } else {
                                                    downloadTimeText1 = this.ftf.formatDownloadTime(smallestFileSize, this.avgKbps, true);
                                                    downloadTimeText2 = this.ftf.formatDownloadTime(largestFileSize, this.avgKbps, false);
                                                }
                                                optionText = fileCount + ' Zip Files | ' + this.ftf.formatFileSize(smallestFileSize) + '-' + this.ftf.formatFileSize(largestFileSize) + ' | ' + downloadTimeText1 + " - " + downloadTimeText2;
                                            }
                                            return optionText;
                                        };
                                        this.populateFileGroupingsSelect = function () {
                                            this.actualFileGroupings.forEach(function (entry, index) {
                                                var optionText = this.generateOptionTextByIndex(index);
                                                var fileCount = entry;
                                                this.fileGroupingSelectElement.append($("<option/>", {
                                                    value: fileCount,
                                                    text: optionText
                                                }));
                                            }, this);
                                            $(this.fileGroupingSelectElement).change(this.onChangeFileGroupSelector);
                                        };
                                        this.onChangeFileGroupSelector = function () {
                                            var newGroupVal = $(this).val();
                                            if (newGroupVal == SELECT_FILE_GROUPINGS_SINGLE_DOWNLOAD_OPTION_VALUE) {
                                                $("#advanced-download-files-list-container-parent").css("display", "none");
                                                $("[id^=advanced-download-files-list-container]").css("display", "none");
                                                $(".advanced-download-files-single-container").css("display", "block");
                                            } else {
                                                $(".advanced-download-files-single-container").css("display", "none");
                                                $("[id^=advanced-download-files-list-container]").css("display", "none");
                                                $("#advanced-download-files-list-container-parent").css("display", "block");
                                                $("#advanced-download-files-list-container_" + newGroupVal).css("display", "block");
                                                $(".advanced-download-files-list-additional-files").removeClass("advanced-download-files-grouping-common-5");
                                                $(".advanced-download-files-list-additional-files").removeClass("advanced-download-files-grouping-common-10");
                                                var cssGroupVal = 0;
                                                if (newGroupVal <= 5) {
                                                    cssGroupVal = 5;
                                                } else {
                                                    cssGroupVal = 10;
                                                }
                                                $(".advanced-download-files-list-additional-files").addClass("advanced-download-files-grouping-common-" + cssGroupVal);
                                            }
                                            _handleSafariMsg();
                                        };
                                        this.downloadURLCSV = function () {
                                            var prefix = getUrlParameter("collectionName").replace(/[^\w\s]/gi, '');
                                            if (prefix == '') {
                                                prefix = 'url_list';
                                            }
                                            var filename = prefix + '.csv';
                                            var e = document.getElementById("advanced-download-group-as-select");
                                            var groupVal = e.options[e.selectedIndex].value;
                                            var zipLinks;
                                            var metadataLink;
                                            if (groupVal == 0) {
                                                zipLinks = $(".advanced-download-files-single-container").find('a');
                                                metadataLink = $("#advanced-download-files-single-metadata-link").attr('href');
                                            } else {
                                                zipLinks = $("#advanced-download-files-list-container_" + groupVal).find('a');
                                                metadataLink = $("#multifile-download-metadata-link").attr('href');
                                            }
                                            var csvFile = '';
                                            zipLinks.each(function (anchorEle) {
                                                if (!$(this).is('.multifile-url-list-link')) {
                                                    csvFile += $(this).attr('href') + "\n";
                                                }
                                            });
                                            var blob = new Blob([csvFile], {type: 'text/csv;charset=utf-8;'});
                                            if (navigator.msSaveBlob) {
                                                navigator.msSaveBlob(blob, filename);
                                            } else {
                                                var link = document.createElement("a");
                                                if (link.download !== undefined) {
                                                    var url = URL.createObjectURL(blob);
                                                    link.setAttribute("href", url);
                                                    link.setAttribute("download", filename);
                                                    link.style.visibility = 'hidden';
                                                    document.body.appendChild(link);
                                                    link.click();
                                                    document.body.removeChild(link);
                                                }
                                            }
                                        };
                                        this.addDisableAdvancedPageClickEvents = function () {
                                            $("a[data-disable-advanced-download=true]").on("click", function () {
                                                $('.advanced-download-group-as-span-cannot-change').css("visibility", "visible");
                                                $(this.fileGroupingSelectElement).prop('disabled', true);
                                                document.getElementById("advanced-download-group-as-select").disabled = true;
                                            });
                                        };
                                        this.pageTimeout = function () {
                                            $('.advanced-download-close-button-container').css("visibility", "hidden");
                                            $('.advanced-download-collection-info-span-expiration').css("visibility", "hidden");
                                            $('.advanced-download-page-expired-container').css('display', 'block');
                                            clearTimeout(this.timeOutInterval);
                                        };
                                        this.updateTimeoutInterval = function (pageTimeoutDate, timeoutVerbiage, timeoutPageCallback) {
                                            var timeLeft = _getTimeRemaining(pageTimeoutDate);
                                            var expiresUnits = '';
                                            var expiresValue = '';
                                            if (timeLeft.days > 0) {
                                                expiresUnits = 'day';
                                                if (timeLeft.days > 1) {
                                                    expiresUnits += 's';
                                                }
                                                expiresValue = timeLeft.days;
                                            } else if (timeLeft.hours > 0) {
                                                expiresUnits = 'hour';
                                                if (timeLeft.hours > 1) {
                                                    expiresUnits += 's';
                                                }
                                                expiresValue = timeLeft.hours;
                                            } else if (timeLeft.minutes > 0) {
                                                expiresUnits = 'minute';
                                                if (timeLeft.minutes > 1) {
                                                    expiresUnits += 's';
                                                }
                                                expiresValue = timeLeft.minutes;
                                            } else if (timeLeft.seconds > 0) {
                                                expiresUnits = 'second';
                                                if (timeLeft.seconds > 1) {
                                                    expiresUnits += 's';
                                                }
                                                expiresValue = timeLeft.seconds;
                                            }
                                            if (expiresUnits != '') {
                                                $('.advanced-download-collection-info-span-expiration').text(timeoutVerbiage.replace(/EXPIRES_IN/gi, expiresValue + ' ' + expiresUnits));
                                            } else {
                                                timeoutPageCallback();
                                            }
                                        };
                                        this.toggleAdvancedGroupingsInfoDialog = function () {
                                            var popupDialog = $('.advanced-download-groupings-info-container');
                                            var popupDisplayValue = popupDialog.css('display');
                                            if (popupDisplayValue == 'block') {
                                                popupDialog.css('display', 'none');
                                            } else {
                                                popupDialog.css('display', 'block');
                                            }
                                        }
                                        this.closeAdvancedDownloadWindow = function () {
                                            try {
                                                window.opener.advancedDownloadRefreshFocus();
                                                var collectionTab = window.open('', 'collectionTab');
                                                collectionTab.focus();
                                            } catch (e) {
                                            }
                                            window.close();
                                        };
                                        this.displayAsArchivedImageNotification = function () {
                                            if (this.asArchivedCount > 0) {
                                                $('#advanced-download-as-archived-notification-format').text(this.requestedImageFormat);
                                                $('#advanced-download-as-archived-notification-item-count').text(this.asArchivedCount);
                                                $('.advanced-download-as-archived-notification').css('display', 'block');
                                            }
                                        }

                                        function _getTimeRemaining(endDate) {
                                            var t = endDate - Date.parse(new Date());
                                            var days = Math.round(t / (1000 * 60 * 60 * 24));
                                            if (days == 0) {
                                                var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
                                                if (hours == 0) {
                                                    var minutes = Math.floor((t / 1000 / 60) % 60);
                                                    if (minutes == 0) {
                                                        var seconds = Math.floor((t / 1000) % 60);
                                                    }
                                                }
                                            }
                                            return {
                                                'total': t,
                                                'days': days,
                                                'hours': hours,
                                                'minutes': minutes,
                                                'seconds': seconds
                                            };
                                        }

                                        function _handleSafariMsg() {
                                            var links = $(".advanced-download-files-container a:visible");
                                            links = links.not(".multifile-download-metadata-link")
                                            links = links.not(".advanced-download-files-single-metadata-link");
                                            links = links.not(".multifile-url-list-link");
                                            $(".multi-zip").toggle(links.length > 1);
                                        }

                                        DownloadHandler.call(this, downloadKeyIn, totalImageSelectionSizeIn, requestedImageFormatIn, this.getFileSizeXMLCallback, downloadUrl, downloadMetaDataUrl, downloadDataSetUrl);
                                    };

                                    function AsArchivedSimpleDownloadHandler(xml, downloadUrl, downloadMetadataUrl) {
                                        var _modal = $("#simple-download-modal");
                                        var _zipName = $('#currentCollection').find('b').text().replace(/Collection: /gi, '');
                                        var _imageFile = _zipName + ".zip";
                                        var _datasetFile = _zipName + "_dataset.zip";
                                        var _metadataFile = _zipName + "_metadata.zip";
                                        var _connectionSpeed = 0;
                                        this.show = function () {
                                            _modal.show();
                                            var tester = new BandwidthSpeedTestHandler(function () {
                                                _connectionSpeed = tester.avgKbps;
                                                _populate();
                                            });
                                            try {
                                                tester.startSpeedTest();
                                            } catch (e) {
                                                _populate();
                                            }
                                        };

                                        function _populate() {
                                            var option = $(xml).find("option1");
                                            var files = option.find("zipFile");
                                            if (files.length === 0) {
                                                throw "No files to parse";
                                                return;
                                            }
                                            var metadataKeys = [];
                                            files.each(function () {
                                                var path = $(this).attr("path");
                                                var size = $(this).attr("size");
                                                if (path.indexOf("ida1") > -1) {
                                                    var tr = _modal.find("#simple-download-file");
                                                    var url = downloadUrl + "/" + path + "/" + _imageFile;
                                                    _populateRow(tr, url, size);
                                                } else {
                                                    var tr = _modal.find("#simple-download-dataset");
                                                    var url = downloadUrl + "/" + path + "/" + _datasetFile;
                                                    _populateRow(tr, url, size);
                                                }
                                                metadataKeys.push(path.replace(/ida[1|2][\/]/, ''));
                                            });
                                            var link = _modal.find(".simple-download-metadata-link-text");
                                            var url = downloadMetadataUrl;
                                            for (var i = 0; i < metadataKeys.length; i++) {
                                                url += (i == 0 ? "?" : "&") + "key=" + metadataKeys[i];
                                            }
                                            url += "&zip=" + _metadataFile;
                                            link.attr("href", url).show();
                                            if (files.length > 1) _modal.find(".multi-zip").show();
                                        };

                                        function _populateRow(tr, url, size) {
                                            tr.find("td").first().find("a").attr("href", url);
                                            var sizeValue = new FileTimeFormatter().formatFileSize(size);
                                            tr.find("td").eq(1).find(".size-value").text(sizeValue);
                                            time = new FileTimeFormatter().formatDownloadTime(size, _connectionSpeed, true);
                                            tr.find("td").eq(2).find("span:last").text(time);
                                            tr.show();
                                        };

                                        function _reset() {
                                            _modal.find(".simple-download-as-archived-notification").hide();
                                            _modal.find("#simple-download-file").hide();
                                            _modal.find("#simple-download-dataset").hide();
                                            _modal.find(".simple-download-metadata-link-text").hide();
                                            _modal.find('#simple-modal-download-size').text("...");
                                            _modal.find('#simple-modal-download-time').text("...");
                                            _modal.find(".simple-download-close-tip-container").hide();
                                            _modal.find('a[data-download-link=true]').removeClass("download-link-visited");
                                            _modal.find(".multi-zip").hide();
                                        };
                                        (function init() {
                                            downloadUrl = downloadUrl.replace(/\/image*/, '/files');
                                            _reset();
                                            _modal.on("click", "a[data-download-link='true']", function () {
                                                $(this).addClass("download-link-visited");
                                            });
                                        })();
                                    };

                                    function AsArchivedAdvancedHandler(collectionName, downloadUrl, downloadMetadataUrl, timestamp) {
                                        var _xml;
                                        var _modal = $(".advanced-download-root-container");
                                        var _dropdown = _modal.find('#advanced-download-group-as-select');
                                        var _imageFile = collectionName;
                                        var _datasetFile = collectionName + "_dataset.zip";
                                        var _metadataFile = collectionName + "_metadata.zip";
                                        var _options = [];
                                        var _connectionSpeed = 0;
                                        this.show = function () {
                                            _modal.show();
                                            var tester = new BandwidthSpeedTestHandler(function () {
                                                _connectionSpeed = tester.avgKbps;
                                                _consolidate();
                                                _populateDropdown();
                                                _populate();
                                            });
                                            try {
                                                tester.startSpeedTest();
                                            } catch (e) {
                                                _consolidate();
                                                _populateDropdown();
                                                _populate();
                                                ;
                                            }
                                        };

                                        function _closeWindow() {
                                            try {
                                                window.opener.advancedDownloadRefreshFocus();
                                                var collectionTab = window.open('', 'collectionTab');
                                                collectionTab.focus();
                                            } catch (e) {
                                            }
                                            window.close();
                                        };

                                        function _consolidate() {
                                            var options = [];
                                            var downloadOptions = _xml.find("zipFiles").children();
                                            downloadOptions.each(function (i) {
                                                var o = {};
                                                o.files = [];
                                                o.metadataKeys = [];
                                                var files = $(this).find("zipFile");
                                                var minSize = Infinity, maxSize = -Infinity;
                                                files.each(function (j) {
                                                    var f = {};
                                                    f.path = $(this).attr("path");
                                                    f.url = downloadUrl + "/" + f.path + "/"
                                                    if (f.path.indexOf("ida1/") > -1) {
                                                        f.url += _imageFile;
                                                        f.url += j > 0 ? j : "";
                                                        f.url += ".zip";
                                                    } else {
                                                        f.url += _datasetFile;
                                                    }
                                                    f.size = +$(this).attr("size");
                                                    f.sizeValue = new FileTimeFormatter().formatFileSize(f.size);
                                                    minSize = Math.min(minSize, f.size);
                                                    maxSize = Math.max(maxSize, f.size);
                                                    f.time = new FileTimeFormatter().formatDownloadTime(f.size, _connectionSpeed, true);
                                                    o.files.push(f);
                                                    if (i == 0) {
                                                        o.metadataKeys.push(f.path.replace(/ida[1|2][\/]/, ''));
                                                    }
                                                });
                                                var display = i == 0 ? "(Default) " : "";
                                                display += files.length + " Zip File";
                                                display += files.length > 1 ? "s" : "";
                                                display += " | ";
                                                display += new FileTimeFormatter().formatFileSize(minSize);
                                                display += " - " + new FileTimeFormatter().formatFileSize(maxSize);
                                                display += " | ";
                                                display += new FileTimeFormatter().formatDownloadTime(minSize, _connectionSpeed, true);
                                                display += " - ";
                                                display += new FileTimeFormatter().formatDownloadTime(maxSize, _connectionSpeed, false);
                                                o.display = display;
                                                options.push(o);
                                            });
                                            _options = options;
                                        };

                                        function _downloadUrlList(e) {
                                            e.preventDefault();
                                            var option = _dropdown.find(":selected").val();
                                            option = _options[option];
                                            var urls = [];
                                            for (var i = 0; i < option.files.length; i++) {
                                                urls.push(option.files[i].url);
                                            }
                                            urls = urls.join("\n");
                                            var fileName = collectionName + ".csv";
                                            var blob = new Blob([urls], {type: 'text/csv;charset=utf-8;'});
                                            if (navigator.msSaveBlob) {
                                                navigator.msSaveBlob(blob, fileName);
                                            } else {
                                                var link = document.createElement("a");
                                                if (link.download !== undefined) {
                                                    var url = URL.createObjectURL(blob);
                                                    link.setAttribute("href", url);
                                                    link.setAttribute("download", fileName);
                                                    link.style.visibility = 'hidden';
                                                    document.body.appendChild(link);
                                                    link.click();
                                                    document.body.removeChild(link);
                                                }
                                            }
                                        };

                                        function _onLinkClick() {
                                            $(this).addClass("download-link-visited");
                                            _dropdown.prop("disabled", "disabled");
                                            var msg = _modal.find(".advanced-download-group-as-span-cannot-change");
                                            msg.css("visibility", "visible");
                                        };

                                        function _populate() {
                                            var option = _dropdown.find(":selected").val();
                                            option = _options[option];
                                            var container = _modal.find(".advanced-download-files-container");
                                            container.empty();
                                            var table = $("<table></table>");
                                            table.addClass("advanced-download-files-table");
                                            container.append(table);
                                            for (var i = 0; i < option.files.length; i++) {
                                                table.append(_populateRow(option.files[i]));
                                            }
                                            var tr = _populateMetadataRow(_options[0].metadataKeys, option.files.length > 1);
                                            table.append(tr);
                                        };

                                        function _populateDropdown() {
                                            _dropdown.empty();
                                            for (var i = 0; i < _options.length; i++) {
                                                var option = $("<option></option>");
                                                option.attr("value", i);
                                                option.text(_options[i].display);
                                                _dropdown.append(option);
                                            }
                                        };

                                        function _populateMetadataRow(metadataKeys, showUrlList) {
                                            var tr = $("<tr></tr>");
                                            var td = $("<td></td>");
                                            td.addClass("multifile-download-metadata-link-parent");
                                            tr.append(td);
                                            if (metadataKeys.length > 0) {
                                                var a = $("<a></a>")
                                                a.addClass("multifile-download-metadata-link");
                                                a.text("Metadata");
                                                var url = downloadMetadataUrl;
                                                for (var i = 0; i < metadataKeys.length; i++) {
                                                    url += (i == 0 ? "?" : "&") + "key=" + metadataKeys[i];
                                                }
                                                url += "&zip=" + _metadataFile;
                                                a.attr("href", url);
                                                a.attr("data-download-link", true);
                                                td.append(a);
                                            }
                                            tr.append("<td></td>");
                                            var td = $("<td></td>");
                                            td.addClass("multifile-download-url-link");
                                            tr.append(td);
                                            if (showUrlList) {
                                                var a = $("<a></a>");
                                                a.addClass("download-url-list");
                                                a.attr("data-download-link", true);
                                                a.text("URL List");
                                                a.attr("href", "#");
                                                td.append(a);
                                            }
                                            return tr;
                                        };

                                        function _populateRow(file) {
                                            var tr = $("<tr></tr>");
                                            var td = $("<td></td>");
                                            td.addClass("advanced-download-files-list-td-link");
                                            var a = $("<a></a>");
                                            a.addClass("advanced-download-files-list-zipfile-link");
                                            a.attr("href", file.url);
                                            a.attr("data-download-link", true);
                                            a.text("Zip File ");
                                            td.append(a);
                                            tr.append(td);
                                            var td = $("<td></td>");
                                            td.addClass("advanced-download-files-list-td-size");
                                            td.text(file.sizeValue);
                                            tr.append(td);
                                            var td = $("<td></td>");
                                            td.addClass("advanced-download-files-list-td-time");
                                            td.text(file.time);
                                            tr.append(td);
                                            return tr;
                                        };

                                        function _updatePageExpiration() {
                                            var startDate = window.localStorage.getItem("startDate") || (new Date()).getTime();
                                            var timeout = 1000 * 60 * 60 * 24 * 10 + +startDate;
                                            var elem = $('.advanced-download-collection-info-span-expiration');
                                            var timeoutId = setInterval(function () {
                                                var remaining = timeout - (new Date()).getTime();
                                                if (remaining <= 0) {
                                                    clearInterVal(timeoutId);
                                                    _modal.find('.advanced-download-close-button-container').css("visibility", "hidden");
                                                    _modal.find('.advanced-download-collection-info-span-expiration').css("visibility", "hidden");
                                                    _modal.find('.advanced-download-page-expired-container').css('display', 'block');
                                                    return;
                                                }
                                                var time = Math.round(remaining / (1000 * 60 * 60 * 24));
                                                var units = "day";
                                                if (time == 0) {
                                                    time = Math.floor((remaining / (1000 * 60 * 60)) % 24);
                                                    units = "hour";
                                                    if (time == 0) {
                                                        time = Math.floor((remaining / 1000 / 60) % 60);
                                                        units = "minute";
                                                        if (time == 0) {
                                                            time = Math.floor((remaining / 1000) % 60);
                                                            units = "second";
                                                        }
                                                    }
                                                }
                                                units += time > 1 ? "s" : "";
                                                var msg = "Links below will expire in " + time + " " + units +
                                                    " or when your download is complete.";
                                                elem.text(msg);
                                            }, 1000);
                                        };
                                        (function init() {
                                            _xml = $.parseXML(window.localStorage.getItem("downloadKeys" + timestamp));
                                            _xml = $(_xml);
                                            downloadUrl = downloadUrl.replace(/\/image*/, '/files');
                                            _updatePageExpiration();
                                            _dropdown.on("change", _populate);
                                            _modal.on("click", ".download-url-list", _downloadUrlList);
                                            var total = _xml.find("zipFiles").attr("total");
                                            total = "(" + total + " items selected)";
                                            _modal.find(".advanced-download-collection-info-span-count").text(total);
                                            _modal.on("click", "a[data-download-link='true']", _onLinkClick);
                                            _modal.find('.advanced-download-info-icon').on('click', function () {
                                                _modal.find(".advanced-download-groupings-info-container").show();
                                            });
                                            _modal.find(".advanced-download-groupings-info-container").on("click", function () {
                                                $(this).hide();
                                            });
                                            _modal.find('.advanced-download-close-button').on('click', _closeWindow);
                                            _modal.find('.advanced-download-page-expired-close-button').on('click', _closeWindow);
                                        })();
                                    };
                                </script>


                                <!--
COPYRIGHT NOTICE
Copyright (c) 2021  Scott C. Neu and Arthur W. Toga
See README.license for license notices.
-->
                                <script>
                                    function DownloadKeyHandler(collectionForm, downloadKeyCallback) {
                                        this.form = collectionForm;
                                        this.getDownloadKeyCallback = downloadKeyCallback;
                                        this.requestedImageFormat;
                                        this.downloadKey;
                                        this.totalImageSelectionSize;
                                        this.isErrorXml = false;
                                        this.returnedXml;
                                        this.getDownloadKey = function () {
                                            if (this.downloadKey === undefined) {
                                                var formArray = $(this.form).serializeArray(), formItems = {};
                                                $(formArray).each(function (i, field) {
                                                    formItems[field.name] = field.value;
                                                });
                                                this.requestedImageFormat = formItems['format'];
                                                var formData = $(this.form).serialize();
                                                var downloadUrl = "/pages/ajax/download/downloadKey";
                                                if (formItems['format'] == "AS_ARCHIVED") {
                                                    downloadUrl = "/pages/ajax/download/downloadKeys";
                                                    if (DownloadKeyHandler.previousFormData == formData) {
                                                        onSuccess.call(this, DownloadKeyHandler.previousDownloadKeyXML);
                                                        return;
                                                    }
                                                }
                                                $.ajax({
                                                    url: downloadUrl,
                                                    data: formData,
                                                    context: this,
                                                    method: "POST",
                                                    success: onSuccess
                                                });

                                                function onSuccess(downloadKeyXML) {
                                                    DownloadKeyHandler.previousDownloadKeyXML = downloadKeyXML;
                                                    DownloadKeyHandler.previousFormData = formData;
                                                    this.returnedXml = downloadKeyXML;
                                                    var errorXMLNode = $(downloadKeyXML).find('errorMessage');
                                                    if ($(errorXMLNode).length > 0) {
                                                        resetLocalVars();
                                                        this.isErrorXml = true;
                                                        return;
                                                    }
                                                    this.isErrorXml = false;
                                                    if (formItems['format'] == "AS_ARCHIVED") {
                                                        var downloadXMLNode = $(downloadKeyXML).find('zipFiles');
                                                        if ($(downloadXMLNode).length > 0) {
                                                            this.getDownloadKeyCallback(null, null, this.requestedImageFormat, downloadXMLNode);
                                                            return;
                                                        }
                                                    } else {
                                                        var downloadXMLNode = $(downloadKeyXML).find('download');
                                                        if ($(downloadXMLNode).length > 0) {
                                                            this.downloadKey = $(downloadXMLNode).attr('downloadKey');
                                                            this.totalImageSelectionSize = $(downloadXMLNode).attr('totalSize');
                                                            this.getDownloadKeyCallback(this.downloadKey, this.totalImageSelectionSize, this.requestedImageFormat);
                                                            return;
                                                        }
                                                    }
                                                    resetLocalVars();
                                                    alert('An unexpected error has prevented you from downloading the image series.');
                                                };
                                            }
                                        };

                                        function resetLocalVars() {
                                            this.downloadKey = undefined;
                                            this.totalImageSelectionSize = undefined;
                                            this.isErrorXml = false;
                                            this.form = undefined;
                                        }
                                    };
                                </script>

                                <script>
                                    function getIDACookieValue(name) {
                                        var value = "; " + document.cookie;
                                        var parts = value.split("; " + name + "=");
                                        if (parts.length == 2) return parts.pop().split(";").shift();
                                    }

                                    function getUrlParameter(name) {
                                        if (name = (new RegExp('[?&]' + encodeURIComponent(name) + '=([^&]*)')).exec(location.search))
                                            return decodeURIComponent(name[1]);
                                    }

                                </script>


                                <link rel="stylesheet" href="/pages/jquery/tooltip/jquery.tooltip.css">
                                <link type="text/css" rel="stylesheet" href="/pages/css/search/collectTab.css">
                                <script src="/pages/jquery/tooltip/jquery.bgiframe.js" type="text/javascript"></script>
                                <script src="/pages/jquery/tooltip/jquery.tooltip.min.js"
                                        type="text/javascript"></script>

                                <style>
                                    /* Styles to center table data. */
                                    #tableData div {
                                        text-align: center;
                                        margin-left: auto;
                                        margin-right: auto;
                                    }
                                </style>


                                <!--
COPYRIGHT NOTICE
Copyright (c) 2021  Scott C. Neu and Arthur W. Toga

See README.license for license notices.
-->


                                <link type="text/css" rel="stylesheet" href="/pages/css/search/simpleDownloadModal.css">

                                <!-- Simple Download Modal -->
                                <div id="simple-download-modal" class="simple-download-modal">
                                    <!-- Simple Download Modal Content -->
                                    <div class="simple-download-modal-content">
                                        <div class="simple-download-popup-header">
                                            1-Click Download
                                        </div>

                                        <div class="safari-msg">
                                            <span class="notice">Important for Safari Users:</span> Before downloading
                                            the Zip file<span class="multi-zip">s</span> make
                                            sure “Open 'safe' files after downloading” is unchecked in your Safari
                                            General
                                            Preferences. Leaving this checked may result in issues when unzipping
                                            downloaded files.
                                        </div>

                                        <div class="simple-download-tips">
                                            <div class="simple-download-tips-title">Downloading Tips</div>

                                            <div class="simple-download-tips-section">
                                                <div class="simple-download-tips-section-title">General</div>
                                                <div class="simple-download-tips-section-content">
                                                    <ul>
                                                        <li>This download will stop if your connection is interrupted or
                                                            session expires.
                                                        </li>
                                                        <li>For more download options, close this window and then click
                                                            the Advanced Download button on the Collections page.
                                                        </li>
                                                        <li>If you are experiencing issues downloading as NiFTI try
                                                            downloading “As Archived.”
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="simple-download-tips-section dark">
                                                <div class="simple-download-tips-section-title">Zip Files</div>
                                                <div class="simple-download-tips-section-content">
                                                    <ul>
                                                        <li>Zip files will be downloaded in Zip64 format.</li>
                                                        <li>If you are experiencing issues unzipping your files make
                                                            sure your decompressor is able to unzip Zip64 files.
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                        <hr>


                                        <div class="simple-download-as-archived-notification">
                                            <span class="simple-download-as-archived-notification-text-note">NOTE:</span>
                                            not all images are available in <span
                                                id="simple-download-as-archived-notification-format"
                                                class="simple-download-as-archived-notification-text-bold">ANALYZE</span>
                                            format - <span
                                                id="simple-download-as-archived-notification-item-count">XXX</span>
                                            items will be downloaded <span
                                                class="simple-download-as-archived-notification-text-bold">As Archived</span>.
                                        </div>

                                        <div class="download-links">
                                            <table>

                                                <tbody>
                                                <tr id="simple-download-file">
                                                    <td><a class="simple-download-download-link"
                                                           id="simple-download-link" data-download-link="true"
                                                           data-flash-disclaimer="true">Zip File </a></td>
                                                    <td>
                                                        <div class="simple-download-file-size simple-download-file-details">
                                                            <span class="size-text">Size: </span>
                                                            <span id="simple-modal-download-size"
                                                                  class="size-value">...</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="simple-download-file-time-estimate simple-download-file-details">
                                                            <span>Time estimate: </span>
                                                            <span id="simple-modal-download-time">...</span>
                                                        </div>
                                                    </td>
                                                </tr>


                                                <tr id="simple-download-dataset">
                                                    <td>
                                                        <a class="simple-download-dataset-link-text singlefile-download-dataset-link"
                                                           data-download-link="true">Zip File </a></td>
                                                    <td>
                                                        <div class="simple-download-file-details">
                                                            <span class="size-text">Size: </span>
                                                            <span id="simple-download-dataset-size" class="size-value">...</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="simple-download-file-details">
                                                            <span class="size-text">Time estimate: </span>
                                                            <span id="simple-download-dataset-time" class="size-value">...</span>
                                                        </div>
                                                    </td>
                                                </tr>


                                                <tr>
                                                    <td>
                                                        <a class="simple-download-metadata-link-text singlefile-download-metadata-link"
                                                           data-download-link="true">Metadata</a></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <hr>


                                        <div class="simple-download-close-button-conatiner">
                                            <input id="simple-download-close-button" type="button" value="CLOSE WINDOW"
                                                   onmouseover="this.className='buttonHover simple-download-close-button'"
                                                   onmouseout="this.className='button simple-download-close-button'"
                                                   class="button simple-download-close-button">
                                        </div>
                                    </div>


                                    <div class="simple-download-close-tip-container">
                                        <div class="simple-download-close-tip">
                                            <div class="simple-download-tip-head">
                                                Read this before closing the 1-Click Download Dialog:
                                            </div>
                                            <div class="simple-download-tip">
                                                <ol>
                                                    <li>Closing this dialog has no effect on downloads in progress: all
                                                        downloads are managed by your browser.
                                                    </li>
                                                    <li>Click the REFRESH COUNTS button in the Data Collections tab to
                                                        see the latest download status of your collections.
                                                    </li>
                                                </ol>
                                            </div>
                                            <div class="simple-download-tip-button-div">
                                                <input id="simple-download-gotit-button" type="button"
                                                       class="button simple-download-close-tip-button"
                                                       onmouseover="this.className='buttonHover simple-download-close-tip-button'"
                                                       onmouseout="this.className='button simple-download-close-tip-button'"
                                                       value="GOT IT">
                                            </div>
                                            <div class="simple-download-tip-checkbox-div">
                                                <input type="checkbox" id="simple-download-hide-warning-checkbox"
                                                       value="checkbox"> <label
                                                    for="simple-download-hide-warning-checkbox">Don't show this warning
                                                again.</label>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="simple-download-notification-shadow">
                                        <div class="simple-download-notification-container">
                                            <div class="simple-download-notification">
                                                <span>Your download started:</span><br><span>please track its progress in your internet browser.</span>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <script>

                                    // Global Defaults for Simple Download Page
                                    var DEFAULT_SIMPLE_DOWNLOAD_FILESIZE = "...";
                                    var DEFAULT_SIMPLE_DOWNLOAD_TIME_ESTIMATE = "...";
                                    var COOKIE_NAME_HIDE_SIMPLE_DOWNLOAD_WARNING = encodeURIComponent("_hideDownloadWarningChk");
                                    var CSS_CLASS_VISITED_DOWNLOAD_LINK = "download-link-visited";

                                    var DOWNLOAD_DISCLAIMER_TIMEOUT = 5000;

                                    // Document on ready
                                    $("document").ready(function () {

                                        // JQuery Modal - 1-Click Download
                                        var simpleDownloadModal = $('#simple-download-modal');

                                        // Add click event to Hide Warning checkbox
                                        $("#simple-download-hide-warning-checkbox").click(function () {
                                            if ($(this).prop('checked')) {
                                                document.cookie = COOKIE_NAME_HIDE_SIMPLE_DOWNLOAD_WARNING + "=true; expires=Fri, 31 Dec 9999 23:59:59 GMT";
                                            } else {
                                                document.cookie = COOKIE_NAME_HIDE_SIMPLE_DOWNLOAD_WARNING + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT";
                                            }
                                        });

                                        // Add click event to close the modal (hide)
                                        $("#simple-download-close-button").click(function () {
                                            // Show the simple download warning regarding browser popup if they didn't click "Got It"
                                            if (getIDACookieValue(COOKIE_NAME_HIDE_SIMPLE_DOWNLOAD_WARNING) == 'true') {
                                                simpleDownloadModal.hide();
                                            } else {
                                                $(".simple-download-close-tip-container").show();
                                            }
                                        });

                                        // Add Got It button
                                        $("#simple-download-gotit-button").click(function () {
                                            simpleDownloadModal.hide();
                                            $(".close-tip-container").css("display", "none");
                                        });

                                        // Get Cookie value by name function
                                        function getIDACookieValue(name) {
                                            var value = "; " + document.cookie;
                                            var parts = value.split("; " + name + "=");
                                            if (parts.length == 2) return parts.pop().split(";").shift();
                                        }
                                    });

                                    // Get User agent
                                    var userAgent = navigator.userAgent.toLowerCase();

                                    // If safari, show the "Zip file" msg
                                    if (userAgent.indexOf("chrome") < 0 && userAgent.indexOf("safari") > -1) {
                                        $(".safari-msg").show();
                                    }

                                </script>


                                <script>
                                    <!--

                                    /** Global managers */
                                    var PAGE_MANAGER;
                                    var CHECK_BOX_MANAGER;
                                    var SELECT_MANAGER;

                                    /** Global variable to keep track of the Download applet is open or not */
                                    var DOWNLOAD_APPLET_OPEN = false;

                                    /** Initialize the collection tab */
                                    function initCollectTab() {
                                        // Initialize managers
                                        PAGE_MANAGER = new PageManager();
                                        CHECK_BOX_MANAGER = new CheckBoxManager('checkBoxes', 0, 0);
                                        CHECK_BOX_MANAGER.checkAll(false);   // Clear check box cache

                                        // Initialize the select manager
                                        var tableBuilder = new TableBuilder('tableHeader', 'tableData', 'slider',
                                            'sliderThumb', 'sliderThumbMiddle',
                                            'sliderTooltip');
                                        SELECT_MANAGER = new SelectManager(tableBuilder);

                                        // Clear the table
                                        tableBuilder.noPage();

                                        // Query for the current collection (if any)
                                        var selectHandler = new SelectHandler();
                                        selectHandler.init();
                                    }

                                    //-->

                                    // Retrieved from the web.xml file
                                    var DOWNLOAD_URL = "https://downloads.loni.usc.edu/download/image";
                                    var DOWNLOAD_METADATA_URL = "https://downloads.loni.usc.edu/download/image-metadata";
                                    var DOWNLOAD_DATASET_URL = "https://downloads.loni.usc.edu/download/dataset";

                                    // Used for Advanced Download Manager Tab
                                    var advancedWindow;
                                    // Download Key used for both 1-Click and Advanced
                                    var downloadKeyHandler;

                                    $("document").ready(function () {

                                        var color = $("#tableHeader").css("background-color");
                                        $(".project-color").css("color", color);

                                        // 1-CLICK DOWNLOAD BUTTON - On Click
                                        $("#simple-download-button").click(function () {

                                            // Show loader
                                            $(".download-spinner").addClass("show");

                                            downloadKeyHandler = new DownloadKeyHandler(document.forms.collection, simpleDownloadKeyCallback);
                                            downloadKeyHandler.getDownloadKey();
                                        });

                                        // ADVANCED DOWNLOAD BUTTON - On Click
                                        $("#adv-download-button").click(function () {

                                            // Show loader
                                            $(".download-spinner").addClass("show");

                                            // Open blank window onclick to prevent popup blocker
                                            advancedWindow = window.open('search/preparingDownload.jsp', '');

                                            downloadKeyHandler = new DownloadKeyHandler(document.forms.collection, advancedDownloadKeyCallback);
                                            downloadKeyHandler.getDownloadKey();
                                        });

                                        // Advanced Download Button Callback from Download Handler
                                        // downloadKey: the downloadKey from the XML
                                        // totalImageSelectionSize: total number of images non-translatable from the XML
                                        // requestedImageFormat: requested image format (for translation or as archived)
                                        function advancedDownloadKeyCallback(downloadKey, totalImageSelectionSize, requestedImageFormat, xml) {

                                            // Hide loader
                                            $(".download-spinner").removeClass("show");

                                            // Check if XML is an error or not
                                            if (!isDownloadKeyXMLAnError(downloadKeyHandler)) {

                                                // Prepare the Advanced Download URL
                                                var collectionName = encodeURIComponent($("#currentCollection").text().substring(12, $("#currentCollection").text().length));
                                                var userEmail = encodeURIComponent("");
                                                var project = encodeURIComponent("ADNI");
                                                var ts = Date.now();
                                                var advancedWinUrl = 'search/advancedDownload.jsp?loginKey=&downloadKey=' + encodeURIComponent(downloadKey) + '&totalImageSelectionSize=' + totalImageSelectionSize + '&collectionName=' + collectionName + '&userEmail=' + userEmail + '&collectionId=' + $('#hiddenCollectionId').val() + '&format=' + requestedImageFormat + '&project=' + project + "&ts=" + ts;

                                                // If as requested then
                                                if (requestedImageFormat == "AS_ARCHIVED") {

                                                    // Store the data
                                                    xml = new XMLSerializer().serializeToString(xml[0])
                                                    window.localStorage.setItem("downloadKeys" + ts, xml);

                                                    // Store the current date
                                                    window.localStorage.setItem("startDate", (new Date()).getTime());
                                                }

                                                // Create a new window
                                                window.name = "collectionTab";
                                                advancedWindow.location = advancedWinUrl;
                                                advancedWindow.focus();
                                            } else {
                                                advancedWindow.close();
                                            }
                                        }

                                        // Callback for Simple Download Key Handler
                                        function simpleDownloadKeyCallback(downloadKey, totalImageSelectionSize, requestedImageFormat, xml) {

                                            // Hide loader
                                            $(".download-spinner").removeClass("show");

                                            if (requestedImageFormat == "AS_ARCHIVED") {
                                                var simpleDownloadHandler = new AsArchivedSimpleDownloadHandler(xml, DOWNLOAD_URL, DOWNLOAD_METADATA_URL);
                                                simpleDownloadHandler.show();
                                                return;
                                            }

                                            var simpleDownloadHandler = new SimpleDownloadHandler(downloadKey, totalImageSelectionSize, requestedImageFormat, DOWNLOAD_URL, DOWNLOAD_METADATA_URL, DOWNLOAD_DATASET_URL);
                                            if (!isDownloadKeyXMLAnError(downloadKeyHandler)) {
                                                simpleDownloadHandler.startDownloadHandler();
                                            }
                                        }

                                        // Handler function for DownloadKeyXML
                                        // Returns true if an errorXML node is found; false if not
                                        // If it's an XML error it will alert the user
                                        function isDownloadKeyXMLAnError(downloadKeyHandler) {
                                            // Check if the XML is an error
                                            var errorXMLNode = $(downloadKeyHandler.returnedXml).find('errorMessage');
                                            if ($(errorXMLNode).length > 0) {
                                                // Alert the user that an error has occured
                                                var errorCode = $(errorXMLNode).attr('message');
                                                if (errorCode == 'NOT_LOGGED_IN') {
                                                    alert('Your "LOG IN" state is indetermined.\n\nPlease refresh the page.');
                                                } else {
                                                    alert('An error has prevented you from downloading the image series.\n\nThe error has been logged.');
                                                }
                                                return true;
                                            }
                                            return false;
                                        }

                                        // Clear local storage on load
                                        clearLocalStorage();
                                    });

                                    // Called from Advanced Download Window
                                    // Will refresh the collection tab and set the window focus (if possible)
                                    function advancedDownloadRefreshFocus() {
                                        initCollectTab();
                                        window.focus();
                                        var collectionTab = window.open('', 'collectionTab');
                                        collectionTab.focus();
                                    }

                                    // Clear the localstorage if the keys are more than 10 days old
                                    // This is to prevent hitting the ~5MB limit on most browsers
                                    function clearLocalStorage() {

                                        var today = (new Date()).getTime();

                                        // Set expiry as 10 days
                                        var expiry = 1000 * 60 * 60 * 24 * 10;

                                        for (var key in window.localStorage) {

                                            // If download keys
                                            if (key.indexOf("downloadKeys") > -1) {
                                                var time = +(key.replace("downloadKeys", ""));

                                                // If expired then remove item
                                                if (today - time > expiry) window.localStorage.removeItem(key);
                                            }
                                        }
                                    };

                                </script>

                                <input type="button" value="" id="hiddenAdvancedButtonEle"
                                       name="hiddenAdvancedButtonEle" style="display: none;">

                                <form name="collection" method="POST">
                                    <table width="100%" cellspacing="0" cellpadding="2" border="0">
                                        <tbody>
                                        <tr>


                                            <td width="17%" valign="top">
                                                <div id="collections_label"><b>COLLECTIONS</b></div>
                                                <table id="collections_box" class="ida-light-background"
                                                       style="height:456px;" width="97%" cellspacing="0" cellpadding="1"
                                                       border="1">
                                                    <tbody>
                                                    <tr>
                                                        <td>


                                                            <div class="refresh-button-div">
                                                                <input type="button" value="REFRESH COUNTS"
                                                                       id="refreshCounts"
                                                                       onmouseover="this.className='buttonHover refresh-button'"
                                                                       onmouseout="this.className='button refresh-button'"
                                                                       onclick="initCollectTab();"
                                                                       class="button refresh-button">
                                                            </div>


                                                            <table style="height:2px;" width="100%" cellspacing="0"
                                                                   cellpadding="0" border="1">
                                                                <tbody>
                                                                <tr>
                                                                    <td></td>
                                                                </tr>
                                                                </tbody>
                                                            </table>


                                                            <div id="collections_tree"
                                                                 style="direction: rtl; overflow: hidden scroll; width: 100%; height: 438px;">
                                                                <div style="direction:ltr;">
                                                                    <table width="100%" cellspacing="0" cellpadding="4"
                                                                           border="0">
                                                                        <tbody>
                                                                        <tr valign="top">
                                                                            <td>
                                                                                <div><font size="2">Collections</font>
                                                                                </div>
                                                                                <div id="collections">
                                                                                    <div class="ygtvitem" id="ygtv0">
                                                                                        <div class="ygtvchildren"
                                                                                             id="ygtvc0">
                                                                                            <div class="ygtvitem"
                                                                                                 id="ygtv1">
                                                                                                <table cellspacing="0"
                                                                                                       cellpadding="0"
                                                                                                       border="0">
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td id="ygtvt1"
                                                                                                            class="ygtvtp"
                                                                                                            onmouseover="this.className=YAHOO.widget.TreeView.getNode('collections',1).getHoverStyle()"
                                                                                                            onmouseout="this.className=YAHOO.widget.TreeView.getNode('collections',1).getStyle()"
                                                                                                            onclick="javascript:YAHOO.widget.TreeView.getNode('collections',1).toggle()">
                                                                                                            <div class="ygtvspacer"></div>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <a id="ygtvlabelel1"
                                                                                                               class="ygtvlabel"
                                                                                                               href="javascript:YAHOO.widget.TreeView.getNode('collections',1).toggle()"
                                                                                                               target="_self"
                                                                                                               onclick="return YAHOO.widget.TreeView.getNode('collections',1).onLabelClick(YAHOO.widget.TreeView.getNode('collections',1))"
                                                                                                               onmouseover="document.getElementById('ygtvt1').className=YAHOO.widget.TreeView.getNode('collections',1).getHoverStyle()"
                                                                                                               onmouseout="document.getElementById('ygtvt1').className=YAHOO.widget.TreeView.getNode('collections',1).getStyle()">My
                                                                                                                Collections</a>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                                <div class="ygtvchildren"
                                                                                                     id="ygtvc1"
                                                                                                     style="display:none;"></div>
                                                                                            </div>
                                                                                            <div class="ygtvitem"
                                                                                                 id="ygtv5">
                                                                                                <table cellspacing="0"
                                                                                                       cellpadding="0"
                                                                                                       border="0">
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td id="ygtvt5"
                                                                                                            class="ygtvtn"
                                                                                                            onclick="javascript:YAHOO.widget.TreeView.getNode('collections',5).toggle()">
                                                                                                            <div class="ygtvspacer"></div>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <a id="ygtvlabelel5"
                                                                                                               class="ygtvlabel"
                                                                                                               href="javascript:YAHOO.widget.TreeView.getNode('collections',5).toggle()"
                                                                                                               target="_self"
                                                                                                               onclick="return YAHOO.widget.TreeView.getNode('collections',5).onLabelClick(YAHOO.widget.TreeView.getNode('collections',5))">My
                                                                                                                Shared
                                                                                                                Collections</a>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                                <div class="ygtvchildren"
                                                                                                     id="ygtvc5"
                                                                                                     style="display:none;"></div>
                                                                                            </div>
                                                                                            <div class="ygtvitem"
                                                                                                 id="ygtv6">
                                                                                                <table cellspacing="0"
                                                                                                       cellpadding="0"
                                                                                                       border="0">
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td id="ygtvt6"
                                                                                                            class="ygtvlp"
                                                                                                            onmouseover="this.className=YAHOO.widget.TreeView.getNode('collections',6).getHoverStyle()"
                                                                                                            onmouseout="this.className=YAHOO.widget.TreeView.getNode('collections',6).getStyle()"
                                                                                                            onclick="javascript:YAHOO.widget.TreeView.getNode('collections',6).toggle()">
                                                                                                            <div class="ygtvspacer"></div>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <a id="ygtvlabelel6"
                                                                                                               class="ygtvlabel"
                                                                                                               href="javascript:YAHOO.widget.TreeView.getNode('collections',6).toggle()"
                                                                                                               target="_self"
                                                                                                               onclick="return YAHOO.widget.TreeView.getNode('collections',6).onLabelClick(YAHOO.widget.TreeView.getNode('collections',6))"
                                                                                                               onmouseover="document.getElementById('ygtvt6').className=YAHOO.widget.TreeView.getNode('collections',6).getHoverStyle()"
                                                                                                               onmouseout="document.getElementById('ygtvt6').className=YAHOO.widget.TreeView.getNode('collections',6).getStyle()">Other
                                                                                                                Shared
                                                                                                                Collections</a>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                                <div class="ygtvchildren"
                                                                                                     id="ygtvc6"
                                                                                                     style="display:none;"></div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>


                                                            <input type="hidden" name="existingName">
                                                            <input type="hidden" name="newName">
                                                            <input type="hidden" name="newDescription">
                                                            <input type="hidden" name="userAction">
                                                            <input type="hidden" name="tab" value="collection">


                                                            <div id="checkBoxes"></div>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </td>


                                            <td width="100%" valign="top">

                                                <table style="margin-top: 12px;margin-bottom:6px" width="100%"
                                                       cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                    <tr>
                                                        <td>


                                                            <table style="height:100px;" width="100%" cellspacing="0"
                                                                   cellpadding="0" border="0">
                                                                <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <table width="100%" cellspacing="0"
                                                                               cellpadding="2" border="0">
                                                                            <tbody>
                                                                            <tr>


                                                                                <td>
                                                                                    <table id="download_border"
                                                                                           style="border: 2px solid #474747"
                                                                                           width="100%" height="105px"
                                                                                           cellspacing="2"
                                                                                           cellpadding="2" border="0">
                                                                                        <tbody>
                                                                                        <tr>
                                                                                            <td class="project-color"
                                                                                                style="vertical-align: bottom; color: rgb(12, 70, 12);">
                                                                                                <div id="currentCollection"
                                                                                                     style="height: 40px;font-size:20px;text-align:center;">
                                                                                                    <b>Collection: </b><input
                                                                                                        id="hiddenCollectionId"
                                                                                                        type="hidden"
                                                                                                        value=""></div>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td class="collection-functions-td"
                                                                                                nowrap="">
                                                                                                <div style="nowrap-div">
                                                                                                    <input id="export"
                                                                                                           type="button"
                                                                                                           value=" CSV "
                                                                                                           onmouseover="this.className='buttonHover collection-function-button'"
                                                                                                           onmouseout="this.className='button collection-function-button'"
                                                                                                           onclick="var handler=new ExportHandler();
                                 handler.exportMetadata();" class="buttonDisabled collection-function-button"
                                                                                                           disabled="">


                                                                                                </div>
                                                                                            </td>
                                                                                        </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </td>
                                                                                <td>
                                                                                    <table width="100%" height="105px"
                                                                                           cellspacing="1"
                                                                                           cellpadding="1" border="0">


                                                                                        <tbody>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <table id="download_border"
                                                                                                       class="download-border"
                                                                                                       width="100%"
                                                                                                       height="50px"
                                                                                                       cellspacing="0"
                                                                                                       cellpadding="0">
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td class="download-button-td-left">
                                                                                                            <div class="nowrap-div">

                                                                                                                <div id="radioBtnContainer"
                                                                                                                     style="display: block;">
                                                                                                                    <input type="radio"
                                                                                                                           id="archivedButton"
                                                                                                                           name="format"
                                                                                                                           value="AS_ARCHIVED"
                                                                                                                           checked=""
                                                                                                                           disabled="">
                                                                                                                    <label for="archivedButton">As
                                                                                                                        Archived</label>
                                                                                                                    <input type="radio"
                                                                                                                           id="niftiButton"
                                                                                                                           name="format"
                                                                                                                           value="NIFTI"
                                                                                                                           disabled="">
                                                                                                                    <label for="niftiButton">NiFTI</label>
                                                                                                                </div>

                                                                                                                <div id="mixedMsg"
                                                                                                                     class="collect-tab-radio-msg"
                                                                                                                     style="display: none;">
                                                                                                                    Items
                                                                                                                    not
                                                                                                                    available
                                                                                                                    in
                                                                                                                    NiFTI
                                                                                                                    format
                                                                                                                    will
                                                                                                                    be
                                                                                                                    downloaded
                                                                                                                    As
                                                                                                                    Archived.
                                                                                                                </div>

                                                                                                                <div id="noTranslatableMsg"
                                                                                                                     class="collect-tab-radio-msg"
                                                                                                                     style="display: none;">
                                                                                                                    Items
                                                                                                                    will
                                                                                                                    be
                                                                                                                    downloaded
                                                                                                                    in
                                                                                                                    their
                                                                                                                    original
                                                                                                                    format.
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td class="download-button-td-right"
                                                                                                            nowrap="">
                                                                                                            <div class="nowrap-div">
                                                                                                                <input type="button"
                                                                                                                       value="1-CLICK DOWNLOAD"
                                                                                                                       id="simple-download-button"
                                                                                                                       onmouseover="this.className='buttonHover download-button'"
                                                                                                                       onmouseout="this.className='button download-button'"
                                                                                                                       class="buttonDisabled download-button"
                                                                                                                       disabled="">
                                                                                                                <input type="button"
                                                                                                                       value="ADVANCED DOWNLOAD"
                                                                                                                       id="adv-download-button"
                                                                                                                       onmouseover="this.className='buttonHover download-button'"
                                                                                                                       onmouseout="this.className='button download-button'"
                                                                                                                       class="buttonDisabled download-button"
                                                                                                                       disabled="">
                                                                                                            </div>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>


                                                                                        <tr>
                                                                                            <td>
                                                                                                <table id="download_border"
                                                                                                       style="border: 2px solid #474747"
                                                                                                       width="100%"
                                                                                                       height="50px"
                                                                                                       cellspacing="1"
                                                                                                       cellpadding="1">
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td id="imageNumber"
                                                                                                            class="download-button-td-left project-color"
                                                                                                            style="color: rgb(12, 70, 12);"
                                                                                                            width="80%"
                                                                                                            nowrap=""
                                                                                                            align="left">
                                                                                                            <b>0 items
                                                                                                                selected</b>
                                                                                                        </td>
                                                                                                        <td class="download-button-td-right"
                                                                                                            nowrap="">
                                                                                                            <div class="nowrap-div">
                                                                                                                <input type="submit"
                                                                                                                       value="REMOVE"
                                                                                                                       id="delete"
                                                                                                                       onmouseover="this.className='buttonHover image-button'"
                                                                                                                       onmouseout="this.className='button image-button'"
                                                                                                                       onclick="var thisForm = document.collection;
                                          thisForm.userAction.value =
                                          'delete';
                                          thisForm.newName.disabled = true;
                                          thisForm.existingName.disabled = true;" class="image-button buttonDisabled"
                                                                                                                       disabled="">
                                                                                                                <input type="button"
                                                                                                                       value="REGROUP"
                                                                                                                       id="rgpCollectId"
                                                                                                                       onmouseover="this.className='buttonHover image-button'"
                                                                                                                       onmouseout="this.className='button image-button'"
                                                                                                                       class="image-button buttonDisabled"
                                                                                                                       disabled="">

                                                                                                            </div>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>


                                                <table id="collection_table" style="margin-left:2px" width="100%"
                                                       cellspacing="0" cellpadding="2" border="1">


                                                    <tbody>
                                                    <tr valign="top">
                                                        <td style="width:100%">
                                                            <div class="table_header">
                                                                <table style="height:25px;width:100%" cellspacing="0"
                                                                       cellpadding="0" border="0">
                                                                    <tbody>
                                                                    <tr id="tableHeader" class="table_header"
                                                                        align="center">
                                                                        <td>
                                                                            <div id="column_DIV_0"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_0"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_1"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_1"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_2"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_2"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_3"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_3"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_4"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_4"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_5"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_5"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_6"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_6"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_7"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_7"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_8"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_8"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_9"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_9"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_10"
                                                                                 class="tableHeaderInactive"><u><a
                                                                                    href="javascript:void(0);"
                                                                                    id="column_A_10"></a></u></div>
                                                                        </td>
                                                                        <td>
                                                                            <div id="column_DIV_11"
                                                                                 class="tableHeaderInactive">All<input
                                                                                    type="checkbox" name="selectAll"
                                                                                    id="selectAllCheckBox"
                                                                                    style="display: none;"></div>
                                                                        </td>
                                                                        <td width="25px"></td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>


                                                            <table width="100%" cellspacing="0" cellpadding="0"
                                                                   border="0">

                                                                <tbody>
                                                                <tr valign="top">


                                                                    <td>
                                                                        <div id="tableData" style="width:100%;"></div>
                                                                    </td>


                                                                    <td>
                                                                        <table style="float:right" cellspacing="0"
                                                                               cellpadding="0" border="0">


                                                                            <tbody>
                                                                            <tr>
                                                                                <td><input type="image"
                                                                                           onclick="blur(); var selectHandler = new SelectHandler(); selectHandler.previousPage(); return false;"
                                                                                           src="/pages/images/Scroll-Arrow-Up.png"
                                                                                           alt="^" width="17"
                                                                                           height="17"></td>
                                                                            </tr>


                                                                            <tr>
                                                                                <td>
                                                                                    <div id="slider"
                                                                                         style="position: relative; height: 310px; width: 15px; background: rgb(196, 196, 196); border-left: 1px solid rgb(103, 103, 103); border-right: 1px solid rgb(103, 103, 103); outline: none;">
                                                                                        <div id="sliderThumb"
                                                                                             style="position: relative; left: 0px; top: 0px;">
                                                                                            <table cellspacing="0"
                                                                                                   cellpadding="0"
                                                                                                   border="0">
                                                                                                <tbody>
                                                                                                <tr>
                                                                                                    <td><img
                                                                                                            src="/pages/images/Scroll-Thumb-Slider-Top.png"
                                                                                                            width="15"
                                                                                                            height="3">
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td><img
                                                                                                            src="/pages/images/Scroll-Thumb-Slider-Middle.png"
                                                                                                            id="sliderThumbMiddle"
                                                                                                            style="height: 304px;"
                                                                                                            width="15"
                                                                                                            height="313">
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td><img
                                                                                                            src="/pages/images/Scroll-Thumb-Slider-Bottom.png"
                                                                                                            width="15"
                                                                                                            height="3">
                                                                                                    </td>
                                                                                                </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>


                                                                            <tr>
                                                                                <td><input type="image"
                                                                                           onclick="blur(); var selectHandler = new SelectHandler(); selectHandler.nextPage(); return false;"
                                                                                           src="/pages/images/Scroll-Arrow-Down.png"
                                                                                           alt="V" width="17"
                                                                                           height="17"></td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </form>
                            </div>
                        </div>
                    </div>
                </td>

            </tr>
            </tbody>
        </table>


        <div class="download-spinner">
            <div class="download-spinner-inner">
                <div class="download-spinner-icon"></div>
                <div class="download-spinner-msg">Please wait while the download is being prepared</div>
            </div>
        </div>
    </div>
</div>


<style>
    .ui-progressbar-value {
        background-image: url(/pages/images/Progress_Bar.gif);
    }
</style>
<div id="progressDialog" title="Getting Search Results ...">
    <div id="progressBar"></div>
</div>


<div id="dialogsId">
    <div class="yui-panel-container yui-dialog shadow" id="shareDialog_c" style="z-index: 2; left: 710px; top: 422px;">
        <div id="shareDialog" style="font-size: 12px; visibility: inherit; width: 480px;"
             class="yui-module yui-overlay yui-panel">
            <div id="shareDialogTitle" class="hd" style="cursor: move;"></div>
            <div class="bd">
                <form name="share" action="/pages/ajax/search/collectShare" method="GET"><input type="hidden"
                                                                                                name="access"
                                                                                                value="share">
                    <table>
                        <tbody>
                        <tr>
                            <td>Choose the permissions that others need to access your collection.</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="currentCollection"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>Minimum Level: &nbsp; <select name="accessLevel" id="accessLevel"></select></td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
            <div class="container-close">&nbsp;</div>
            <div class="ft"><span class="button-group"><span id="yui-gen0" class="yui-button yui-push-button"><span
                    class="first-child"><button type="button">Share</button></span></span><span id="yui-gen1"
                                                                                                class="yui-button yui-push-button"><span
                    class="first-child"><button type="button">Cancel</button></span></span></span></div>
        </div>
    </div>
    <div class="yui-panel-container yui-dialog" id="regroupDialog_c">
        <div id="regroupDialog" style="font-size: 12px; visibility: inherit;" class="yui-module yui-overlay yui-panel">
            <div id="regroupDialogTitle" class="hd"></div>
            <div class="bd">
                <form name="regroup">
                    <table>
                        <tbody>
                        <tr>
                            <td>&nbsp;</td>
                            <td nowrap="" align="left"><b>Select an existing collection:</b></td>
                            <td align="left"><select name="existingName" id="candidateNames"
                                                     onchange="var disabler = new RegroupDisabler(); disabler.disableText(this);"></select>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td align="center"><b>OR</b></td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td nowrap=""><b>Enter a name for the collection:</b></td>
                            <td align="left"><input type="text" id="nameText" name="newName" size="20" maxlength="25"
                                                    onkeyup="var disabler = new RegroupDisabler(); disabler.disableMenu(this);"
                                                    onblur="var disabler = new RegroupDisabler(); disabler.disableMenu(this);">
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td align="left"><span id="collectionNameError" style="color:#FF0000"></span></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td nowrap=""><b>Optional collection description:</b></td>
                            <td align="left"><input type="text" id="descText" name="newDescription" size="20"
                                                    maxlength="160"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td align="left"><span id="collectionDescError" style="color:#FF0000"></span></td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
        </div>
    </div>
</div>


<link rel="stylesheet" href="/explore/css/header/idaFooter.css">


<script type="text/javascript">
    var footer = $(".ida-footer");
    footer.remove();
    $("body").append(footer);
</script>
<div class="ida-footer">
    <div class="ida-footer-outer">
        <div class="ida-footer-inner">

            <div class="ida-footer-left">

                <div class="ida-footer-contact email">
                    <a class="ida-loni" target="_blank" data-prefix="ida" data-suffix="loni.usc.edu"></a>
                </div>

                <div class="ida-footer-contact facebook">
                    <a href="https://www.facebook.com/neuroimaging" target="_blank"></a>
                </div>

                <div class="ida-footer-contact twitter">
                    <a href="https://twitter.com/USCLONI" target="_blank"></a>
                </div>

                <div class="ida-footer-contact youtube">
                    <a href="https://www.youtube.com/user/iniusc" target="_blank"></a>
                </div>

                <div class="ida-footer-policy">
                    <a href="https://loni.usc.edu/loni/policy" target="_blank">Privacy Policy</a>
                </div>

                <div class="ida-footer-contact-us">
                    <a target="_blank" href="/explore/jsp/support/support.jsp#contact">Contact Us</a>
                </div>

            </div>
            <div class="ida-footer-center">
				<span class="ida-footer-copyright"> © 2003 - 2023 LONI. All rights
					reserved.</span>
            </div>
            <div class="ida-footer-right">
                <div class="ida-footer-loni-logo ida-footer-logo">
                    <a href="https://loni.usc.edu/"></a>
                </div>
            </div>

        </div>
    </div>
</div>


<div style="position: absolute; height: 1px; width: 1px; top: -1000px; left: -1000px;"><span
        class="ygtvtm">&nbsp;</span><span class="ygtvtmh">&nbsp;</span><span class="ygtvtp">&nbsp;</span><span
        class="ygtvtph">&nbsp;</span><span class="ygtvln">&nbsp;</span><span class="ygtvlm">&nbsp;</span><span
        class="ygtvlmh">&nbsp;</span><span class="ygtvlp">&nbsp;</span><span class="ygtvlph">&nbsp;</span><span
        class="ygtvloading">&nbsp;</span></div>
<a style="display: none;"></a></body>
</html>